import{a as x}from"./chunk-TSE43D2Y.js";import{b as p,c as I,d as L}from"./chunk-4XHCRYQ6.js";var i=p(I(),1),h=p(L(),1),t=p(x(),1);function j(c){let y=()=>{let[s,m]=(0,i.useState)(null),[S,b]=(0,i.useState)({}),[l,R]=(0,i.useState)(""),[f,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e={};c.stories.forEach(a=>{let o=a.split("/"),r=e;for(let n=0;n<o.length;n++){let d=o[n];n===o.length-1?r[d]={path:a}:(r[d]||(r[d]={}),r=r[d])}}),b(e),c.stories.length>0&&!s&&m(c.stories[0])},[]),(0,i.useEffect)(()=>{if(s){g(!0),console.log("Setting selected story:",s);let e=`/story-iframe.html?story=${encodeURIComponent(s)}`;console.log("Iframe URL:",e),R(e)}},[s]);let C=(e,a)=>{let o=a.split("/"),r=e;for(let n of o)if(r=r[n],!r)return null;return r},u=(e,a="")=>Object.keys(e).map(o=>{let r=a?`${a}/${o}`:o;if(e[o].path){let n=e[o].path,d=o.replace(".stories.js","").replace(".js","");return(0,t.jsx)("div",{onClick:()=>m(n),style:{padding:"8px 12px 8px 20px",margin:"2px 0",cursor:"pointer",borderRadius:"4px",backgroundColor:s===n?"grey":"transparent",color:s===n?"white":"#333",fontWeight:s===n?"bold":"normal",fontSize:"14px",transition:"all 0.2s ease"},children:d},n)}else return(0,t.jsxs)("div",{style:{marginLeft:"0px"},children:[(0,t.jsx)("div",{style:{fontWeight:"bold",margin:"8px 0 4px 0",padding:"6px 12px",fontSize:"14px",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},children:o}),(0,t.jsx)("div",{style:{marginLeft:"10px"},children:u(e[o],r)})]},r)}),T=s?s.split("/").pop().replace(".stories.js","").replace(".js",""):"";return(0,t.jsxs)("div",{style:{display:"flex",height:"100vh"},children:[(0,t.jsxs)("div",{style:{width:"280px",borderRight:"1px solid #ddd",backgroundColor:"#f8f9fa",padding:"20px",overflow:"auto"},children:[(0,t.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:"Stories"}),u(S)]}),(0,t.jsxs)("div",{style:{flex:1,padding:"20px",overflow:"auto",backgroundColor:"#fff"},children:[f&&!l&&(0,t.jsx)("div",{children:"Loading story..."}),l&&(0,t.jsx)("iframe",{src:l,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",display:f?"none":"block"},title:"Story Preview",onLoad:()=>{console.log("Iframe loaded successfully:",l),g(!1)},onError:e=>{console.log("Iframe failed to load:",l,e),g(!1)}},l),!f&&s&&!l&&(0,t.jsxs)("div",{children:["Error loading story: ",s]})]})]})},v=document.getElementById("root");(0,h.createRoot)(v).render((0,t.jsx)(y,{}))}export{j as initRakonto};
//# sourceMappingURL=index.js.map
