{
  "version": 3,
  "sources": ["../../node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js", "../../node_modules/use-sync-external-store/with-selector.js", "../../example/components/IndraV0/ChatWall.js", "../../example/components/IndraV0/ChatInputForm.js", "../../example/components/IndraV0/SearchForm.js", "../../example/components/IndraV0/usePosts.js", "../../node_modules/react-redux/src/utils/react.ts", "../../node_modules/react-redux/src/utils/react-is.ts", "../../node_modules/react-redux/src/utils/warning.ts", "../../node_modules/react-redux/src/connect/verifySubselectors.ts", "../../node_modules/react-redux/src/connect/selectorFactory.ts", "../../node_modules/react-redux/src/utils/bindActionCreators.ts", "../../node_modules/react-redux/src/utils/isPlainObject.ts", "../../node_modules/react-redux/src/utils/verifyPlainObject.ts", "../../node_modules/react-redux/src/connect/wrapMapToProps.ts", "../../node_modules/react-redux/src/connect/invalidArgFactory.ts", "../../node_modules/react-redux/src/connect/mapDispatchToProps.ts", "../../node_modules/react-redux/src/connect/mapStateToProps.ts", "../../node_modules/react-redux/src/connect/mergeProps.ts", "../../node_modules/react-redux/src/utils/batch.ts", "../../node_modules/react-redux/src/utils/Subscription.ts", "../../node_modules/react-redux/src/utils/useIsomorphicLayoutEffect.ts", "../../node_modules/react-redux/src/utils/shallowEqual.ts", "../../node_modules/react-redux/src/utils/hoistStatics.ts", "../../node_modules/react-redux/src/components/Context.ts", "../../node_modules/react-redux/src/components/connect.tsx", "../../node_modules/react-redux/src/components/Provider.tsx", "../../node_modules/react-redux/src/hooks/useReduxContext.ts", "../../node_modules/react-redux/src/hooks/useStore.ts", "../../node_modules/react-redux/src/hooks/useDispatch.ts", "../../node_modules/react-redux/src/hooks/useSelector.ts", "../../node_modules/react-redux/src/exports.ts", "../../node_modules/reselect/src/devModeChecks/identityFunctionCheck.ts", "../../node_modules/reselect/src/devModeChecks/inputStabilityCheck.ts", "../../node_modules/reselect/src/devModeChecks/setGlobalDevModeChecks.ts", "../../node_modules/reselect/src/utils.ts", "../../node_modules/reselect/src/autotrackMemoize/autotracking.ts", "../../node_modules/reselect/src/autotrackMemoize/tracking.ts", "../../node_modules/reselect/src/autotrackMemoize/proxy.ts", "../../node_modules/reselect/src/lruMemoize.ts", "../../node_modules/reselect/src/autotrackMemoize/autotrackMemoize.ts", "../../node_modules/reselect/src/weakMapMemoize.ts", "../../node_modules/reselect/src/createSelectorCreator.ts", "../../node_modules/reselect/src/createStructuredSelector.ts", "../../example/components/IndraV0/selectors.ts", "../../example/components/IndraV0/LikabilityModal.js", "../../example/components/IndraV0/LikabilitySection.js", "../../example/components/IndraV0/MetricSection.js", "../../example/components/IndraV0/AllScoresList.js", "../../example/components/IndraV0/ActionButtons.js", "../../example/components/IndraV0/FocusedPostBanner.js", "../../example/components/IndraV0/ChatWallContent.js", "../../example/components/IndraV0/Post.js", "../../example/components/IndraV0/SubjectModal.js", "../../example/components/IndraV0/SubjectBanner.js"],
  "sourcesContent": ["/**\n * @license React\n * use-sync-external-store-with-selector.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useSyncExternalStore = React.useSyncExternalStore,\n      useRef = React.useRef,\n      useEffect = React.useEffect,\n      useMemo = React.useMemo,\n      useDebugValue = React.useDebugValue;\n    exports.useSyncExternalStoreWithSelector = function (\n      subscribe,\n      getSnapshot,\n      getServerSnapshot,\n      selector,\n      isEqual\n    ) {\n      var instRef = useRef(null);\n      if (null === instRef.current) {\n        var inst = { hasValue: !1, value: null };\n        instRef.current = inst;\n      } else inst = instRef.current;\n      instRef = useMemo(\n        function () {\n          function memoizedSelector(nextSnapshot) {\n            if (!hasMemo) {\n              hasMemo = !0;\n              memoizedSnapshot = nextSnapshot;\n              nextSnapshot = selector(nextSnapshot);\n              if (void 0 !== isEqual && inst.hasValue) {\n                var currentSelection = inst.value;\n                if (isEqual(currentSelection, nextSnapshot))\n                  return (memoizedSelection = currentSelection);\n              }\n              return (memoizedSelection = nextSnapshot);\n            }\n            currentSelection = memoizedSelection;\n            if (objectIs(memoizedSnapshot, nextSnapshot))\n              return currentSelection;\n            var nextSelection = selector(nextSnapshot);\n            if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n              return (memoizedSnapshot = nextSnapshot), currentSelection;\n            memoizedSnapshot = nextSnapshot;\n            return (memoizedSelection = nextSelection);\n          }\n          var hasMemo = !1,\n            memoizedSnapshot,\n            memoizedSelection,\n            maybeGetServerSnapshot =\n              void 0 === getServerSnapshot ? null : getServerSnapshot;\n          return [\n            function () {\n              return memoizedSelector(getSnapshot());\n            },\n            null === maybeGetServerSnapshot\n              ? void 0\n              : function () {\n                  return memoizedSelector(maybeGetServerSnapshot());\n                }\n          ];\n        },\n        [getSnapshot, getServerSnapshot, selector, isEqual]\n      );\n      var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n      useEffect(\n        function () {\n          inst.hasValue = !0;\n          inst.value = value;\n        },\n        [value]\n      );\n      useDebugValue(value);\n      return value;\n    };\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n", "'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/use-sync-external-store-with-selector.production.js');\n} else {\n  module.exports = require('./cjs/use-sync-external-store-with-selector.development.js');\n}\n", "import React, { useState, useContext, useRef, useEffect } from \"react\";\nimport { ChatInputForm } from \"./ChatInputForm.js\";\nimport { SearchForm } from \"./SearchForm.js\";\nimport { usePosts } from \"./usePosts.js\";\nimport { ProfileBanner } from \"./ProfileBanner.js\";\nimport { LikabilityModal } from \"./LikabilityModal.js\";\nimport { FocusedPostBanner } from \"./FocusedPostBanner.js\";\nimport { ChatWallContent } from \"./ChatWallContent.js\";\nimport { BackendContext } from \"./Backend.js\";\nimport { SubjectModal } from \"./SubjectModal.js\";\nimport { SubjectBanner } from \"./SubjectBanner.js\";\n\nexport function ChatWall({\n  showInputForm = false,\n  context = \"profile\",\n  scrollDirection = \"down\",\n  room = null,\n  profileUser = null,\n  focusedSubject = null,\n  onUserClick = null,\n}) {\n  const [message, setMessage] = useState(\"\");\n  // Pass profileUser to usePosts to filter posts by the profile user\n  const { posts, addPost, sortPosts, searchPosts, isLoading } = usePosts(\n    context,\n    room,\n    profileUser\n  );\n  const [searchResults, setSearchResults] = useState(null);\n  const [focusedPostId, setFocusedPostId] = useState(null);\n  const [focusedPost, setFocusedPost] = useState(null);\n  const [postHierarchy, setPostHierarchy] = useState([]);\n  const [showLikabilityModal, setShowLikabilityModal] = useState(false);\n  const [showSubjectModal, setShowSubjectModal] = useState(false);\n  const [userLikabilityScore, setUserLikabilityScore] = useState(null);\n  const [averageLikability, setAverageLikability] = useState(0);\n  // Use the focusedSubject passed from parent\n  const backend = useContext(BackendContext);\n  const [currentUser, setCurrentUser] = useState(null);\n  const contentRef = useRef(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (message.trim()) {\n      addPost(message, focusedPostId);\n      setMessage(\"\");\n      // Don't reset focusedPostId here - stay in the focused view to see the new reply\n    }\n  };\n\n  // Find a post by ID in the posts tree\n  const findPostById = (posts, postId) => {\n    for (const post of posts) {\n      if (post.id === postId) {\n        return post;\n      }\n      if (post.children) {\n        const found = findPostById(post.children, postId);\n        if (found) return found;\n      }\n    }\n    return null;\n  };\n\n  // Build hierarchy when focusing on a post\n  const handleReply = (postId) => {\n    const post = findPostById(displayPosts, postId);\n    if (post) {\n      setFocusedPostId(postId);\n      setFocusedPost(post);\n\n      // Build hierarchy - for now, we'll just track the immediate parent\n      // In a real implementation, you'd want to build the full path\n      const hierarchy = [post];\n      setPostHierarchy(hierarchy);\n    }\n  };\n\n  const handleBack = () => {\n    if (postHierarchy.length > 1) {\n      // Go up one level\n      const newHierarchy = [...postHierarchy];\n      newHierarchy.pop();\n      const newFocusedPost = newHierarchy[newHierarchy.length - 1];\n      setFocusedPostId(newFocusedPost.id);\n      setFocusedPost(newFocusedPost);\n      setPostHierarchy(newHierarchy);\n    } else {\n      // Back to root view\n      setFocusedPostId(null);\n      setFocusedPost(null);\n      setPostHierarchy([]);\n    }\n  };\n\n  const handleSearch = async (queryOrResults) => {\n    console.log(\"handleSearch called with:\", queryOrResults);\n    if (Array.isArray(queryOrResults)) {\n      // If it's an array, it's the new combined search results\n      // Convert them to the post format expected by ChatWallContent\n      const formattedResults = await Promise.all(queryOrResults.map(async (item) => {\n        console.log(\"Processing search result item:\", item);\n        switch (item.type) {\n          case 'user':\n            return {\n              id: `search-user-${item.data.uid}`,\n              uid: item.data.uid,\n              user: item.data.name,\n              content: `User: ${item.data.name} - ${item.data.aboutMe || 'No description available'}`,\n              time: 'User',\n              type: 'search-user',\n              timestamp: Date.now(),\n              hasLikability: false\n            };\n          case 'post':\n            // Get user for the post\n            let postUser;\n            if (item.data.uid === \"0\") {\n              postUser = await backend.getCurrentUser();\n            } else {\n              try {\n                postUser = await backend.getUser(item.data.uid);\n              } catch (error) {\n                postUser = { name: 'Unknown User' };\n              }\n            }\n            return {\n              id: `search-post-${item.data.id}`,\n              uid: item.data.uid,\n              user: postUser.name,\n              content: item.data.text,\n              time: new Date(item.data.timestamp).toLocaleDateString(),\n              type: 'search-post',\n              timestamp: item.data.timestamp,\n              hasLikability: !['notification', 'user', 'blocked', 'following'].includes(item.data.type)\n            };\n          case 'subject':\n            console.log(\"Processing subject search result:\", item.data);\n            return {\n              id: `search-subject-${item.data.id}`,\n              uid: item.data.id, // Use subject ID as uid\n              user: 'System',\n              content: `Subject: ${item.data.name} - ${item.data.description}`,\n              time: new Date(item.data.createdAt).toLocaleDateString(),\n              type: 'search-subject',\n              timestamp: item.data.createdAt,\n              hasLikability: false,\n              subject: item.data // Make sure subject data is included\n            };\n          default:\n            return null;\n        }\n      }));\n      \n      setSearchResults(formattedResults.filter(Boolean));\n    } else {\n      // If it's a string, use the existing searchPosts function\n      const results = await searchPosts(queryOrResults);\n      setSearchResults(results);\n    }\n  };\n\n  const displayPosts = searchResults || posts;\n  const sortedPosts = sortPosts(displayPosts, scrollDirection);\n\n  // Fetch current user\n  React.useEffect(() => {\n    const fetchCurrentUser = async () => {\n      try {\n        const user = await backend.getCurrentUser();\n        setCurrentUser(user);\n      } catch (error) {\n        console.error(\"Error fetching current user:\", error);\n      }\n    };\n\n    fetchCurrentUser();\n  }, [backend]);\n\n  // Trigger initial search for search context when component mounts\n  React.useEffect(() => {\n    const performInitialSearch = async () => {\n      if (context === \"search\" && !searchResults && currentUser) {\n        const [userResults, postResults, subjectResults] = await Promise.all([\n          backend.searchUsers('', currentUser.uid),\n          backend.searchPosts(''),\n          backend.searchSubjects('')\n        ]);\n        \n        const allResults = [\n          ...userResults.map(user => ({ type: 'user', data: user })),\n          ...postResults.map(post => ({ type: 'post', data: post })),\n          ...subjectResults.map(subject => ({ type: 'subject', data: subject }))\n        ];\n        \n        console.log(\"Initial search results:\", allResults);\n        handleSearch(allResults);\n      }\n    };\n\n    performInitialSearch();\n  }, [context, searchResults, currentUser, backend]);\n\n  // Scroll to appropriate position when component first mounts\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const scrollingElement = document.getElementById('scrolling-main-content-container');\n      if (scrollingElement) {\n        if (focusedPostId) {\n          // When focused on a post, scroll to the top to see oldest replies first\n          scrollingElement.scrollTop = 0;\n        } else {\n          // When not focused, scroll to the bottom\n          scrollingElement.scrollTop = scrollingElement.scrollHeight;\n        }\n      }\n    }, 100);\n    return () => clearTimeout(timer);\n  }, [focusedPostId]);\n\n  // Track if we should auto-scroll\n  const shouldAutoScrollRef = useRef(true);\n\n  // Scroll to appropriate position when posts are loaded or updated\n  useEffect(() => {\n    if (!isLoading) {\n      const timer = setTimeout(() => {\n        const scrollingElement = document.getElementById('scrolling-main-content-container');\n        if (scrollingElement && shouldAutoScrollRef.current) {\n          if (focusedPostId) {\n            // When focused on a post, scroll to the top to see oldest replies first\n            scrollingElement.scrollTop = 0;\n          } else {\n            // When not focused, scroll to the bottom\n            scrollingElement.scrollTop = scrollingElement.scrollHeight;\n          }\n        }\n      }, 50);\n      return () => clearTimeout(timer);\n    }\n  }, [posts, isLoading, focusedPostId, searchResults]);\n\n  // Track user scrolling to determine if we should auto-scroll\n  useEffect(() => {\n    const scrollingElement = document.getElementById('scrolling-main-content-container');\n    if (!scrollingElement) return;\n\n    const handleScroll = () => {\n      const threshold = 100; // pixels from bottom\n      const isNearBottom = \n        scrollingElement.scrollHeight - scrollingElement.scrollTop - scrollingElement.clientHeight < threshold;\n      shouldAutoScrollRef.current = isNearBottom;\n    };\n\n    scrollingElement.addEventListener('scroll', handleScroll);\n    return () => scrollingElement.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\", height: \"100%\", position: \"relative\" }}>\n      {/* Always visible search form at the top */}\n      {(context === \"profile\" ||\n        context === \"feed\" ||\n        context === \"search\" ||\n        context === \"friends\" ||\n        context === \"blocked\" ||\n        context === \"following\" ||\n        context === \"subject\") && (\n        <div\n          style={{\n            position: \"sticky\",\n            top: 0,\n            zIndex: 100,\n            backgroundColor: \"white\",\n            borderBottom: \"1px solid #ddd\",\n            height: '80px', // Fixed height to ensure consistent spacing\n          }}\n        >\n          <SearchForm onSearch={handleSearch} context={context} />\n        </div>\n      )}\n      \n      {/* Different layout when focused on a post */}\n      {focusedPostId ? (\n        <>\n          {/* Scrollable content area for replies */}\n          <div \n            ref={contentRef}\n            style={{ \n              flex: 1, \n              minHeight: 0, \n              overflow: \"auto\",\n              display: \"flex\",\n              flexDirection: \"column-reverse\" // This makes it up-scrollable (newest at bottom)\n            }}\n          >\n            <ChatWallContent\n              isLoading={isLoading}\n              focusedPostId={focusedPostId}\n              focusedPost={focusedPost}\n              displayPosts={displayPosts}\n              sortedPosts={sortedPosts}\n              context={context}\n              onReply={handleReply}\n              onUserClick={onUserClick}\n            />\n          </div>\n          \n          {/* Reply input form */}\n          {showInputForm && (\n            <div style={{ flexShrink: 0 }}>\n              <div\n                style={{\n                  backgroundColor: \"white\",\n                  borderTop: \"1px solid #ddd\",\n                  boxSizing: \"border-box\",\n                }}\n              >\n                <ChatInputForm\n                  message={message}\n                  setMessage={setMessage}\n                  handleSubmit={handleSubmit}\n                  position=\"bottom\"\n                  replyingTo={focusedPostId}\n                />\n              </div>\n            </div>\n          )}\n          \n          {/* Focused post at the very bottom */}\n          <div style={{ flexShrink: 0 }}>\n            <FocusedPostBanner\n              focusedPost={focusedPost}\n              onBack={handleBack}\n              onShowLikabilityModal={() => setShowLikabilityModal(true)}\n            />\n          </div>\n        </>\n      ) : (\n        // Original layout when not focused on a post\n        <>\n          {/* Content area that scrolls */}\n          <div \n            ref={contentRef}\n            style={{ \n              flex: 1, \n              minHeight: 0, \n              overflow: \"auto\",\n            }}\n          >\n            <ChatWallContent\n              isLoading={isLoading}\n              focusedPostId={focusedPostId}\n              focusedPost={focusedPost}\n              displayPosts={displayPosts}\n              sortedPosts={sortedPosts}\n              context={context}\n              onReply={handleReply}\n              onUserClick={onUserClick}\n            />\n          </div>\n\n          {/* Fixed footer section */}\n          <div style={{ flexShrink: 0 }}>\n            {/* Banners at the bottom */}\n            {context === \"profile\" && !focusedPostId && (\n              <div>\n                <ProfileBanner user={profileUser} />\n              </div>\n            )}\n            \n            {context === \"subject\" && !focusedPostId && (\n              <div>\n                {console.log(\"Rendering SubjectBanner in ChatWall with focusedSubject:\", focusedSubject)}\n                <SubjectBanner \n                  subject={focusedSubject} \n                  onShowSubjectModal={() => {\n                    console.log(\"Opening subject modal for subject:\", focusedSubject);\n                    setShowSubjectModal(true);\n                  }}\n                />\n              </div>\n            )}\n            \n            {/* Input form at the bottom for contexts that need it */}\n            {showInputForm &&\n              // Only show input form if we're on our own profile or in a chat\n              (context !== \"profile\" ||\n                (profileUser &&\n                  currentUser &&\n                  profileUser.uid === currentUser.uid)) && (\n                <div\n                  style={{\n                    backgroundColor: \"white\",\n                    borderTop: \"1px solid #ddd\",\n                    boxSizing: \"border-box\",\n                  }}\n                >\n                  <ChatInputForm\n                    message={message}\n                    setMessage={setMessage}\n                    handleSubmit={handleSubmit}\n                    position=\"bottom\"\n                    replyingTo={focusedPostId}\n                  />\n                </div>\n              )}\n          </div>\n        </>\n      )}\n\n      {/* Likability Modal */}\n      <LikabilityModal\n        show={showLikabilityModal}\n        onHide={() => setShowLikabilityModal(false)}\n        postId={focusedPostId}\n        userLikabilityScore={userLikabilityScore}\n        setUserLikabilityScore={setUserLikabilityScore}\n        averageLikability={averageLikability}\n        setAverageLikability={setAverageLikability}\n      />\n      \n      {/* Subject Modal */}\n      {console.log(\"showSubjectModal state:\", showSubjectModal)}\n      <SubjectModal\n        show={showSubjectModal}\n        onHide={() => {\n          console.log(\"Hiding subject modal\");\n          setShowSubjectModal(false);\n        }}\n        subject={focusedSubject}\n        currentUser={currentUser}\n      />\n    </div>\n  );\n}\n", "import React from 'react';\nimport { Form, Button, InputGroup } from \"react-bootstrap\";\n\nexport function ChatInputForm({ message, setMessage, handleSubmit, position = 'top', replyingTo = null }) {\n  const getPlaceholder = () => {\n    return replyingTo ? \"Type your reply...\" : \"Type your message...\";\n  };\n\n  return (\n    <div\n      style={{\n        padding: \"20px 0\",\n        [position === 'top' ? 'borderBottom' : 'borderTop']: \"1px solid #ddd\",\n        [position === 'top' ? 'marginBottom' : 'marginTop']: \"20px\",\n      }}\n    >\n      <Form onSubmit={handleSubmit}>\n        <InputGroup>\n          {replyingTo && (\n            <InputGroup.Text style={{ fontSize: '12px', backgroundColor: '#e9ecef' }}>\n              Replying...\n            </InputGroup.Text>\n          )}\n          <Form.Control\n            type=\"text\"\n            placeholder={getPlaceholder()}\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n          <Button variant=\"primary\" type=\"submit\">\n            {replyingTo ? 'Reply' : 'Send'}\n          </Button>\n        </InputGroup>\n      </Form>\n    </div>\n  );\n}\n", "import React, { useState, useContext } from 'react';\nimport { Form, Button, InputGroup } from \"react-bootstrap\";\nimport { BackendContext } from './Backend.js';\n\nexport function SearchForm({ onSearch, context }) {\n  const [query, setQuery] = useState(\"\");\n  const backend = useContext(BackendContext);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // Always perform search, even with empty query\n    // Get current user to filter out blocked users\n    const currentUser = await backend.getCurrentUser();\n    // Search for users, posts, and subjects\n    const [userResults, postResults, subjectResults] = await Promise.all([\n      backend.searchUsers(query, currentUser.uid),\n      backend.searchPosts(query),\n      backend.searchSubjects(query)\n    ]);\n    \n    // Combine all results\n    const allResults = [\n      ...userResults.map(user => ({ type: 'user', data: user })),\n      ...postResults.map(post => ({ type: 'post', data: post })),\n      ...subjectResults.map(subject => ({ type: 'subject', data: subject }))\n    ];\n    \n    onSearch(allResults);\n  };\n\n  const getPlaceholder = () => {\n    if (context === 'friends') {\n      return \"Search for friends...\";\n    } else if (context === 'search') {\n      return \"Search users, posts, and subjects...\";\n    } else {\n      return \"Search...\";\n    }\n  };\n\n  return (\n    <div\n      style={{\n        padding: \"20px 0\",\n        borderBottom: \"1px solid #ddd\",\n        marginBottom: \"20px\",\n      }}\n    >\n      <Form onSubmit={handleSubmit}>\n        <InputGroup>\n          <Form.Control\n            type=\"text\"\n            placeholder={getPlaceholder()}\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n          />\n          <Button variant=\"primary\" type=\"submit\">\n            Search\n          </Button>\n        </InputGroup>\n      </Form>\n    </div>\n  );\n}\n", "import { useState, useContext, useEffect } from 'react';\nimport { BackendContext } from './Backend.js';\nimport { useSelector } from 'react-redux';\nimport { selectPosts } from './selectors';\n\nexport function usePosts(context, room, profileUser = null) {\n  const backend = useContext(BackendContext);\n  const [posts, setPosts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const allPosts = useSelector(selectPosts);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      setIsLoading(true);\n      try {\n        // For profile context, pass the profile user's UID to the backend\n        if (context === 'profile') {\n          const profileUserUid = profileUser?.uid || null;\n          const backendPosts = await backend.getPosts(context, room, profileUserUid);\n          setPosts(backendPosts);\n        } else if (['feed', 'recommendations', 'notifications', 'popular', 'chat', 'search', 'friends', 'blocked', 'following', 'followers'].includes(context)) {\n          const backendPosts = await backend.getPosts(context, room);\n          setPosts(backendPosts);\n        } else {\n          // Fallback for any other contexts\n          const backendPosts = await backend.getPosts(context, room);\n          setPosts(backendPosts);\n        }\n      } catch (error) {\n        console.error('Error fetching posts:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchPosts();\n  }, [context, backend, room, profileUser, allPosts]);\n\n\n  const addPost = async (content, parentId = null) => {\n    try {\n      const currentUser = await backend.getCurrentUser();\n      let postType;\n      let targetUid = currentUser.uid;\n      \n      // Determine post type based on context\n      switch (context) {\n        case 'profile':\n          postType = 'profile';\n          // If we're on someone else's profile, we can't post to their wall directly\n          // In a real app, this might be a comment or mention\n          // For now, we'll always post as the current user\n          break;\n        case 'feed':\n          postType = 'feed';\n          break;\n        case 'chat':\n          postType = 'chat';\n          break;\n        default:\n          postType = 'feed';\n      }\n      \n      const newPost = await backend.addPost(targetUid, content, postType, room, parentId);\n      \n      // Format the new post to match existing structure\n      const formattedPost = {\n        id: newPost.id,\n        uid: newPost.uid,\n        user: \"You\",\n        content: newPost.text,\n        time: \"Just now\",\n        timestamp: newPost.timestamp, // Add timestamp for sorting\n        type: newPost.type,\n        parentId: newPost.parentId\n      };\n      \n      // Refetch posts to get the updated list with proper formatting\n      // This ensures the new post is properly integrated with the tree structure\n      const backendPosts = await backend.getPosts(context, room, profileUser?.uid);\n      setPosts(backendPosts);\n    } catch (error) {\n      console.error('Error adding post:', error);\n    }\n  };\n\n  const searchPosts = async (query) => {\n    // For now, we'll keep the existing search logic for friends\n    if (context === 'friends') {\n      // Use the backend to search for users\n      try {\n        const results = await backend.searchUsers(query);\n        // Convert user results to the format expected by the posts system\n        const formattedResults = results.map(user => ({\n          id: user.uid,\n          user: user.name,\n          content: `User found: ${user.name}`,\n          time: \"Just now\",\n          mutualFriends: Math.floor(Math.random() * 10) + 1\n        }));\n        return formattedResults;\n      } catch (error) {\n        console.error('Search error:', error);\n        return [];\n      }\n    } else {\n      // For other contexts, use the existing logic\n      let additionalPosts = [\n        {\n          id: 100,\n          user: \"Search Result\",\n          content: `Found result for \"${query}\" - This is a sample search result`,\n          time: \"Just now\",\n        },\n        {\n          id: 101,\n          user: \"React Expert\",\n          content: `Tutorial on ${query} - Learn how to implement this in your projects`,\n          time: \"2 hours ago\",\n        },\n        {\n          id: 102,\n          user: \"Tech News\",\n          content: `Breaking: New developments in ${query} technology`,\n          time: \"1 day ago\",\n        }\n      ];\n      \n      const allPosts = [...posts, ...additionalPosts];\n      \n      return allPosts.filter(post => \n        post.content.toLowerCase().includes(query.toLowerCase()) ||\n        post.user.toLowerCase().includes(query.toLowerCase())\n      );\n    }\n  };\n\n  const sortPosts = (posts, scrollDirection) => {\n    const sortedPosts = [...posts];\n    if (scrollDirection === 'down') {\n      // For downscrolling, newest posts at the top (sort by timestamp descending)\n      sortedPosts.sort((a, b) => b.timestamp - a.timestamp);\n    } else {\n      // For upscrolling, newest posts at the bottom (sort by timestamp ascending)\n      sortedPosts.sort((a, b) => a.timestamp - b.timestamp);\n    }\n    return sortedPosts;\n  };\n\n  return { posts, setPosts, addPost, sortPosts, searchPosts, isLoading };\n}\n", "import * as React from 'react'\n\nexport { React }\n", "import type { ElementType, MemoExoticComponent, ReactElement } from 'react'\nimport { React } from './react'\n\n// Directly ported from:\n// https://unpkg.com/browse/react-is@19.0.0/cjs/react-is.production.js\n// It's very possible this could change in the future, but given that\n// we only use these in `connect`, this is a low priority.\n\nexport const IS_REACT_19 = /* @__PURE__ */ React.version.startsWith('19')\n\nconst REACT_ELEMENT_TYPE = /* @__PURE__ */ Symbol.for(\n  IS_REACT_19 ? 'react.transitional.element' : 'react.element',\n)\nconst REACT_PORTAL_TYPE = /* @__PURE__ */ Symbol.for('react.portal')\nconst REACT_FRAGMENT_TYPE = /* @__PURE__ */ Symbol.for('react.fragment')\nconst REACT_STRICT_MODE_TYPE = /* @__PURE__ */ Symbol.for('react.strict_mode')\nconst REACT_PROFILER_TYPE = /* @__PURE__ */ Symbol.for('react.profiler')\nconst REACT_CONSUMER_TYPE = /* @__PURE__ */ Symbol.for('react.consumer')\nconst REACT_CONTEXT_TYPE = /* @__PURE__ */ Symbol.for('react.context')\nconst REACT_FORWARD_REF_TYPE = /* @__PURE__ */ Symbol.for('react.forward_ref')\nconst REACT_SUSPENSE_TYPE = /* @__PURE__ */ Symbol.for('react.suspense')\nconst REACT_SUSPENSE_LIST_TYPE = /* @__PURE__ */ Symbol.for(\n  'react.suspense_list',\n)\nconst REACT_MEMO_TYPE = /* @__PURE__ */ Symbol.for('react.memo')\nconst REACT_LAZY_TYPE = /* @__PURE__ */ Symbol.for('react.lazy')\nconst REACT_OFFSCREEN_TYPE = /* @__PURE__ */ Symbol.for('react.offscreen')\nconst REACT_CLIENT_REFERENCE = /* @__PURE__ */ Symbol.for(\n  'react.client.reference',\n)\n\nexport const ForwardRef = REACT_FORWARD_REF_TYPE\nexport const Memo = REACT_MEMO_TYPE\n\nexport function isValidElementType(type: any): type is ElementType {\n  return typeof type === 'string' ||\n    typeof type === 'function' ||\n    type === REACT_FRAGMENT_TYPE ||\n    type === REACT_PROFILER_TYPE ||\n    type === REACT_STRICT_MODE_TYPE ||\n    type === REACT_SUSPENSE_TYPE ||\n    type === REACT_SUSPENSE_LIST_TYPE ||\n    type === REACT_OFFSCREEN_TYPE ||\n    (typeof type === 'object' &&\n      type !== null &&\n      (type.$$typeof === REACT_LAZY_TYPE ||\n        type.$$typeof === REACT_MEMO_TYPE ||\n        type.$$typeof === REACT_CONTEXT_TYPE ||\n        type.$$typeof === REACT_CONSUMER_TYPE ||\n        type.$$typeof === REACT_FORWARD_REF_TYPE ||\n        type.$$typeof === REACT_CLIENT_REFERENCE ||\n        type.getModuleId !== undefined))\n    ? !0\n    : !1\n}\n\nfunction typeOf(object: any): symbol | undefined {\n  if (typeof object === 'object' && object !== null) {\n    const { $$typeof } = object\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        switch (((object = object.type), object)) {\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n          case REACT_SUSPENSE_LIST_TYPE:\n            return object\n          default:\n            switch (((object = object && object.$$typeof), object)) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n                return object\n              case REACT_CONSUMER_TYPE:\n                return object\n              default:\n                return $$typeof\n            }\n        }\n      case REACT_PORTAL_TYPE:\n        return $$typeof\n    }\n  }\n}\n\nexport function isContextConsumer(object: any): object is ReactElement {\n  return IS_REACT_19\n    ? typeOf(object) === REACT_CONSUMER_TYPE\n    : typeOf(object) === REACT_CONTEXT_TYPE\n}\n\nexport function isMemo(object: any): object is MemoExoticComponent<any> {\n  return typeOf(object) === REACT_MEMO_TYPE\n}\n", "/**\r\n * Prints a warning in the console if it exists.\r\n *\r\n * @param {String} message The warning message.\r\n * @returns {void}\r\n */\r\nexport default function warning(message: string) {\r\n  /* eslint-disable no-console */\r\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\r\n    console.error(message)\r\n  }\r\n  /* eslint-enable no-console */\r\n  try {\r\n    // This error was thrown as a convenience so that if you enable\r\n    // \"break on all exceptions\" in your console,\r\n    // it would pause the execution at this line.\r\n    throw new Error(message)\r\n    /* eslint-disable no-empty */\r\n  } catch (e) {}\r\n  /* eslint-enable no-empty */\r\n}\r\n", "import warning from '../utils/warning'\n\nfunction verify(selector: unknown, methodName: string): void {\n  if (!selector) {\n    throw new Error(`Unexpected value for ${methodName} in connect.`)\n  } else if (\n    methodName === 'mapStateToProps' ||\n    methodName === 'mapDispatchToProps'\n  ) {\n    if (!Object.prototype.hasOwnProperty.call(selector, 'dependsOnOwnProps')) {\n      warning(\n        `The selector for ${methodName} of connect did not specify a value for dependsOnOwnProps.`,\n      )\n    }\n  }\n}\n\nexport default function verifySubselectors(\n  mapStateToProps: unknown,\n  mapDispatchToProps: unknown,\n  mergeProps: unknown,\n): void {\n  verify(mapStateToProps, 'mapStateToProps')\n  verify(mapDispatchToProps, 'mapDispatchToProps')\n  verify(mergeProps, 'mergeProps')\n}\n", "import type { Dispatch, Action } from 'redux'\nimport type { ComponentType } from 'react'\nimport verifySubselectors from './verifySubselectors'\nimport type { EqualityFn, ExtendedEqualityFn } from '../types'\n\nexport type SelectorFactory<S, TProps, TOwnProps, TFactoryOptions> = (\n  dispatch: Dispatch<Action<string>>,\n  factoryOptions: TFactoryOptions,\n) => Selector<S, TProps, TOwnProps>\n\nexport type Selector<S, TProps, TOwnProps = null> = TOwnProps extends\n  | null\n  | undefined\n  ? (state: S) => TProps\n  : (state: S, ownProps: TOwnProps) => TProps\n\nexport type MapStateToProps<TStateProps, TOwnProps, State> = (\n  state: State,\n  ownProps: TOwnProps,\n) => TStateProps\n\nexport type MapStateToPropsFactory<TStateProps, TOwnProps, State> = (\n  initialState: State,\n  ownProps: TOwnProps,\n) => MapStateToProps<TStateProps, TOwnProps, State>\n\nexport type MapStateToPropsParam<TStateProps, TOwnProps, State> =\n  | MapStateToPropsFactory<TStateProps, TOwnProps, State>\n  | MapStateToProps<TStateProps, TOwnProps, State>\n  | null\n  | undefined\n\nexport type MapDispatchToPropsFunction<TDispatchProps, TOwnProps> = (\n  dispatch: Dispatch<Action<string>>,\n  ownProps: TOwnProps,\n) => TDispatchProps\n\nexport type MapDispatchToProps<TDispatchProps, TOwnProps> =\n  | MapDispatchToPropsFunction<TDispatchProps, TOwnProps>\n  | TDispatchProps\n\nexport type MapDispatchToPropsFactory<TDispatchProps, TOwnProps> = (\n  dispatch: Dispatch<Action<string>>,\n  ownProps: TOwnProps,\n) => MapDispatchToPropsFunction<TDispatchProps, TOwnProps>\n\nexport type MapDispatchToPropsParam<TDispatchProps, TOwnProps> =\n  | MapDispatchToPropsFactory<TDispatchProps, TOwnProps>\n  | MapDispatchToProps<TDispatchProps, TOwnProps>\n\nexport type MapDispatchToPropsNonObject<TDispatchProps, TOwnProps> =\n  | MapDispatchToPropsFactory<TDispatchProps, TOwnProps>\n  | MapDispatchToPropsFunction<TDispatchProps, TOwnProps>\n\nexport type MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps> = (\n  stateProps: TStateProps,\n  dispatchProps: TDispatchProps,\n  ownProps: TOwnProps,\n) => TMergedProps\n\ninterface PureSelectorFactoryComparisonOptions<TStateProps, TOwnProps, State> {\n  readonly areStatesEqual: ExtendedEqualityFn<State, TOwnProps>\n  readonly areStatePropsEqual: EqualityFn<TStateProps>\n  readonly areOwnPropsEqual: EqualityFn<TOwnProps>\n}\n\nfunction pureFinalPropsSelectorFactory<\n  TStateProps,\n  TOwnProps,\n  TDispatchProps,\n  TMergedProps,\n  State,\n>(\n  mapStateToProps: WrappedMapStateToProps<TStateProps, TOwnProps, State>,\n  mapDispatchToProps: WrappedMapDispatchToProps<TDispatchProps, TOwnProps>,\n  mergeProps: MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps>,\n  dispatch: Dispatch<Action<string>>,\n  {\n    areStatesEqual,\n    areOwnPropsEqual,\n    areStatePropsEqual,\n  }: PureSelectorFactoryComparisonOptions<TStateProps, TOwnProps, State>,\n) {\n  let hasRunAtLeastOnce = false\n  let state: State\n  let ownProps: TOwnProps\n  let stateProps: TStateProps\n  let dispatchProps: TDispatchProps\n  let mergedProps: TMergedProps\n\n  function handleFirstCall(firstState: State, firstOwnProps: TOwnProps) {\n    state = firstState\n    ownProps = firstOwnProps\n    stateProps = mapStateToProps(state, ownProps)\n    dispatchProps = mapDispatchToProps(dispatch, ownProps)\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps)\n    hasRunAtLeastOnce = true\n    return mergedProps\n  }\n\n  function handleNewPropsAndNewState() {\n    stateProps = mapStateToProps(state, ownProps)\n\n    if (mapDispatchToProps.dependsOnOwnProps)\n      dispatchProps = mapDispatchToProps(dispatch, ownProps)\n\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps)\n    return mergedProps\n  }\n\n  function handleNewProps() {\n    if (mapStateToProps.dependsOnOwnProps)\n      stateProps = mapStateToProps(state, ownProps)\n\n    if (mapDispatchToProps.dependsOnOwnProps)\n      dispatchProps = mapDispatchToProps(dispatch, ownProps)\n\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps)\n    return mergedProps\n  }\n\n  function handleNewState() {\n    const nextStateProps = mapStateToProps(state, ownProps)\n    const statePropsChanged = !areStatePropsEqual(nextStateProps, stateProps)\n    stateProps = nextStateProps\n\n    if (statePropsChanged)\n      mergedProps = mergeProps(stateProps, dispatchProps, ownProps)\n\n    return mergedProps\n  }\n\n  function handleSubsequentCalls(nextState: State, nextOwnProps: TOwnProps) {\n    const propsChanged = !areOwnPropsEqual(nextOwnProps, ownProps)\n    const stateChanged = !areStatesEqual(\n      nextState,\n      state,\n      nextOwnProps,\n      ownProps,\n    )\n    state = nextState\n    ownProps = nextOwnProps\n\n    if (propsChanged && stateChanged) return handleNewPropsAndNewState()\n    if (propsChanged) return handleNewProps()\n    if (stateChanged) return handleNewState()\n    return mergedProps\n  }\n\n  return function pureFinalPropsSelector(\n    nextState: State,\n    nextOwnProps: TOwnProps,\n  ) {\n    return hasRunAtLeastOnce\n      ? handleSubsequentCalls(nextState, nextOwnProps)\n      : handleFirstCall(nextState, nextOwnProps)\n  }\n}\n\ninterface WrappedMapStateToProps<TStateProps, TOwnProps, State> {\n  (state: State, ownProps: TOwnProps): TStateProps\n  readonly dependsOnOwnProps: boolean\n}\n\ninterface WrappedMapDispatchToProps<TDispatchProps, TOwnProps> {\n  (dispatch: Dispatch<Action<string>>, ownProps: TOwnProps): TDispatchProps\n  readonly dependsOnOwnProps: boolean\n}\n\nexport interface InitOptions<TStateProps, TOwnProps, TMergedProps, State>\n  extends PureSelectorFactoryComparisonOptions<TStateProps, TOwnProps, State> {\n  readonly shouldHandleStateChanges: boolean\n  readonly displayName: string\n  readonly wrappedComponentName: string\n  readonly WrappedComponent: ComponentType<TOwnProps>\n  readonly areMergedPropsEqual: EqualityFn<TMergedProps>\n}\n\nexport interface SelectorFactoryOptions<\n  TStateProps,\n  TOwnProps,\n  TDispatchProps,\n  TMergedProps,\n  State,\n> extends InitOptions<TStateProps, TOwnProps, TMergedProps, State> {\n  readonly initMapStateToProps: (\n    dispatch: Dispatch<Action<string>>,\n    options: InitOptions<TStateProps, TOwnProps, TMergedProps, State>,\n  ) => WrappedMapStateToProps<TStateProps, TOwnProps, State>\n  readonly initMapDispatchToProps: (\n    dispatch: Dispatch<Action<string>>,\n    options: InitOptions<TStateProps, TOwnProps, TMergedProps, State>,\n  ) => WrappedMapDispatchToProps<TDispatchProps, TOwnProps>\n  readonly initMergeProps: (\n    dispatch: Dispatch<Action<string>>,\n    options: InitOptions<TStateProps, TOwnProps, TMergedProps, State>,\n  ) => MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps>\n}\n\n// TODO: Add more comments\n\n// The selector returned by selectorFactory will memoize its results,\n// allowing connect's shouldComponentUpdate to return false if final\n// props have not changed.\n\nexport default function finalPropsSelectorFactory<\n  TStateProps,\n  TOwnProps,\n  TDispatchProps,\n  TMergedProps,\n  State,\n>(\n  dispatch: Dispatch<Action<string>>,\n  {\n    initMapStateToProps,\n    initMapDispatchToProps,\n    initMergeProps,\n    ...options\n  }: SelectorFactoryOptions<\n    TStateProps,\n    TOwnProps,\n    TDispatchProps,\n    TMergedProps,\n    State\n  >,\n) {\n  const mapStateToProps = initMapStateToProps(dispatch, options)\n  const mapDispatchToProps = initMapDispatchToProps(dispatch, options)\n  const mergeProps = initMergeProps(dispatch, options)\n\n  if (process.env.NODE_ENV !== 'production') {\n    verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps)\n  }\n\n  return pureFinalPropsSelectorFactory<\n    TStateProps,\n    TOwnProps,\n    TDispatchProps,\n    TMergedProps,\n    State\n  >(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, options)\n}\n", "import type { ActionCreatorsMapObject, Dispatch } from 'redux'\n\nexport default function bindActionCreators(\n  actionCreators: ActionCreatorsMapObject,\n  dispatch: Dispatch,\n): ActionCreatorsMapObject {\n  const boundActionCreators: ActionCreatorsMapObject = {}\n\n  for (const key in actionCreators) {\n    const actionCreator = actionCreators[key]\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = (...args) => dispatch(actionCreator(...args))\n    }\n  }\n  return boundActionCreators\n}\n", "/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nexport default function isPlainObject(obj: unknown) {\n  if (typeof obj !== 'object' || obj === null) return false\n\n  const proto = Object.getPrototypeOf(obj)\n  if (proto === null) return true\n\n  let baseProto = proto\n  while (Object.getPrototypeOf(baseProto) !== null) {\n    baseProto = Object.getPrototypeOf(baseProto)\n  }\n\n  return proto === baseProto\n}\n", "import isPlainObject from './isPlainObject'\nimport warning from './warning'\n\nexport default function verifyPlainObject(\n  value: unknown,\n  displayName: string,\n  methodName: string,\n) {\n  if (!isPlainObject(value)) {\n    warning(\n      `${methodName}() in ${displayName} must return a plain object. Instead received ${value}.`,\n    )\n  }\n}\n", "import type { ActionCreatorsMapObject, Dispatch, ActionCreator } from 'redux'\n\nimport type { FixTypeLater } from '../types'\nimport verifyPlainObject from '../utils/verifyPlainObject'\n\ntype AnyState = { [key: string]: any }\ntype StateOrDispatch<S extends AnyState = AnyState> = S | Dispatch\n\ntype AnyProps = { [key: string]: any }\n\nexport type MapToProps<P extends AnyProps = AnyProps> = {\n  // eslint-disable-next-line no-unused-vars\n  (stateOrDispatch: StateOrDispatch, ownProps?: P): FixTypeLater\n  dependsOnOwnProps?: boolean\n}\n\nexport function wrapMapToPropsConstant(\n  // * Note:\n  //  It seems that the dispatch argument\n  //  could be a dispatch function in some cases (ex: whenMapDispatchToPropsIsMissing)\n  //  and a state object in some others (ex: whenMapStateToPropsIsMissing)\n  // eslint-disable-next-line no-unused-vars\n  getConstant: (dispatch: Dispatch) =>\n    | {\n        dispatch?: Dispatch\n        dependsOnOwnProps?: boolean\n      }\n    | ActionCreatorsMapObject\n    | ActionCreator<any>,\n) {\n  return function initConstantSelector(dispatch: Dispatch) {\n    const constant = getConstant(dispatch)\n\n    function constantSelector() {\n      return constant\n    }\n    constantSelector.dependsOnOwnProps = false\n    return constantSelector\n  }\n}\n\n// dependsOnOwnProps is used by createMapToPropsProxy to determine whether to pass props as args\n// to the mapToProps function being wrapped. It is also used by makePurePropsSelector to determine\n// whether mapToProps needs to be invoked when props have changed.\n//\n// A length of one signals that mapToProps does not depend on props from the parent component.\n// A length of zero is assumed to mean mapToProps is getting args via arguments or ...args and\n// therefore not reporting its length accurately..\n// TODO Can this get pulled out so that we can subscribe directly to the store if we don't need ownProps?\nfunction getDependsOnOwnProps(mapToProps: MapToProps) {\n  return mapToProps.dependsOnOwnProps\n    ? Boolean(mapToProps.dependsOnOwnProps)\n    : mapToProps.length !== 1\n}\n\n// Used by whenMapStateToPropsIsFunction and whenMapDispatchToPropsIsFunction,\n// this function wraps mapToProps in a proxy function which does several things:\n//\n//  * Detects whether the mapToProps function being called depends on props, which\n//    is used by selectorFactory to decide if it should reinvoke on props changes.\n//\n//  * On first call, handles mapToProps if returns another function, and treats that\n//    new function as the true mapToProps for subsequent calls.\n//\n//  * On first call, verifies the first result is a plain object, in order to warn\n//    the developer that their mapToProps function is not returning a valid result.\n//\nexport function wrapMapToPropsFunc<P extends AnyProps = AnyProps>(\n  mapToProps: MapToProps,\n  methodName: string,\n) {\n  return function initProxySelector(\n    dispatch: Dispatch,\n    { displayName }: { displayName: string },\n  ) {\n    const proxy = function mapToPropsProxy(\n      stateOrDispatch: StateOrDispatch,\n      ownProps?: P,\n    ): MapToProps {\n      return proxy.dependsOnOwnProps\n        ? proxy.mapToProps(stateOrDispatch, ownProps)\n        : proxy.mapToProps(stateOrDispatch, undefined)\n    }\n\n    // allow detectFactoryAndVerify to get ownProps\n    proxy.dependsOnOwnProps = true\n\n    proxy.mapToProps = function detectFactoryAndVerify(\n      stateOrDispatch: StateOrDispatch,\n      ownProps?: P,\n    ): MapToProps {\n      proxy.mapToProps = mapToProps\n      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps)\n      let props = proxy(stateOrDispatch, ownProps)\n\n      if (typeof props === 'function') {\n        proxy.mapToProps = props\n        proxy.dependsOnOwnProps = getDependsOnOwnProps(props)\n        props = proxy(stateOrDispatch, ownProps)\n      }\n\n      if (process.env.NODE_ENV !== 'production')\n        verifyPlainObject(props, displayName, methodName)\n\n      return props\n    }\n\n    return proxy\n  }\n}\n", "import type { Action, Dispatch } from 'redux'\n\nexport function createInvalidArgFactory(arg: unknown, name: string) {\n  return (\n    dispatch: Dispatch<Action<string>>,\n    options: { readonly wrappedComponentName: string },\n  ) => {\n    throw new Error(\n      `Invalid value of type ${typeof arg} for ${name} argument when connecting component ${\n        options.wrappedComponentName\n      }.`,\n    )\n  }\n}\n", "import type { Action, Dispatch } from 'redux'\nimport bindActionCreators from '../utils/bindActionCreators'\nimport { wrapMapToPropsConstant, wrapMapToPropsFunc } from './wrapMapToProps'\nimport { createInvalidArgFactory } from './invalidArgFactory'\nimport type { MapDispatchToPropsParam } from './selectorFactory'\n\nexport function mapDispatchToPropsFactory<TDispatchProps, TOwnProps>(\n  mapDispatchToProps:\n    | MapDispatchToPropsParam<TDispatchProps, TOwnProps>\n    | undefined,\n) {\n  return mapDispatchToProps && typeof mapDispatchToProps === 'object'\n    ? wrapMapToPropsConstant((dispatch: Dispatch<Action<string>>) =>\n        // @ts-ignore\n        bindActionCreators(mapDispatchToProps, dispatch),\n      )\n    : !mapDispatchToProps\n      ? wrapMapToPropsConstant((dispatch: Dispatch<Action<string>>) => ({\n          dispatch,\n        }))\n      : typeof mapDispatchToProps === 'function'\n        ? // @ts-ignore\n          wrapMapToPropsFunc(mapDispatchToProps, 'mapDispatchToProps')\n        : createInvalidArgFactory(mapDispatchToProps, 'mapDispatchToProps')\n}\n", "import { wrapMapToPropsConstant, wrapMapToPropsFunc } from './wrapMapToProps'\nimport { createInvalidArgFactory } from './invalidArgFactory'\nimport type { MapStateToPropsParam } from './selectorFactory'\n\nexport function mapStateToPropsFactory<TStateProps, TOwnProps, State>(\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n) {\n  return !mapStateToProps\n    ? wrapMapToPropsConstant(() => ({}))\n    : typeof mapStateToProps === 'function'\n      ? // @ts-ignore\n        wrapMapToPropsFunc(mapStateToProps, 'mapStateToProps')\n      : createInvalidArgFactory(mapStateToProps, 'mapStateToProps')\n}\n", "import type { Action, Dispatch } from 'redux'\nimport verifyPlainObject from '../utils/verifyPlainObject'\nimport { createInvalidArgFactory } from './invalidArgFactory'\nimport type { MergeProps } from './selectorFactory'\nimport type { EqualityFn } from '../types'\n\nfunction defaultMergeProps<\n  TStateProps,\n  TDispatchProps,\n  TOwnProps,\n  TMergedProps,\n>(\n  stateProps: TStateProps,\n  dispatchProps: TDispatchProps,\n  ownProps: TOwnProps,\n): TMergedProps {\n  // @ts-ignore\n  return { ...ownProps, ...stateProps, ...dispatchProps }\n}\n\nfunction wrapMergePropsFunc<\n  TStateProps,\n  TDispatchProps,\n  TOwnProps,\n  TMergedProps,\n>(\n  mergeProps: MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps>,\n): (\n  dispatch: Dispatch<Action<string>>,\n  options: {\n    readonly displayName: string\n    readonly areMergedPropsEqual: EqualityFn<TMergedProps>\n  },\n) => MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps> {\n  return function initMergePropsProxy(\n    dispatch,\n    { displayName, areMergedPropsEqual },\n  ) {\n    let hasRunOnce = false\n    let mergedProps: TMergedProps\n\n    return function mergePropsProxy(\n      stateProps: TStateProps,\n      dispatchProps: TDispatchProps,\n      ownProps: TOwnProps,\n    ) {\n      const nextMergedProps = mergeProps(stateProps, dispatchProps, ownProps)\n\n      if (hasRunOnce) {\n        if (!areMergedPropsEqual(nextMergedProps, mergedProps))\n          mergedProps = nextMergedProps\n      } else {\n        hasRunOnce = true\n        mergedProps = nextMergedProps\n\n        if (process.env.NODE_ENV !== 'production')\n          verifyPlainObject(mergedProps, displayName, 'mergeProps')\n      }\n\n      return mergedProps\n    }\n  }\n}\n\nexport function mergePropsFactory<\n  TStateProps,\n  TDispatchProps,\n  TOwnProps,\n  TMergedProps,\n>(\n  mergeProps?: MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps>,\n) {\n  return !mergeProps\n    ? () => defaultMergeProps\n    : typeof mergeProps === 'function'\n      ? wrapMergePropsFunc(mergeProps)\n      : createInvalidArgFactory(mergeProps, 'mergeProps')\n}\n", "// Default to a dummy \"batch\" implementation that just runs the callback\r\nexport function defaultNoopBatch(callback: () => void) {\r\n  callback()\r\n}\r\n", "import { defaultNoopBatch as batch } from './batch'\n\n// encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\ntype VoidFunc = () => void\n\ntype Listener = {\n  callback: VoidFunc\n  next: Listener | null\n  prev: Listener | null\n}\n\nfunction createListenerCollection() {\n  let first: Listener | null = null\n  let last: Listener | null = null\n\n  return {\n    clear() {\n      first = null\n      last = null\n    },\n\n    notify() {\n      batch(() => {\n        let listener = first\n        while (listener) {\n          listener.callback()\n          listener = listener.next\n        }\n      })\n    },\n\n    get() {\n      const listeners: Listener[] = []\n      let listener = first\n      while (listener) {\n        listeners.push(listener)\n        listener = listener.next\n      }\n      return listeners\n    },\n\n    subscribe(callback: () => void) {\n      let isSubscribed = true\n\n      const listener: Listener = (last = {\n        callback,\n        next: null,\n        prev: last,\n      })\n\n      if (listener.prev) {\n        listener.prev.next = listener\n      } else {\n        first = listener\n      }\n\n      return function unsubscribe() {\n        if (!isSubscribed || first === null) return\n        isSubscribed = false\n\n        if (listener.next) {\n          listener.next.prev = listener.prev\n        } else {\n          last = listener.prev\n        }\n        if (listener.prev) {\n          listener.prev.next = listener.next\n        } else {\n          first = listener.next\n        }\n      }\n    },\n  }\n}\n\ntype ListenerCollection = ReturnType<typeof createListenerCollection>\n\nexport interface Subscription {\n  addNestedSub: (listener: VoidFunc) => VoidFunc\n  notifyNestedSubs: VoidFunc\n  handleChangeWrapper: VoidFunc\n  isSubscribed: () => boolean\n  onStateChange?: VoidFunc | null\n  trySubscribe: VoidFunc\n  tryUnsubscribe: VoidFunc\n  getListeners: () => ListenerCollection\n}\n\nconst nullListeners = {\n  notify() {},\n  get: () => [],\n} as unknown as ListenerCollection\n\nexport function createSubscription(store: any, parentSub?: Subscription) {\n  let unsubscribe: VoidFunc | undefined\n  let listeners: ListenerCollection = nullListeners\n\n  // Reasons to keep the subscription active\n  let subscriptionsAmount = 0\n\n  // Is this specific subscription subscribed (or only nested ones?)\n  let selfSubscribed = false\n\n  function addNestedSub(listener: () => void) {\n    trySubscribe()\n\n    const cleanupListener = listeners.subscribe(listener)\n\n    // cleanup nested sub\n    let removed = false\n    return () => {\n      if (!removed) {\n        removed = true\n        cleanupListener()\n        tryUnsubscribe()\n      }\n    }\n  }\n\n  function notifyNestedSubs() {\n    listeners.notify()\n  }\n\n  function handleChangeWrapper() {\n    if (subscription.onStateChange) {\n      subscription.onStateChange()\n    }\n  }\n\n  function isSubscribed() {\n    return selfSubscribed\n  }\n\n  function trySubscribe() {\n    subscriptionsAmount++\n    if (!unsubscribe) {\n      unsubscribe = parentSub\n        ? parentSub.addNestedSub(handleChangeWrapper)\n        : store.subscribe(handleChangeWrapper)\n\n      listeners = createListenerCollection()\n    }\n  }\n\n  function tryUnsubscribe() {\n    subscriptionsAmount--\n    if (unsubscribe && subscriptionsAmount === 0) {\n      unsubscribe()\n      unsubscribe = undefined\n      listeners.clear()\n      listeners = nullListeners\n    }\n  }\n\n  function trySubscribeSelf() {\n    if (!selfSubscribed) {\n      selfSubscribed = true\n      trySubscribe()\n    }\n  }\n\n  function tryUnsubscribeSelf() {\n    if (selfSubscribed) {\n      selfSubscribed = false\n      tryUnsubscribe()\n    }\n  }\n\n  const subscription: Subscription = {\n    addNestedSub,\n    notifyNestedSubs,\n    handleChangeWrapper,\n    isSubscribed,\n    trySubscribe: trySubscribeSelf,\n    tryUnsubscribe: tryUnsubscribeSelf,\n    getListeners: () => listeners,\n  }\n\n  return subscription\n}\n", "import { React } from '../utils/react'\n\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect to ensure the store\n// subscription callback always has the selector from the latest render commit\n// available, otherwise a store update may happen between render and the effect,\n// which may cause missed updates; we also must ensure the store subscription\n// is created synchronously, otherwise a store update may occur before the\n// subscription is created and an inconsistent state may be observed\n\n// Matches logic in React's `shared/ExecutionEnvironment` file\nconst canUseDOM = () =>\n  !!(\n    typeof window !== 'undefined' &&\n    typeof window.document !== 'undefined' &&\n    typeof window.document.createElement !== 'undefined'\n  )\n\nconst isDOM = /* @__PURE__ */ canUseDOM()\n\n// Under React Native, we know that we always want to use useLayoutEffect\n\n/**\n * Checks if the code is running in a React Native environment.\n *\n * @returns Whether the code is running in a React Native environment.\n *\n * @see {@link https://github.com/facebook/react-native/issues/1331 Reference}\n */\nconst isRunningInReactNative = () =>\n  typeof navigator !== 'undefined' && navigator.product === 'ReactNative'\n\nconst isReactNative = /* @__PURE__ */ isRunningInReactNative()\n\nconst getUseIsomorphicLayoutEffect = () =>\n  isDOM || isReactNative ? React.useLayoutEffect : React.useEffect\n\nexport const useIsomorphicLayoutEffect =\n  /* @__PURE__ */ getUseIsomorphicLayoutEffect()\n", "function is(x: unknown, y: unknown) {\r\n  if (x === y) {\r\n    return x !== 0 || y !== 0 || 1 / x === 1 / y\r\n  } else {\r\n    return x !== x && y !== y\r\n  }\r\n}\r\n\r\nexport default function shallowEqual(objA: any, objB: any) {\r\n  if (is(objA, objB)) return true\r\n\r\n  if (\r\n    typeof objA !== 'object' ||\r\n    objA === null ||\r\n    typeof objB !== 'object' ||\r\n    objB === null\r\n  ) {\r\n    return false\r\n  }\r\n\r\n  const keysA = Object.keys(objA)\r\n  const keysB = Object.keys(objB)\r\n\r\n  if (keysA.length !== keysB.length) return false\r\n\r\n  for (let i = 0; i < keysA.length; i++) {\r\n    if (\r\n      !Object.prototype.hasOwnProperty.call(objB, keysA[i]) ||\r\n      !is(objA[keysA[i]], objB[keysA[i]])\r\n    ) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return true\r\n}\r\n", "// Copied directly from:\n// https://github.com/mridgway/hoist-non-react-statics/blob/main/src/index.js\n// https://unpkg.com/browse/@types/hoist-non-react-statics@3.3.6/index.d.ts\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nimport type { ForwardRefExoticComponent, MemoExoticComponent } from 'react'\nimport { ForwardRef, Memo, isMemo } from '../utils/react-is'\n\nconst REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true,\n} as const\n\nconst KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true,\n} as const\n\nconst FORWARD_REF_STATICS = {\n  $$typeof: true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n} as const\n\nconst MEMO_STATICS = {\n  $$typeof: true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true,\n} as const\n\nconst TYPE_STATICS = {\n  [ForwardRef]: FORWARD_REF_STATICS,\n  [Memo]: MEMO_STATICS,\n} as const\n\nfunction getStatics(component: any) {\n  // React v16.11 and below\n  if (isMemo(component)) {\n    return MEMO_STATICS\n  }\n\n  // React v16.12 and above\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS\n}\n\nexport type NonReactStatics<\n  Source,\n  C extends {\n    [key: string]: true\n  } = {},\n> = {\n  [key in Exclude<\n    keyof Source,\n    Source extends MemoExoticComponent<any>\n      ? keyof typeof MEMO_STATICS | keyof C\n      : Source extends ForwardRefExoticComponent<any>\n        ? keyof typeof FORWARD_REF_STATICS | keyof C\n        : keyof typeof REACT_STATICS | keyof typeof KNOWN_STATICS | keyof C\n  >]: Source[key]\n}\n\nconst defineProperty = Object.defineProperty\nconst getOwnPropertyNames = Object.getOwnPropertyNames\nconst getOwnPropertySymbols = Object.getOwnPropertySymbols\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor\nconst getPrototypeOf = Object.getPrototypeOf\nconst objectPrototype = Object.prototype\n\nexport default function hoistNonReactStatics<\n  Target,\n  Source,\n  CustomStatic extends {\n    [key: string]: true\n  } = {},\n>(\n  targetComponent: Target,\n  sourceComponent: Source,\n): Target & NonReactStatics<Source, CustomStatic> {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n\n    if (objectPrototype) {\n      const inheritedComponent = getPrototypeOf(sourceComponent)\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent)\n      }\n    }\n\n    let keys: (string | symbol)[] = getOwnPropertyNames(sourceComponent)\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent))\n    }\n\n    const targetStatics = getStatics(targetComponent)\n    const sourceStatics = getStatics(sourceComponent)\n\n    for (let i = 0; i < keys.length; ++i) {\n      const key = keys[i]\n      if (\n        !KNOWN_STATICS[key as keyof typeof KNOWN_STATICS] &&\n        !(sourceStatics && sourceStatics[key as keyof typeof sourceStatics]) &&\n        !(targetStatics && targetStatics[key as keyof typeof targetStatics])\n      ) {\n        const descriptor = getOwnPropertyDescriptor(sourceComponent, key)\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor!)\n        } catch (e) {\n          // ignore\n        }\n      }\n    }\n  }\n\n  return targetComponent as any\n}\n", "import type { Context } from 'react'\nimport { React } from '../utils/react'\nimport type { Action, Store, UnknownAction } from 'redux'\nimport type { Subscription } from '../utils/Subscription'\nimport type { ProviderProps } from './Provider'\n\nexport interface ReactReduxContextValue<\n  SS = any,\n  A extends Action<string> = UnknownAction,\n> extends Pick<ProviderProps, 'stabilityCheck' | 'identityFunctionCheck'> {\n  store: Store<SS, A>\n  subscription: Subscription\n  getServerState?: () => SS\n}\n\nconst ContextKey = /* @__PURE__ */ Symbol.for(`react-redux-context`)\nconst gT: {\n  [ContextKey]?: Map<\n    typeof React.createContext,\n    Context<ReactReduxContextValue | null>\n  >\n} = (\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : /* fall back to a per-module scope (pre-8.1 behaviour) if `globalThis` is not available */ {}\n) as any\n\nfunction getContext(): Context<ReactReduxContextValue | null> {\n  if (!React.createContext) return {} as any\n\n  const contextMap = (gT[ContextKey] ??= new Map<\n    typeof React.createContext,\n    Context<ReactReduxContextValue | null>\n  >())\n  let realContext = contextMap.get(React.createContext)\n  if (!realContext) {\n    realContext = React.createContext<ReactReduxContextValue | null>(\n      null as any,\n    )\n    if (process.env.NODE_ENV !== 'production') {\n      realContext.displayName = 'ReactRedux'\n    }\n    contextMap.set(React.createContext, realContext)\n  }\n  return realContext\n}\n\nexport const ReactReduxContext = /*#__PURE__*/ getContext()\n\nexport type ReactReduxContextInstance = typeof ReactReduxContext\n", "/* eslint-disable valid-jsdoc, @typescript-eslint/no-unused-vars */\nimport type { ComponentType } from 'react'\nimport { React } from '../utils/react'\nimport { isValidElementType, isContextConsumer } from '../utils/react-is'\n\nimport type { Store } from 'redux'\n\nimport type {\n  ConnectedComponent,\n  InferableComponentEnhancer,\n  InferableComponentEnhancerWithProps,\n  ResolveThunks,\n  DispatchProp,\n  ConnectPropsMaybeWithoutContext,\n} from '../types'\n\nimport type {\n  MapStateToPropsParam,\n  MapDispatchToPropsParam,\n  MergeProps,\n  MapDispatchToPropsNonObject,\n  SelectorFactoryOptions,\n} from '../connect/selectorFactory'\nimport defaultSelectorFactory from '../connect/selectorFactory'\nimport { mapDispatchToPropsFactory } from '../connect/mapDispatchToProps'\nimport { mapStateToPropsFactory } from '../connect/mapStateToProps'\nimport { mergePropsFactory } from '../connect/mergeProps'\n\nimport type { Subscription } from '../utils/Subscription'\nimport { createSubscription } from '../utils/Subscription'\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect'\nimport shallowEqual from '../utils/shallowEqual'\nimport hoistStatics from '../utils/hoistStatics'\nimport warning from '../utils/warning'\n\nimport type {\n  ReactReduxContextValue,\n  ReactReduxContextInstance,\n} from './Context'\nimport { ReactReduxContext } from './Context'\n\n// Define some constant arrays just to avoid re-creating these\nconst EMPTY_ARRAY: [unknown, number] = [null, 0]\nconst NO_SUBSCRIPTION_ARRAY = [null, null]\n\n// Attempts to stringify whatever not-really-a-component value we were given\n// for logging in an error message\nconst stringifyComponent = (Comp: unknown) => {\n  try {\n    return JSON.stringify(Comp)\n  } catch (err) {\n    return String(Comp)\n  }\n}\n\ntype EffectFunc = (...args: any[]) => void | ReturnType<React.EffectCallback>\n\n// This is \"just\" a `useLayoutEffect`, but with two modifications:\n// - we need to fall back to `useEffect` in SSR to avoid annoying warnings\n// - we extract this to a separate function to avoid closing over values\n//   and causing memory leaks\nfunction useIsomorphicLayoutEffectWithArgs(\n  effectFunc: EffectFunc,\n  effectArgs: any[],\n  dependencies?: React.DependencyList,\n) {\n  useIsomorphicLayoutEffect(() => effectFunc(...effectArgs), dependencies)\n}\n\n// Effect callback, extracted: assign the latest props values to refs for later usage\nfunction captureWrapperProps(\n  lastWrapperProps: React.MutableRefObject<unknown>,\n  lastChildProps: React.MutableRefObject<unknown>,\n  renderIsScheduled: React.MutableRefObject<boolean>,\n  wrapperProps: unknown,\n  // actualChildProps: unknown,\n  childPropsFromStoreUpdate: React.MutableRefObject<unknown>,\n  notifyNestedSubs: () => void,\n) {\n  // We want to capture the wrapper props and child props we used for later comparisons\n  lastWrapperProps.current = wrapperProps\n  renderIsScheduled.current = false\n\n  // If the render was from a store update, clear out that reference and cascade the subscriber update\n  if (childPropsFromStoreUpdate.current) {\n    childPropsFromStoreUpdate.current = null\n    notifyNestedSubs()\n  }\n}\n\n// Effect callback, extracted: subscribe to the Redux store or nearest connected ancestor,\n// check for updates after dispatched actions, and trigger re-renders.\nfunction subscribeUpdates(\n  shouldHandleStateChanges: boolean,\n  store: Store,\n  subscription: Subscription,\n  childPropsSelector: (state: unknown, props: unknown) => unknown,\n  lastWrapperProps: React.MutableRefObject<unknown>,\n  lastChildProps: React.MutableRefObject<unknown>,\n  renderIsScheduled: React.MutableRefObject<boolean>,\n  isMounted: React.MutableRefObject<boolean>,\n  childPropsFromStoreUpdate: React.MutableRefObject<unknown>,\n  notifyNestedSubs: () => void,\n  // forceComponentUpdateDispatch: React.Dispatch<any>,\n  additionalSubscribeListener: () => void,\n) {\n  // If we're not subscribed to the store, nothing to do here\n  if (!shouldHandleStateChanges) return () => {}\n\n  // Capture values for checking if and when this component unmounts\n  let didUnsubscribe = false\n  let lastThrownError: Error | null = null\n\n  // We'll run this callback every time a store subscription update propagates to this component\n  const checkForUpdates = () => {\n    if (didUnsubscribe || !isMounted.current) {\n      // Don't run stale listeners.\n      // Redux doesn't guarantee unsubscriptions happen until next dispatch.\n      return\n    }\n\n    // TODO We're currently calling getState ourselves here, rather than letting `uSES` do it\n    const latestStoreState = store.getState()\n\n    let newChildProps, error\n    try {\n      // Actually run the selector with the most recent store state and wrapper props\n      // to determine what the child props should be\n      newChildProps = childPropsSelector(\n        latestStoreState,\n        lastWrapperProps.current,\n      )\n    } catch (e) {\n      error = e\n      lastThrownError = e as Error | null\n    }\n\n    if (!error) {\n      lastThrownError = null\n    }\n\n    // If the child props haven't changed, nothing to do here - cascade the subscription update\n    if (newChildProps === lastChildProps.current) {\n      if (!renderIsScheduled.current) {\n        notifyNestedSubs()\n      }\n    } else {\n      // Save references to the new child props.  Note that we track the \"child props from store update\"\n      // as a ref instead of a useState/useReducer because we need a way to determine if that value has\n      // been processed.  If this went into useState/useReducer, we couldn't clear out the value without\n      // forcing another re-render, which we don't want.\n      lastChildProps.current = newChildProps\n      childPropsFromStoreUpdate.current = newChildProps\n      renderIsScheduled.current = true\n\n      // TODO This is hacky and not how `uSES` is meant to be used\n      // Trigger the React `useSyncExternalStore` subscriber\n      additionalSubscribeListener()\n    }\n  }\n\n  // Actually subscribe to the nearest connected ancestor (or store)\n  subscription.onStateChange = checkForUpdates\n  subscription.trySubscribe()\n\n  // Pull data from the store after first render in case the store has\n  // changed since we began.\n  checkForUpdates()\n\n  const unsubscribeWrapper = () => {\n    didUnsubscribe = true\n    subscription.tryUnsubscribe()\n    subscription.onStateChange = null\n\n    if (lastThrownError) {\n      // It's possible that we caught an error due to a bad mapState function, but the\n      // parent re-rendered without this component and we're about to unmount.\n      // This shouldn't happen as long as we do top-down subscriptions correctly, but\n      // if we ever do those wrong, this throw will surface the error in our tests.\n      // In that case, throw the error from here so it doesn't get lost.\n      throw lastThrownError\n    }\n  }\n\n  return unsubscribeWrapper\n}\n\n// Reducer initial state creation for our update reducer\nconst initStateUpdates = () => EMPTY_ARRAY\n\nexport interface ConnectProps {\n  /** A custom Context instance that the component can use to access the store from an alternate Provider using that same Context instance */\n  context?: ReactReduxContextInstance\n  /** A Redux store instance to be used for subscriptions instead of the store from a Provider */\n  store?: Store\n}\n\ninterface InternalConnectProps extends ConnectProps {\n  reactReduxForwardedRef?: React.ForwardedRef<unknown>\n}\n\nfunction strictEqual(a: unknown, b: unknown) {\n  return a === b\n}\n\n/**\n * Infers the type of props that a connector will inject into a component.\n */\nexport type ConnectedProps<TConnector> =\n  TConnector extends InferableComponentEnhancerWithProps<\n    infer TInjectedProps,\n    any\n  >\n    ? unknown extends TInjectedProps\n      ? TConnector extends InferableComponentEnhancer<infer TInjectedProps>\n        ? TInjectedProps\n        : never\n      : TInjectedProps\n    : never\n\nexport interface ConnectOptions<\n  State = unknown,\n  TStateProps = {},\n  TOwnProps = {},\n  TMergedProps = {},\n> {\n  forwardRef?: boolean\n  context?: typeof ReactReduxContext\n  areStatesEqual?: (\n    nextState: State,\n    prevState: State,\n    nextOwnProps: TOwnProps,\n    prevOwnProps: TOwnProps,\n  ) => boolean\n\n  areOwnPropsEqual?: (\n    nextOwnProps: TOwnProps,\n    prevOwnProps: TOwnProps,\n  ) => boolean\n\n  areStatePropsEqual?: (\n    nextStateProps: TStateProps,\n    prevStateProps: TStateProps,\n  ) => boolean\n  areMergedPropsEqual?: (\n    nextMergedProps: TMergedProps,\n    prevMergedProps: TMergedProps,\n  ) => boolean\n}\n\n/**\n * Connects a React component to a Redux store.\n *\n * - Without arguments, just wraps the component, without changing the behavior / props\n *\n * - If 2 params are passed (3rd param, mergeProps, is skipped), default behavior\n * is to override ownProps (as stated in the docs), so what remains is everything that's\n * not a state or dispatch prop\n *\n * - When 3rd param is passed, we don't know if ownProps propagate and whether they\n * should be valid component props, because it depends on mergeProps implementation.\n * As such, it is the user's responsibility to extend ownProps interface from state or\n * dispatch props or both when applicable\n *\n * @param mapStateToProps\n * @param mapDispatchToProps\n * @param mergeProps\n * @param options\n */\nexport interface Connect<DefaultState = unknown> {\n  // tslint:disable:no-unnecessary-generics\n  (): InferableComponentEnhancer<DispatchProp>\n\n  /** mapState only */\n  <TStateProps = {}, no_dispatch = {}, TOwnProps = {}, State = DefaultState>(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n  ): InferableComponentEnhancerWithProps<TStateProps & DispatchProp, TOwnProps>\n\n  /** mapDispatch only (as a function) */\n  <no_state = {}, TDispatchProps = {}, TOwnProps = {}>(\n    mapStateToProps: null | undefined,\n    mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<TDispatchProps, TOwnProps>\n\n  /** mapDispatch only (as an object) */\n  <no_state = {}, TDispatchProps = {}, TOwnProps = {}>(\n    mapStateToProps: null | undefined,\n    mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<\n    ResolveThunks<TDispatchProps>,\n    TOwnProps\n  >\n\n  /** mapState and mapDispatch (as a function)*/\n  <TStateProps = {}, TDispatchProps = {}, TOwnProps = {}, State = DefaultState>(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<\n    TStateProps & TDispatchProps,\n    TOwnProps\n  >\n\n  /** mapState and mapDispatch (nullish) */\n  <TStateProps = {}, TDispatchProps = {}, TOwnProps = {}, State = DefaultState>(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: null | undefined,\n  ): InferableComponentEnhancerWithProps<TStateProps, TOwnProps>\n\n  /** mapState and mapDispatch (as an object) */\n  <TStateProps = {}, TDispatchProps = {}, TOwnProps = {}, State = DefaultState>(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<\n    TStateProps & ResolveThunks<TDispatchProps>,\n    TOwnProps\n  >\n\n  /** mergeProps only */\n  <no_state = {}, no_dispatch = {}, TOwnProps = {}, TMergedProps = {}>(\n    mapStateToProps: null | undefined,\n    mapDispatchToProps: null | undefined,\n    mergeProps: MergeProps<undefined, DispatchProp, TOwnProps, TMergedProps>,\n  ): InferableComponentEnhancerWithProps<TMergedProps, TOwnProps>\n\n  /** mapState and mergeProps */\n  <\n    TStateProps = {},\n    no_dispatch = {},\n    TOwnProps = {},\n    TMergedProps = {},\n    State = DefaultState,\n  >(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: null | undefined,\n    mergeProps: MergeProps<TStateProps, DispatchProp, TOwnProps, TMergedProps>,\n  ): InferableComponentEnhancerWithProps<TMergedProps, TOwnProps>\n\n  /** mapDispatch (as a object) and mergeProps */\n  <no_state = {}, TDispatchProps = {}, TOwnProps = {}, TMergedProps = {}>(\n    mapStateToProps: null | undefined,\n    mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\n    mergeProps: MergeProps<undefined, TDispatchProps, TOwnProps, TMergedProps>,\n  ): InferableComponentEnhancerWithProps<TMergedProps, TOwnProps>\n\n  /** mapState and options */\n  <TStateProps = {}, no_dispatch = {}, TOwnProps = {}, State = DefaultState>(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: null | undefined,\n    mergeProps: null | undefined,\n    options: ConnectOptions<State, TStateProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<DispatchProp & TStateProps, TOwnProps>\n\n  /** mapDispatch (as a function) and options */\n  <TStateProps = {}, TDispatchProps = {}, TOwnProps = {}>(\n    mapStateToProps: null | undefined,\n    mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>,\n    mergeProps: null | undefined,\n    options: ConnectOptions<{}, TStateProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<TDispatchProps, TOwnProps>\n\n  /** mapDispatch (as an object) and options*/\n  <TStateProps = {}, TDispatchProps = {}, TOwnProps = {}>(\n    mapStateToProps: null | undefined,\n    mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\n    mergeProps: null | undefined,\n    options: ConnectOptions<{}, TStateProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<\n    ResolveThunks<TDispatchProps>,\n    TOwnProps\n  >\n\n  /** mapState,  mapDispatch (as a function), and options */\n  <TStateProps = {}, TDispatchProps = {}, TOwnProps = {}, State = DefaultState>(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>,\n    mergeProps: null | undefined,\n    options: ConnectOptions<State, TStateProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<\n    TStateProps & TDispatchProps,\n    TOwnProps\n  >\n\n  /** mapState,  mapDispatch (as an object), and options */\n  <TStateProps = {}, TDispatchProps = {}, TOwnProps = {}, State = DefaultState>(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\n    mergeProps: null | undefined,\n    options: ConnectOptions<State, TStateProps, TOwnProps>,\n  ): InferableComponentEnhancerWithProps<\n    TStateProps & ResolveThunks<TDispatchProps>,\n    TOwnProps\n  >\n\n  /** mapState, mapDispatch, mergeProps, and options */\n  <\n    TStateProps = {},\n    TDispatchProps = {},\n    TOwnProps = {},\n    TMergedProps = {},\n    State = DefaultState,\n  >(\n    mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n    mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\n    mergeProps: MergeProps<\n      TStateProps,\n      TDispatchProps,\n      TOwnProps,\n      TMergedProps\n    >,\n    options?: ConnectOptions<State, TStateProps, TOwnProps, TMergedProps>,\n  ): InferableComponentEnhancerWithProps<TMergedProps, TOwnProps>\n  // tslint:enable:no-unnecessary-generics\n}\n\nlet hasWarnedAboutDeprecatedPureOption = false\n\n/**\n * Connects a React component to a Redux store.\n *\n * - Without arguments, just wraps the component, without changing the behavior / props\n *\n * - If 2 params are passed (3rd param, mergeProps, is skipped), default behavior\n * is to override ownProps (as stated in the docs), so what remains is everything that's\n * not a state or dispatch prop\n *\n * - When 3rd param is passed, we don't know if ownProps propagate and whether they\n * should be valid component props, because it depends on mergeProps implementation.\n * As such, it is the user's responsibility to extend ownProps interface from state or\n * dispatch props or both when applicable\n *\n * @param mapStateToProps A function that extracts values from state\n * @param mapDispatchToProps Setup for dispatching actions\n * @param mergeProps Optional callback to merge state and dispatch props together\n * @param options Options for configuring the connection\n *\n */\nfunction connect<\n  TStateProps = {},\n  TDispatchProps = {},\n  TOwnProps = {},\n  TMergedProps = {},\n  State = unknown,\n>(\n  mapStateToProps?: MapStateToPropsParam<TStateProps, TOwnProps, State>,\n  mapDispatchToProps?: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\n  mergeProps?: MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps>,\n  {\n    // The `pure` option has been removed, so TS doesn't like us destructuring this to check its existence.\n    // @ts-ignore\n    pure,\n    areStatesEqual = strictEqual,\n    areOwnPropsEqual = shallowEqual,\n    areStatePropsEqual = shallowEqual,\n    areMergedPropsEqual = shallowEqual,\n\n    // use React's forwardRef to expose a ref of the wrapped component\n    forwardRef = false,\n\n    // the context consumer to use\n    context = ReactReduxContext,\n  }: ConnectOptions<unknown, unknown, unknown, unknown> = {},\n): unknown {\n  if (process.env.NODE_ENV !== 'production') {\n    if (pure !== undefined && !hasWarnedAboutDeprecatedPureOption) {\n      hasWarnedAboutDeprecatedPureOption = true\n      warning(\n        'The `pure` option has been removed. `connect` is now always a \"pure/memoized\" component',\n      )\n    }\n  }\n\n  const Context = context\n\n  const initMapStateToProps = mapStateToPropsFactory(mapStateToProps)\n  const initMapDispatchToProps = mapDispatchToPropsFactory(mapDispatchToProps)\n  const initMergeProps = mergePropsFactory(mergeProps)\n\n  const shouldHandleStateChanges = Boolean(mapStateToProps)\n\n  const wrapWithConnect = <TProps,>(\n    WrappedComponent: ComponentType<TProps>,\n  ) => {\n    type WrappedComponentProps = TProps &\n      ConnectPropsMaybeWithoutContext<TProps>\n\n    if (process.env.NODE_ENV !== 'production') {\n      const isValid = /*#__PURE__*/ isValidElementType(WrappedComponent)\n      if (!isValid)\n        throw new Error(\n          `You must pass a component to the function returned by connect. Instead received ${stringifyComponent(\n            WrappedComponent,\n          )}`,\n        )\n    }\n\n    const wrappedComponentName =\n      WrappedComponent.displayName || WrappedComponent.name || 'Component'\n\n    const displayName = `Connect(${wrappedComponentName})`\n\n    const selectorFactoryOptions: SelectorFactoryOptions<\n      any,\n      any,\n      any,\n      any,\n      State\n    > = {\n      shouldHandleStateChanges,\n      displayName,\n      wrappedComponentName,\n      WrappedComponent,\n      // @ts-ignore\n      initMapStateToProps,\n      initMapDispatchToProps,\n      initMergeProps,\n      areStatesEqual,\n      areStatePropsEqual,\n      areOwnPropsEqual,\n      areMergedPropsEqual,\n    }\n\n    function ConnectFunction<TOwnProps>(\n      props: InternalConnectProps & TOwnProps,\n    ) {\n      const [propsContext, reactReduxForwardedRef, wrapperProps] =\n        React.useMemo(() => {\n          // Distinguish between actual \"data\" props that were passed to the wrapper component,\n          // and values needed to control behavior (forwarded refs, alternate context instances).\n          // To maintain the wrapperProps object reference, memoize this destructuring.\n          const { reactReduxForwardedRef, ...wrapperProps } = props\n          return [props.context, reactReduxForwardedRef, wrapperProps]\n        }, [props])\n\n      const ContextToUse: ReactReduxContextInstance = React.useMemo(() => {\n        // Users may optionally pass in a custom context instance to use instead of our ReactReduxContext.\n        // Memoize the check that determines which context instance we should use.\n        let ResultContext = Context\n        if (propsContext?.Consumer) {\n          if (process.env.NODE_ENV !== 'production') {\n            const isValid = /*#__PURE__*/ isContextConsumer(\n              // @ts-ignore\n              <propsContext.Consumer />,\n            )\n            if (!isValid) {\n              throw new Error(\n                'You must pass a valid React context consumer as `props.context`',\n              )\n            }\n            ResultContext = propsContext\n          }\n        }\n        return ResultContext\n      }, [propsContext, Context])\n\n      // Retrieve the store and ancestor subscription via context, if available\n      const contextValue = React.useContext(ContextToUse)\n\n      // The store _must_ exist as either a prop or in context.\n      // We'll check to see if it _looks_ like a Redux store first.\n      // This allows us to pass through a `store` prop that is just a plain value.\n      const didStoreComeFromProps =\n        Boolean(props.store) &&\n        Boolean(props.store!.getState) &&\n        Boolean(props.store!.dispatch)\n      const didStoreComeFromContext =\n        Boolean(contextValue) && Boolean(contextValue!.store)\n\n      if (\n        process.env.NODE_ENV !== 'production' &&\n        !didStoreComeFromProps &&\n        !didStoreComeFromContext\n      ) {\n        throw new Error(\n          `Could not find \"store\" in the context of ` +\n            `\"${displayName}\". Either wrap the root component in a <Provider>, ` +\n            `or pass a custom React context provider to <Provider> and the corresponding ` +\n            `React context consumer to ${displayName} in connect options.`,\n        )\n      }\n\n      // Based on the previous check, one of these must be true\n      const store: Store = didStoreComeFromProps\n        ? props.store!\n        : contextValue!.store\n\n      const getServerState = didStoreComeFromContext\n        ? contextValue!.getServerState\n        : store.getState\n\n      const childPropsSelector = React.useMemo(() => {\n        // The child props selector needs the store reference as an input.\n        // Re-create this selector whenever the store changes.\n        return defaultSelectorFactory(store.dispatch, selectorFactoryOptions)\n      }, [store])\n\n      const [subscription, notifyNestedSubs] = React.useMemo(() => {\n        if (!shouldHandleStateChanges) return NO_SUBSCRIPTION_ARRAY\n\n        // This Subscription's source should match where store came from: props vs. context. A component\n        // connected to the store via props shouldn't use subscription from context, or vice versa.\n        const subscription = createSubscription(\n          store,\n          didStoreComeFromProps ? undefined : contextValue!.subscription,\n        )\n\n        // `notifyNestedSubs` is duplicated to handle the case where the component is unmounted in\n        // the middle of the notification loop, where `subscription` will then be null. This can\n        // probably be avoided if Subscription's listeners logic is changed to not call listeners\n        // that have been unsubscribed in the  middle of the notification loop.\n        const notifyNestedSubs =\n          subscription.notifyNestedSubs.bind(subscription)\n\n        return [subscription, notifyNestedSubs]\n      }, [store, didStoreComeFromProps, contextValue])\n\n      // Determine what {store, subscription} value should be put into nested context, if necessary,\n      // and memoize that value to avoid unnecessary context updates.\n      const overriddenContextValue = React.useMemo(() => {\n        if (didStoreComeFromProps) {\n          // This component is directly subscribed to a store from props.\n          // We don't want descendants reading from this store - pass down whatever\n          // the existing context value is from the nearest connected ancestor.\n          return contextValue!\n        }\n\n        // Otherwise, put this component's subscription instance into context, so that\n        // connected descendants won't update until after this component is done\n        return {\n          ...contextValue,\n          subscription,\n        } as ReactReduxContextValue\n      }, [didStoreComeFromProps, contextValue, subscription])\n\n      // Set up refs to coordinate values between the subscription effect and the render logic\n      const lastChildProps = React.useRef<unknown>(undefined)\n      const lastWrapperProps = React.useRef(wrapperProps)\n      const childPropsFromStoreUpdate = React.useRef<unknown>(undefined)\n      const renderIsScheduled = React.useRef(false)\n      const isMounted = React.useRef(false)\n\n      // TODO: Change this to `React.useRef<Error>(undefined)` after upgrading to React 19.\n      /**\n       * @todo Change this to `React.useRef<Error>(undefined)` after upgrading to React 19.\n       */\n      const latestSubscriptionCallbackError = React.useRef<Error | undefined>(\n        undefined,\n      )\n\n      useIsomorphicLayoutEffect(() => {\n        isMounted.current = true\n        return () => {\n          isMounted.current = false\n        }\n      }, [])\n\n      const actualChildPropsSelector = React.useMemo(() => {\n        const selector = () => {\n          // Tricky logic here:\n          // - This render may have been triggered by a Redux store update that produced new child props\n          // - However, we may have gotten new wrapper props after that\n          // If we have new child props, and the same wrapper props, we know we should use the new child props as-is.\n          // But, if we have new wrapper props, those might change the child props, so we have to recalculate things.\n          // So, we'll use the child props from store update only if the wrapper props are the same as last time.\n          if (\n            childPropsFromStoreUpdate.current &&\n            wrapperProps === lastWrapperProps.current\n          ) {\n            return childPropsFromStoreUpdate.current\n          }\n\n          // TODO We're reading the store directly in render() here. Bad idea?\n          // This will likely cause Bad Things (TM) to happen in Concurrent Mode.\n          // Note that we do this because on renders _not_ caused by store updates, we need the latest store state\n          // to determine what the child props should be.\n          return childPropsSelector(store.getState(), wrapperProps)\n        }\n        return selector\n      }, [store, wrapperProps])\n\n      // We need this to execute synchronously every time we re-render. However, React warns\n      // about useLayoutEffect in SSR, so we try to detect environment and fall back to\n      // just useEffect instead to avoid the warning, since neither will run anyway.\n\n      const subscribeForReact = React.useMemo(() => {\n        const subscribe = (reactListener: () => void) => {\n          if (!subscription) {\n            return () => {}\n          }\n\n          return subscribeUpdates(\n            shouldHandleStateChanges,\n            store,\n            subscription,\n            // @ts-ignore\n            childPropsSelector,\n            lastWrapperProps,\n            lastChildProps,\n            renderIsScheduled,\n            isMounted,\n            childPropsFromStoreUpdate,\n            notifyNestedSubs,\n            reactListener,\n          )\n        }\n\n        return subscribe\n      }, [subscription])\n\n      useIsomorphicLayoutEffectWithArgs(captureWrapperProps, [\n        lastWrapperProps,\n        lastChildProps,\n        renderIsScheduled,\n        wrapperProps,\n        childPropsFromStoreUpdate,\n        notifyNestedSubs,\n      ])\n\n      let actualChildProps: Record<string, unknown>\n\n      try {\n        actualChildProps = React.useSyncExternalStore(\n          // TODO We're passing through a big wrapper that does a bunch of extra side effects besides subscribing\n          subscribeForReact,\n          // TODO This is incredibly hacky. We've already processed the store update and calculated new child props,\n          // TODO and we're just passing that through so it triggers a re-render for us rather than relying on `uSES`.\n          actualChildPropsSelector,\n          getServerState\n            ? () => childPropsSelector(getServerState(), wrapperProps)\n            : actualChildPropsSelector,\n        )\n      } catch (err) {\n        if (latestSubscriptionCallbackError.current) {\n          // eslint-disable-next-line no-extra-semi\n          ;(err as Error).message +=\n            `\\nThe error may be correlated with this previous error:\\n${latestSubscriptionCallbackError.current.stack}\\n\\n`\n        }\n\n        throw err\n      }\n\n      useIsomorphicLayoutEffect(() => {\n        latestSubscriptionCallbackError.current = undefined\n        childPropsFromStoreUpdate.current = undefined\n        lastChildProps.current = actualChildProps\n      })\n\n      // Now that all that's done, we can finally try to actually render the child component.\n      // We memoize the elements for the rendered child component as an optimization.\n      const renderedWrappedComponent = React.useMemo(() => {\n        return (\n          // @ts-ignore\n          <WrappedComponent\n            {...actualChildProps}\n            ref={reactReduxForwardedRef}\n          />\n        )\n      }, [reactReduxForwardedRef, WrappedComponent, actualChildProps])\n\n      // If React sees the exact same element reference as last time, it bails out of re-rendering\n      // that child, same as if it was wrapped in React.memo() or returned false from shouldComponentUpdate.\n      const renderedChild = React.useMemo(() => {\n        if (shouldHandleStateChanges) {\n          // If this component is subscribed to store updates, we need to pass its own\n          // subscription instance down to our descendants. That means rendering the same\n          // Context instance, and putting a different value into the context.\n          return (\n            <ContextToUse.Provider value={overriddenContextValue}>\n              {renderedWrappedComponent}\n            </ContextToUse.Provider>\n          )\n        }\n\n        return renderedWrappedComponent\n      }, [ContextToUse, renderedWrappedComponent, overriddenContextValue])\n\n      return renderedChild\n    }\n\n    const _Connect = React.memo(ConnectFunction)\n\n    type ConnectedWrapperComponent = typeof _Connect & {\n      WrappedComponent: typeof WrappedComponent\n    }\n\n    // Add a hacky cast to get the right output type\n    const Connect = _Connect as unknown as ConnectedComponent<\n      typeof WrappedComponent,\n      WrappedComponentProps\n    >\n    Connect.WrappedComponent = WrappedComponent\n    Connect.displayName = ConnectFunction.displayName = displayName\n\n    if (forwardRef) {\n      const _forwarded = React.forwardRef(\n        function forwardConnectRef(props, ref) {\n          // @ts-ignore\n          return <Connect {...props} reactReduxForwardedRef={ref} />\n        },\n      )\n\n      const forwarded = _forwarded as ConnectedWrapperComponent\n      forwarded.displayName = displayName\n      forwarded.WrappedComponent = WrappedComponent\n      return /*#__PURE__*/ hoistStatics(forwarded, WrappedComponent)\n    }\n\n    return /*#__PURE__*/ hoistStatics(Connect, WrappedComponent)\n  }\n\n  return wrapWithConnect\n}\n\nexport default connect as Connect\n", "import type { Context, ReactNode } from 'react'\nimport { React } from '../utils/react'\nimport type { Action, Store, UnknownAction } from 'redux'\nimport type { DevModeCheckFrequency } from '../hooks/useSelector'\nimport { createSubscription } from '../utils/Subscription'\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect'\nimport type { ReactReduxContextValue } from './Context'\nimport { ReactReduxContext } from './Context'\n\nexport interface ProviderProps<\n  A extends Action<string> = UnknownAction,\n  S = unknown,\n> {\n  /**\n   * The single Redux store in your application.\n   */\n  store: Store<S, A>\n\n  /**\n   * An optional server state snapshot. Will be used during initial hydration render if available, to ensure that the UI output is consistent with the HTML generated on the server.\n   */\n  serverState?: S\n\n  /**\n   * Optional context to be used internally in react-redux. Use React.createContext() to create a context to be used.\n   * If this is used, you'll need to customize `connect` by supplying the same context provided to the Provider.\n   * Set the initial value to null, and the hooks will error\n   * if this is not overwritten by Provider.\n   */\n  context?: Context<ReactReduxContextValue<S, A> | null>\n\n  /**\n   * Determines the frequency of stability checks for all selectors.\n   * This setting overrides the global configuration for\n   * the `useSelector` stability check, allowing you to specify how often\n   * these checks should occur in development mode.\n   *\n   * @since 8.1.0\n   */\n  stabilityCheck?: DevModeCheckFrequency\n\n  /**\n   * Determines the frequency of identity function checks for all selectors.\n   * This setting overrides the global configuration for\n   * the `useSelector` identity function check, allowing you to specify how often\n   * these checks should occur in development mode.\n   *\n   * **Note**: Previously referred to as `noopCheck`.\n   *\n   * @since 9.0.0\n   */\n  identityFunctionCheck?: DevModeCheckFrequency\n\n  children: ReactNode\n}\n\nfunction Provider<A extends Action<string> = UnknownAction, S = unknown>(\n  providerProps: ProviderProps<A, S>,\n) {\n  const { children, context, serverState, store } = providerProps\n\n  const contextValue = React.useMemo(() => {\n    const subscription = createSubscription(store)\n\n    const baseContextValue = {\n      store,\n      subscription,\n      getServerState: serverState ? () => serverState : undefined,\n    }\n\n    if (process.env.NODE_ENV === 'production') {\n      return baseContextValue\n    } else {\n      const { identityFunctionCheck = 'once', stabilityCheck = 'once' } =\n        providerProps\n\n      return /* @__PURE__ */ Object.assign(baseContextValue, {\n        stabilityCheck,\n        identityFunctionCheck,\n      })\n    }\n  }, [store, serverState])\n\n  const previousState = React.useMemo(() => store.getState(), [store])\n\n  useIsomorphicLayoutEffect(() => {\n    const { subscription } = contextValue\n    subscription.onStateChange = subscription.notifyNestedSubs\n    subscription.trySubscribe()\n\n    if (previousState !== store.getState()) {\n      subscription.notifyNestedSubs()\n    }\n    return () => {\n      subscription.tryUnsubscribe()\n      subscription.onStateChange = undefined\n    }\n  }, [contextValue, previousState])\n\n  const Context = context || ReactReduxContext\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>\n}\n\nexport default Provider\n", "import { React } from '../utils/react'\nimport { ReactReduxContext } from '../components/Context'\nimport type { ReactReduxContextValue } from '../components/Context'\n\n/**\n * Hook factory, which creates a `useReduxContext` hook bound to a given context. This is a low-level\n * hook that you should usually not need to call directly.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useReduxContext` hook bound to the specified context.\n */\nexport function createReduxContextHook(context = ReactReduxContext) {\n  return function useReduxContext(): ReactReduxContextValue {\n    const contextValue = React.useContext(context)\n\n    if (process.env.NODE_ENV !== 'production' && !contextValue) {\n      throw new Error(\n        'could not find react-redux context value; please ensure the component is wrapped in a <Provider>',\n      )\n    }\n\n    return contextValue!\n  }\n}\n\n/**\n * A hook to access the value of the `ReactReduxContext`. This is a low-level\n * hook that you should usually not need to call directly.\n *\n * @returns {any} the value of the `ReactReduxContext`\n *\n * @example\n *\n * import React from 'react'\n * import { useReduxContext } from 'react-redux'\n *\n * export const CounterComponent = () => {\n *   const { store } = useReduxContext()\n *   return <div>{store.getState()}</div>\n * }\n */\nexport const useReduxContext = /*#__PURE__*/ createReduxContextHook()\n", "import type { Context } from 'react'\nimport type { Action, Store } from 'redux'\nimport type { ReactReduxContextValue } from '../components/Context'\nimport { ReactReduxContext } from '../components/Context'\nimport {\n  createReduxContextHook,\n  useReduxContext as useDefaultReduxContext,\n} from './useReduxContext'\n\n/**\n * Represents a type that extracts the action type from a given Redux store.\n *\n * @template StoreType - The specific type of the Redux store.\n *\n * @since 9.1.0\n * @internal\n */\nexport type ExtractStoreActionType<StoreType extends Store> =\n  StoreType extends Store<any, infer ActionType> ? ActionType : never\n\n/**\n * Represents a custom hook that provides access to the Redux store.\n *\n * @template StoreType - The specific type of the Redux store that gets returned.\n *\n * @since 9.1.0\n * @public\n */\nexport interface UseStore<StoreType extends Store> {\n  /**\n   * Returns the Redux store instance.\n   *\n   * @returns The Redux store instance.\n   */\n  (): StoreType\n\n  /**\n   * Returns the Redux store instance with specific state and action types.\n   *\n   * @returns The Redux store with the specified state and action types.\n   *\n   * @template StateType - The specific type of the state used in the store.\n   * @template ActionType - The specific type of the actions used in the store.\n   */\n  <\n    StateType extends ReturnType<StoreType['getState']> = ReturnType<\n      StoreType['getState']\n    >,\n    ActionType extends Action = ExtractStoreActionType<Store>,\n  >(): Store<StateType, ActionType>\n\n  /**\n   * Creates a \"pre-typed\" version of {@linkcode useStore useStore}\n   * where the type of the Redux `store` is predefined.\n   *\n   * This allows you to set the `store` type once, eliminating the need to\n   * specify it with every {@linkcode useStore useStore} call.\n   *\n   * @returns A pre-typed `useStore` with the store type already defined.\n   *\n   * @example\n   * ```ts\n   * export const useAppStore = useStore.withTypes<AppStore>()\n   * ```\n   *\n   * @template OverrideStoreType - The specific type of the Redux store that gets returned.\n   *\n   * @since 9.1.0\n   */\n  withTypes: <\n    OverrideStoreType extends StoreType,\n  >() => UseStore<OverrideStoreType>\n}\n\n/**\n * Hook factory, which creates a `useStore` hook bound to a given context.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useStore` hook bound to the specified context.\n */\nexport function createStoreHook<\n  StateType = unknown,\n  ActionType extends Action = Action,\n>(\n  // @ts-ignore\n  context?: Context<ReactReduxContextValue<\n    StateType,\n    ActionType\n  > | null> = ReactReduxContext,\n) {\n  const useReduxContext =\n    context === ReactReduxContext\n      ? useDefaultReduxContext\n      : // @ts-ignore\n        createReduxContextHook(context)\n  const useStore = () => {\n    const { store } = useReduxContext()\n    return store\n  }\n\n  Object.assign(useStore, {\n    withTypes: () => useStore,\n  })\n\n  return useStore as UseStore<Store<StateType, ActionType>>\n}\n\n/**\n * A hook to access the redux store.\n *\n * @returns {any} the redux store\n *\n * @example\n *\n * import React from 'react'\n * import { useStore } from 'react-redux'\n *\n * export const ExampleComponent = () => {\n *   const store = useStore()\n *   return <div>{store.getState()}</div>\n * }\n */\nexport const useStore = /*#__PURE__*/ createStoreHook()\n", "import type { Context } from 'react'\nimport type { Action, Dispatch, UnknownAction } from 'redux'\n\nimport type { ReactReduxContextValue } from '../components/Context'\nimport { ReactReduxContext } from '../components/Context'\nimport { createStoreHook, useStore as useDefaultStore } from './useStore'\n\n/**\n * Represents a custom hook that provides a dispatch function\n * from the Redux store.\n *\n * @template DispatchType - The specific type of the dispatch function.\n *\n * @since 9.1.0\n * @public\n */\nexport interface UseDispatch<\n  DispatchType extends Dispatch<UnknownAction> = Dispatch<UnknownAction>,\n> {\n  /**\n   * Returns the dispatch function from the Redux store.\n   *\n   * @returns The dispatch function from the Redux store.\n   *\n   * @template AppDispatch - The specific type of the dispatch function.\n   */\n  <AppDispatch extends DispatchType = DispatchType>(): AppDispatch\n\n  /**\n   * Creates a \"pre-typed\" version of {@linkcode useDispatch useDispatch}\n   * where the type of the `dispatch` function is predefined.\n   *\n   * This allows you to set the `dispatch` type once, eliminating the need to\n   * specify it with every {@linkcode useDispatch useDispatch} call.\n   *\n   * @returns A pre-typed `useDispatch` with the dispatch type already defined.\n   *\n   * @example\n   * ```ts\n   * export const useAppDispatch = useDispatch.withTypes<AppDispatch>()\n   * ```\n   *\n   * @template OverrideDispatchType - The specific type of the dispatch function.\n   *\n   * @since 9.1.0\n   */\n  withTypes: <\n    OverrideDispatchType extends DispatchType,\n  >() => UseDispatch<OverrideDispatchType>\n}\n\n/**\n * Hook factory, which creates a `useDispatch` hook bound to a given context.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useDispatch` hook bound to the specified context.\n */\nexport function createDispatchHook<\n  StateType = unknown,\n  ActionType extends Action = UnknownAction,\n>(\n  // @ts-ignore\n  context?: Context<ReactReduxContextValue<\n    StateType,\n    ActionType\n  > | null> = ReactReduxContext,\n) {\n  const useStore =\n    context === ReactReduxContext ? useDefaultStore : createStoreHook(context)\n\n  const useDispatch = () => {\n    const store = useStore()\n    return store.dispatch\n  }\n\n  Object.assign(useDispatch, {\n    withTypes: () => useDispatch,\n  })\n\n  return useDispatch as UseDispatch<Dispatch<ActionType>>\n}\n\n/**\n * A hook to access the redux `dispatch` function.\n *\n * @returns {any|function} redux store's `dispatch` function\n *\n * @example\n *\n * import React, { useCallback } from 'react'\n * import { useDispatch } from 'react-redux'\n *\n * export const CounterComponent = ({ value }) => {\n *   const dispatch = useDispatch()\n *   const increaseCounter = useCallback(() => dispatch({ type: 'increase-counter' }), [])\n *   return (\n *     <div>\n *       <span>{value}</span>\n *       <button onClick={increaseCounter}>Increase counter</button>\n *     </div>\n *   )\n * }\n */\nexport const useDispatch = /*#__PURE__*/ createDispatchHook()\n", "//import * as React from 'react'\nimport { React } from '../utils/react'\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/with-selector.js'\nimport type { ReactReduxContextValue } from '../components/Context'\nimport { ReactReduxContext } from '../components/Context'\nimport type { EqualityFn, NoInfer } from '../types'\nimport {\n  createReduxContextHook,\n  useReduxContext as useDefaultReduxContext,\n} from './useReduxContext'\n\n/**\n * The frequency of development mode checks.\n *\n * @since 8.1.0\n * @internal\n */\nexport type DevModeCheckFrequency = 'never' | 'once' | 'always'\n\n/**\n * Represents the configuration for development mode checks.\n *\n * @since 9.0.0\n * @internal\n */\nexport interface DevModeChecks {\n  /**\n   * Overrides the global stability check for the selector.\n   * - `once` - Run only the first time the selector is called.\n   * - `always` - Run every time the selector is called.\n   * - `never` - Never run the stability check.\n   *\n   * @default 'once'\n   *\n   * @since 8.1.0\n   */\n  stabilityCheck: DevModeCheckFrequency\n\n  /**\n   * Overrides the global identity function check for the selector.\n   * - `once` - Run only the first time the selector is called.\n   * - `always` - Run every time the selector is called.\n   * - `never` - Never run the identity function check.\n   *\n   * **Note**: Previously referred to as `noopCheck`.\n   *\n   * @default 'once'\n   *\n   * @since 9.0.0\n   */\n  identityFunctionCheck: DevModeCheckFrequency\n}\n\nexport interface UseSelectorOptions<Selected = unknown> {\n  equalityFn?: EqualityFn<Selected>\n\n  /**\n   * `useSelector` performs additional checks in development mode to help\n   * identify and warn about potential issues in selector behavior. This\n   * option allows you to customize the behavior of these checks per selector.\n   *\n   * @since 9.0.0\n   */\n  devModeChecks?: Partial<DevModeChecks>\n}\n\n/**\n * Represents a custom hook that allows you to extract data from the\n * Redux store state, using a selector function. The selector function\n * takes the current state as an argument and returns a part of the state\n * or some derived data. The hook also supports an optional equality\n * function or options object to customize its behavior.\n *\n * @template StateType - The specific type of state this hook operates on.\n *\n * @public\n */\nexport interface UseSelector<StateType = unknown> {\n  /**\n   * A function that takes a selector function as its first argument.\n   * The selector function is responsible for selecting a part of\n   * the Redux store's state or computing derived data.\n   *\n   * @param selector - A function that receives the current state and returns a part of the state or some derived data.\n   * @param equalityFnOrOptions - An optional equality function or options object for customizing the behavior of the selector.\n   * @returns The selected part of the state or derived data.\n   *\n   * @template TState - The specific type of state this hook operates on.\n   * @template Selected - The type of the value that the selector function will return.\n   */\n  <TState extends StateType = StateType, Selected = unknown>(\n    selector: (state: TState) => Selected,\n    equalityFnOrOptions?: EqualityFn<Selected> | UseSelectorOptions<Selected>,\n  ): Selected\n\n  /**\n   * Creates a \"pre-typed\" version of {@linkcode useSelector useSelector}\n   * where the `state` type is predefined.\n   *\n   * This allows you to set the `state` type once, eliminating the need to\n   * specify it with every {@linkcode useSelector useSelector} call.\n   *\n   * @returns A pre-typed `useSelector` with the state type already defined.\n   *\n   * @example\n   * ```ts\n   * export const useAppSelector = useSelector.withTypes<RootState>()\n   * ```\n   *\n   * @template OverrideStateType - The specific type of state this hook operates on.\n   *\n   * @since 9.1.0\n   */\n  withTypes: <\n    OverrideStateType extends StateType,\n  >() => UseSelector<OverrideStateType>\n}\n\nconst refEquality: EqualityFn<any> = (a, b) => a === b\n\n/**\n * Hook factory, which creates a `useSelector` hook bound to a given context.\n *\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\n * @returns {Function} A `useSelector` hook bound to the specified context.\n */\nexport function createSelectorHook(\n  context: React.Context<ReactReduxContextValue<\n    any,\n    any\n  > | null> = ReactReduxContext,\n): UseSelector {\n  const useReduxContext =\n    context === ReactReduxContext\n      ? useDefaultReduxContext\n      : createReduxContextHook(context)\n\n  const useSelector = <TState, Selected>(\n    selector: (state: TState) => Selected,\n    equalityFnOrOptions:\n      | EqualityFn<NoInfer<Selected>>\n      | UseSelectorOptions<NoInfer<Selected>> = {},\n  ): Selected => {\n    const { equalityFn = refEquality } =\n      typeof equalityFnOrOptions === 'function'\n        ? { equalityFn: equalityFnOrOptions }\n        : equalityFnOrOptions\n    if (process.env.NODE_ENV !== 'production') {\n      if (!selector) {\n        throw new Error(`You must pass a selector to useSelector`)\n      }\n      if (typeof selector !== 'function') {\n        throw new Error(`You must pass a function as a selector to useSelector`)\n      }\n      if (typeof equalityFn !== 'function') {\n        throw new Error(\n          `You must pass a function as an equality function to useSelector`,\n        )\n      }\n    }\n\n    const reduxContext = useReduxContext()\n\n    const { store, subscription, getServerState } = reduxContext\n\n    const firstRun = React.useRef(true)\n\n    const wrappedSelector = React.useCallback<typeof selector>(\n      {\n        [selector.name](state: TState) {\n          const selected = selector(state)\n          if (process.env.NODE_ENV !== 'production') {\n            const { devModeChecks = {} } =\n              typeof equalityFnOrOptions === 'function'\n                ? {}\n                : equalityFnOrOptions\n            const { identityFunctionCheck, stabilityCheck } = reduxContext\n            const {\n              identityFunctionCheck: finalIdentityFunctionCheck,\n              stabilityCheck: finalStabilityCheck,\n            } = {\n              stabilityCheck,\n              identityFunctionCheck,\n              ...devModeChecks,\n            }\n            if (\n              finalStabilityCheck === 'always' ||\n              (finalStabilityCheck === 'once' && firstRun.current)\n            ) {\n              const toCompare = selector(state)\n              if (!equalityFn(selected, toCompare)) {\n                let stack: string | undefined = undefined\n                try {\n                  throw new Error()\n                } catch (e) {\n                  // eslint-disable-next-line no-extra-semi\n                  ;({ stack } = e as Error)\n                }\n                console.warn(\n                  'Selector ' +\n                    (selector.name || 'unknown') +\n                    ' returned a different result when called with the same parameters. This can lead to unnecessary rerenders.' +\n                    '\\nSelectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization',\n                  {\n                    state,\n                    selected,\n                    selected2: toCompare,\n                    stack,\n                  },\n                )\n              }\n            }\n            if (\n              finalIdentityFunctionCheck === 'always' ||\n              (finalIdentityFunctionCheck === 'once' && firstRun.current)\n            ) {\n              // @ts-ignore\n              if (selected === state) {\n                let stack: string | undefined = undefined\n                try {\n                  throw new Error()\n                } catch (e) {\n                  // eslint-disable-next-line no-extra-semi\n                  ;({ stack } = e as Error)\n                }\n                console.warn(\n                  'Selector ' +\n                    (selector.name || 'unknown') +\n                    ' returned the root state when called. This can lead to unnecessary rerenders.' +\n                    '\\nSelectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.',\n                  { stack },\n                )\n              }\n            }\n            if (firstRun.current) firstRun.current = false\n          }\n          return selected\n        },\n      }[selector.name],\n      [selector],\n    )\n\n    const selectedState = useSyncExternalStoreWithSelector(\n      subscription.addNestedSub,\n      store.getState,\n      getServerState || store.getState,\n      wrappedSelector,\n      equalityFn,\n    )\n\n    React.useDebugValue(selectedState)\n\n    return selectedState\n  }\n\n  Object.assign(useSelector, {\n    withTypes: () => useSelector,\n  })\n\n  return useSelector as UseSelector\n}\n\n/**\n * A hook to access the redux store's state. This hook takes a selector function\n * as an argument. The selector is called with the store state.\n *\n * This hook takes an optional equality comparison function as the second parameter\n * that allows you to customize the way the selected state is compared to determine\n * whether the component needs to be re-rendered.\n *\n * @param {Function} selector the selector function\n * @param {Function=} equalityFn the function that will be used to determine equality\n *\n * @returns {any} the selected state\n *\n * @example\n *\n * import React from 'react'\n * import { useSelector } from 'react-redux'\n *\n * export const CounterComponent = () => {\n *   const counter = useSelector(state => state.counter)\n *   return <div>{counter}</div>\n * }\n */\nexport const useSelector = /*#__PURE__*/ createSelectorHook()\n", "import connect from './components/connect'\nexport type {\n  Connect,\n  ConnectProps,\n  ConnectedProps,\n} from './components/connect'\n\nimport shallowEqual from './utils/shallowEqual'\n\nimport Provider from './components/Provider'\nimport { defaultNoopBatch } from './utils/batch'\n\nexport { ReactReduxContext } from './components/Context'\nexport type { ReactReduxContextValue } from './components/Context'\n\nexport type { ProviderProps } from './components/Provider'\n\nexport type {\n  MapDispatchToProps,\n  MapDispatchToPropsFactory,\n  MapDispatchToPropsFunction,\n  MapDispatchToPropsNonObject,\n  MapDispatchToPropsParam,\n  MapStateToProps,\n  MapStateToPropsFactory,\n  MapStateToPropsParam,\n  MergeProps,\n  Selector,\n  SelectorFactory,\n} from './connect/selectorFactory'\n\nexport { createDispatchHook, useDispatch } from './hooks/useDispatch'\nexport type { UseDispatch } from './hooks/useDispatch'\n\nexport { createSelectorHook, useSelector } from './hooks/useSelector'\nexport type { UseSelector } from './hooks/useSelector'\n\nexport { createStoreHook, useStore } from './hooks/useStore'\nexport type { UseStore } from './hooks/useStore'\n\nexport type { Subscription } from './utils/Subscription'\n\nexport * from './types'\n\n/**\n * @deprecated As of React 18, batching is enabled by default for ReactDOM and React Native.\n * This is now a no-op that immediately runs the callback.\n */\nconst batch = defaultNoopBatch\n\nexport { Provider, batch, connect, shallowEqual }\n", "import type { AnyFunction } from '../types'\r\n\r\n/**\r\n * Runs a check to determine if the given result function behaves as an\r\n * identity function. An identity function is one that returns its\r\n * input unchanged, for example, `x => x`. This check helps ensure\r\n * efficient memoization and prevent unnecessary re-renders by encouraging\r\n * proper use of transformation logic in result functions and\r\n * extraction logic in input selectors.\r\n *\r\n * @param resultFunc - The result function to be checked.\r\n * @param inputSelectorsResults - The results of the input selectors.\r\n * @param outputSelectorResult - The result of the output selector.\r\n *\r\n * @see {@link https://reselect.js.org/api/development-only-stability-checks#identityfunctioncheck `identityFunctionCheck`}\r\n *\r\n * @since 5.0.0\r\n * @internal\r\n */\r\nexport const runIdentityFunctionCheck = (\r\n  resultFunc: AnyFunction,\r\n  inputSelectorsResults: unknown[],\r\n  outputSelectorResult: unknown\r\n) => {\r\n  if (\r\n    inputSelectorsResults.length === 1 &&\r\n    inputSelectorsResults[0] === outputSelectorResult\r\n  ) {\r\n    let isInputSameAsOutput = false\r\n    try {\r\n      const emptyObject = {}\r\n      if (resultFunc(emptyObject) === emptyObject) isInputSameAsOutput = true\r\n    } catch {\r\n      // Do nothing\r\n    }\r\n    if (isInputSameAsOutput) {\r\n      let stack: string | undefined = undefined\r\n      try {\r\n        throw new Error()\r\n      } catch (e) {\r\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi, no-extra-semi\r\n        ;({ stack } = e as Error)\r\n      }\r\n      console.warn(\r\n        'The result function returned its own inputs without modification. e.g' +\r\n          '\\n`createSelector([state => state.todos], todos => todos)`' +\r\n          '\\nThis could lead to inefficient memoization and unnecessary re-renders.' +\r\n          '\\nEnsure transformation logic is in the result function, and extraction logic is in the input selectors.',\r\n        { stack }\r\n      )\r\n    }\r\n  }\r\n}\r\n", "import type { CreateSelectorOptions, UnknownMemoizer } from '../types'\r\n\r\n/**\r\n * Runs a stability check to ensure the input selector results remain stable\r\n * when provided with the same arguments. This function is designed to detect\r\n * changes in the output of input selectors, which can impact the performance of memoized selectors.\r\n *\r\n * @param inputSelectorResultsObject - An object containing two arrays: `inputSelectorResults` and `inputSelectorResultsCopy`, representing the results of input selectors.\r\n * @param options - Options object consisting of a `memoize` function and a `memoizeOptions` object.\r\n * @param inputSelectorArgs - List of arguments being passed to the input selectors.\r\n *\r\n * @see {@link https://reselect.js.org/api/development-only-stability-checks/#inputstabilitycheck `inputStabilityCheck`}\r\n *\r\n * @since 5.0.0\r\n * @internal\r\n */\r\nexport const runInputStabilityCheck = (\r\n  inputSelectorResultsObject: {\r\n    inputSelectorResults: unknown[]\r\n    inputSelectorResultsCopy: unknown[]\r\n  },\r\n  options: Required<\r\n    Pick<\r\n      CreateSelectorOptions<UnknownMemoizer, UnknownMemoizer>,\r\n      'memoize' | 'memoizeOptions'\r\n    >\r\n  >,\r\n  inputSelectorArgs: unknown[] | IArguments\r\n) => {\r\n  const { memoize, memoizeOptions } = options\r\n  const { inputSelectorResults, inputSelectorResultsCopy } =\r\n    inputSelectorResultsObject\r\n  const createAnEmptyObject = memoize(() => ({}), ...memoizeOptions)\r\n  // if the memoize method thinks the parameters are equal, these *should* be the same reference\r\n  const areInputSelectorResultsEqual =\r\n    createAnEmptyObject.apply(null, inputSelectorResults) ===\r\n    createAnEmptyObject.apply(null, inputSelectorResultsCopy)\r\n  if (!areInputSelectorResultsEqual) {\r\n    let stack: string | undefined = undefined\r\n    try {\r\n      throw new Error()\r\n    } catch (e) {\r\n      // eslint-disable-next-line @typescript-eslint/no-extra-semi, no-extra-semi\r\n      ;({ stack } = e as Error)\r\n    }\r\n    console.warn(\r\n      'An input selector returned a different result when passed same arguments.' +\r\n        '\\nThis means your output selector will likely run more frequently than intended.' +\r\n        '\\nAvoid returning a new reference inside your input selector, e.g.' +\r\n        '\\n`createSelector([state => state.todos.map(todo => todo.id)], todoIds => todoIds.length)`',\r\n      {\r\n        arguments: inputSelectorArgs,\r\n        firstInputs: inputSelectorResults,\r\n        secondInputs: inputSelectorResultsCopy,\r\n        stack\r\n      }\r\n    )\r\n  }\r\n}\r\n", "import type { DevModeChecks } from '../types'\r\n\r\n/**\r\n * Global configuration for development mode checks. This specifies the default\r\n * frequency at which each development mode check should be performed.\r\n *\r\n * @since 5.0.0\r\n * @internal\r\n */\r\nexport const globalDevModeChecks: DevModeChecks = {\r\n  inputStabilityCheck: 'once',\r\n  identityFunctionCheck: 'once'\r\n}\r\n\r\n/**\r\n * Overrides the development mode checks settings for all selectors.\r\n *\r\n * Reselect performs additional checks in development mode to help identify and\r\n * warn about potential issues in selector behavior. This function allows you to\r\n * customize the behavior of these checks across all selectors in your application.\r\n *\r\n * **Note**: This setting can still be overridden per selector inside `createSelector`'s `options` object.\r\n * See {@link https://github.com/reduxjs/reselect#2-per-selector-by-passing-an-identityfunctioncheck-option-directly-to-createselector per-selector-configuration}\r\n * and {@linkcode CreateSelectorOptions.identityFunctionCheck identityFunctionCheck} for more details.\r\n *\r\n * _The development mode checks do not run in production builds._\r\n *\r\n * @param devModeChecks - An object specifying the desired settings for development mode checks. You can provide partial overrides. Unspecified settings will retain their current values.\r\n *\r\n * @example\r\n * ```ts\r\n * import { setGlobalDevModeChecks } from 'reselect'\r\n * import { DevModeChecks } from '../types'\r\n *\r\n * // Run only the first time the selector is called. (default)\r\n * setGlobalDevModeChecks({ inputStabilityCheck: 'once' })\r\n *\r\n * // Run every time the selector is called.\r\n * setGlobalDevModeChecks({ inputStabilityCheck: 'always' })\r\n *\r\n * // Never run the input stability check.\r\n * setGlobalDevModeChecks({ inputStabilityCheck: 'never' })\r\n *\r\n * // Run only the first time the selector is called. (default)\r\n * setGlobalDevModeChecks({ identityFunctionCheck: 'once' })\r\n *\r\n * // Run every time the selector is called.\r\n * setGlobalDevModeChecks({ identityFunctionCheck: 'always' })\r\n *\r\n * // Never run the identity function check.\r\n * setGlobalDevModeChecks({ identityFunctionCheck: 'never' })\r\n * ```\r\n * @see {@link https://reselect.js.org/api/development-only-stability-checks Development-Only Stability Checks}\r\n * @see {@link https://reselect.js.org/api/development-only-stability-checks#1-globally-through-setglobaldevmodechecks global-configuration}\r\n *\r\n * @since 5.0.0\r\n * @public\r\n */\r\nexport const setGlobalDevModeChecks = (\r\n  devModeChecks: Partial<DevModeChecks>\r\n) => {\r\n  Object.assign(globalDevModeChecks, devModeChecks)\r\n}\r\n", "import { runIdentityFunctionCheck } from './devModeChecks/identityFunctionCheck'\r\nimport { runInputStabilityCheck } from './devModeChecks/inputStabilityCheck'\r\nimport { globalDevModeChecks } from './devModeChecks/setGlobalDevModeChecks'\r\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\r\nimport type {\r\n  DevModeChecks,\r\n  Selector,\r\n  SelectorArray,\r\n  DevModeChecksExecutionInfo\r\n} from './types'\r\n\r\nexport const NOT_FOUND = /* @__PURE__ */ Symbol('NOT_FOUND')\r\nexport type NOT_FOUND_TYPE = typeof NOT_FOUND\r\n\r\n/**\r\n * Assert that the provided value is a function. If the assertion fails,\r\n * a `TypeError` is thrown with an optional custom error message.\r\n *\r\n * @param func - The value to be checked.\r\n * @param  errorMessage - An optional custom error message to use if the assertion fails.\r\n * @throws A `TypeError` if the assertion fails.\r\n */\r\nexport function assertIsFunction<FunctionType extends Function>(\r\n  func: unknown,\r\n  errorMessage = `expected a function, instead received ${typeof func}`\r\n): asserts func is FunctionType {\r\n  if (typeof func !== 'function') {\r\n    throw new TypeError(errorMessage)\r\n  }\r\n}\r\n\r\n/**\r\n * Assert that the provided value is an object. If the assertion fails,\r\n * a `TypeError` is thrown with an optional custom error message.\r\n *\r\n * @param object - The value to be checked.\r\n * @param  errorMessage - An optional custom error message to use if the assertion fails.\r\n * @throws A `TypeError` if the assertion fails.\r\n */\r\nexport function assertIsObject<ObjectType extends Record<string, unknown>>(\r\n  object: unknown,\r\n  errorMessage = `expected an object, instead received ${typeof object}`\r\n): asserts object is ObjectType {\r\n  if (typeof object !== 'object') {\r\n    throw new TypeError(errorMessage)\r\n  }\r\n}\r\n\r\n/**\r\n * Assert that the provided array is an array of functions. If the assertion fails,\r\n * a `TypeError` is thrown with an optional custom error message.\r\n *\r\n * @param array - The array to be checked.\r\n * @param  errorMessage - An optional custom error message to use if the assertion fails.\r\n * @throws A `TypeError` if the assertion fails.\r\n */\r\nexport function assertIsArrayOfFunctions<FunctionType extends Function>(\r\n  array: unknown[],\r\n  errorMessage = `expected all items to be functions, instead received the following types: `\r\n): asserts array is FunctionType[] {\r\n  if (\r\n    !array.every((item): item is FunctionType => typeof item === 'function')\r\n  ) {\r\n    const itemTypes = array\r\n      .map(item =>\r\n        typeof item === 'function'\r\n          ? `function ${item.name || 'unnamed'}()`\r\n          : typeof item\r\n      )\r\n      .join(', ')\r\n    throw new TypeError(`${errorMessage}[${itemTypes}]`)\r\n  }\r\n}\r\n\r\n/**\r\n * Ensure that the input is an array. If it's already an array, it's returned as is.\r\n * If it's not an array, it will be wrapped in a new array.\r\n *\r\n * @param item - The item to be checked.\r\n * @returns An array containing the input item. If the input is already an array, it's returned without modification.\r\n */\r\nexport const ensureIsArray = (item: unknown) => {\r\n  return Array.isArray(item) ? item : [item]\r\n}\r\n\r\n/**\r\n * Extracts the \"dependencies\" / \"input selectors\" from the arguments of `createSelector`.\r\n *\r\n * @param createSelectorArgs - Arguments passed to `createSelector` as an array.\r\n * @returns An array of \"input selectors\" / \"dependencies\".\r\n * @throws A `TypeError` if any of the input selectors is not function.\r\n */\r\nexport function getDependencies(createSelectorArgs: unknown[]) {\r\n  const dependencies = Array.isArray(createSelectorArgs[0])\r\n    ? createSelectorArgs[0]\r\n    : createSelectorArgs\r\n\r\n  assertIsArrayOfFunctions<Selector>(\r\n    dependencies,\r\n    `createSelector expects all input-selectors to be functions, but received the following types: `\r\n  )\r\n\r\n  return dependencies as SelectorArray\r\n}\r\n\r\n/**\r\n * Runs each input selector and returns their collective results as an array.\r\n *\r\n * @param dependencies - An array of \"dependencies\" or \"input selectors\".\r\n * @param inputSelectorArgs - An array of arguments being passed to the input selectors.\r\n * @returns An array of input selector results.\r\n */\r\nexport function collectInputSelectorResults(\r\n  dependencies: SelectorArray,\r\n  inputSelectorArgs: unknown[] | IArguments\r\n) {\r\n  const inputSelectorResults = []\r\n  const { length } = dependencies\r\n  for (let i = 0; i < length; i++) {\r\n    // @ts-ignore\r\n    // apply arguments instead of spreading and mutate a local list of params for performance.\r\n    inputSelectorResults.push(dependencies[i].apply(null, inputSelectorArgs))\r\n  }\r\n  return inputSelectorResults\r\n}\r\n\r\n/**\r\n * Retrieves execution information for development mode checks.\r\n *\r\n * @param devModeChecks - Custom Settings for development mode checks. These settings will override the global defaults.\r\n * @param firstRun - Indicates whether it is the first time the selector has run.\r\n * @returns  An object containing the execution information for each development mode check.\r\n */\r\nexport const getDevModeChecksExecutionInfo = (\r\n  firstRun: boolean,\r\n  devModeChecks: Partial<DevModeChecks>\r\n) => {\r\n  const { identityFunctionCheck, inputStabilityCheck } = {\r\n    ...globalDevModeChecks,\r\n    ...devModeChecks\r\n  }\r\n  return {\r\n    identityFunctionCheck: {\r\n      shouldRun:\r\n        identityFunctionCheck === 'always' ||\r\n        (identityFunctionCheck === 'once' && firstRun),\r\n      run: runIdentityFunctionCheck\r\n    },\r\n    inputStabilityCheck: {\r\n      shouldRun:\r\n        inputStabilityCheck === 'always' ||\r\n        (inputStabilityCheck === 'once' && firstRun),\r\n      run: runInputStabilityCheck\r\n    }\r\n  } satisfies DevModeChecksExecutionInfo\r\n}\r\n", "// Original autotracking implementation source:\r\n// - https://gist.github.com/pzuraq/79bf862e0f8cd9521b79c4b6eccdc4f9\r\n// Additional references:\r\n// - https://www.pzuraq.com/blog/how-autotracking-works\r\n// - https://v5.chriskrycho.com/journal/autotracking-elegant-dx-via-cutting-edge-cs/\r\nimport type { EqualityFn } from '../types'\r\nimport { assertIsFunction } from '../utils'\r\n\r\n// The global revision clock. Every time state changes, the clock increments.\r\nexport let $REVISION = 0\r\n\r\n// The current dependency tracker. Whenever we compute a cache, we create a Set\r\n// to track any dependencies that are used while computing. If no cache is\r\n// computing, then the tracker is null.\r\nlet CURRENT_TRACKER: Set<Cell<any> | TrackingCache> | null = null\r\n\r\n// Storage represents a root value in the system - the actual state of our app.\r\nexport class Cell<T> {\r\n  revision = $REVISION\r\n\r\n  _value: T\r\n  _lastValue: T\r\n  _isEqual: EqualityFn = tripleEq\r\n\r\n  constructor(initialValue: T, isEqual: EqualityFn = tripleEq) {\r\n    this._value = this._lastValue = initialValue\r\n    this._isEqual = isEqual\r\n  }\r\n\r\n  // Whenever a storage value is read, it'll add itself to the current tracker if\r\n  // one exists, entangling its state with that cache.\r\n  get value() {\r\n    CURRENT_TRACKER?.add(this)\r\n\r\n    return this._value\r\n  }\r\n\r\n  // Whenever a storage value is updated, we bump the global revision clock,\r\n  // assign the revision for this storage to the new value, _and_ we schedule a\r\n  // rerender. This is important, and it's what makes autotracking  _pull_\r\n  // based. We don't actively tell the caches which depend on the storage that\r\n  // anything has happened. Instead, we recompute the caches when needed.\r\n  set value(newValue) {\r\n    if (this.value === newValue) return\r\n\r\n    this._value = newValue\r\n    this.revision = ++$REVISION\r\n  }\r\n}\r\n\r\nfunction tripleEq(a: unknown, b: unknown) {\r\n  return a === b\r\n}\r\n\r\n// Caches represent derived state in the system. They are ultimately functions\r\n// that are memoized based on what state they use to produce their output,\r\n// meaning they will only rerun IFF a storage value that could affect the output\r\n// has changed. Otherwise, they'll return the cached value.\r\nexport class TrackingCache {\r\n  _cachedValue: any\r\n  _cachedRevision = -1\r\n  _deps: any[] = []\r\n  hits = 0\r\n\r\n  fn: () => any\r\n\r\n  constructor(fn: () => any) {\r\n    this.fn = fn\r\n  }\r\n\r\n  clear() {\r\n    this._cachedValue = undefined\r\n    this._cachedRevision = -1\r\n    this._deps = []\r\n    this.hits = 0\r\n  }\r\n\r\n  get value() {\r\n    // When getting the value for a Cache, first we check all the dependencies of\r\n    // the cache to see what their current revision is. If the current revision is\r\n    // greater than the cached revision, then something has changed.\r\n    if (this.revision > this._cachedRevision) {\r\n      const { fn } = this\r\n\r\n      // We create a new dependency tracker for this cache. As the cache runs\r\n      // its function, any Storage or Cache instances which are used while\r\n      // computing will be added to this tracker. In the end, it will be the\r\n      // full list of dependencies that this Cache depends on.\r\n      const currentTracker = new Set<Cell<any>>()\r\n      const prevTracker = CURRENT_TRACKER\r\n\r\n      CURRENT_TRACKER = currentTracker\r\n\r\n      // try {\r\n      this._cachedValue = fn()\r\n      // } finally {\r\n      CURRENT_TRACKER = prevTracker\r\n      this.hits++\r\n      this._deps = Array.from(currentTracker)\r\n\r\n      // Set the cached revision. This is the current clock count of all the\r\n      // dependencies. If any dependency changes, this number will be less\r\n      // than the new revision.\r\n      this._cachedRevision = this.revision\r\n      // }\r\n    }\r\n\r\n    // If there is a current tracker, it means another Cache is computing and\r\n    // using this one, so we add this one to the tracker.\r\n    CURRENT_TRACKER?.add(this)\r\n\r\n    // Always return the cached value.\r\n    return this._cachedValue\r\n  }\r\n\r\n  get revision() {\r\n    // The current revision is the max of all the dependencies' revisions.\r\n    return Math.max(...this._deps.map(d => d.revision), 0)\r\n  }\r\n}\r\n\r\nexport function getValue<T>(cell: Cell<T>): T {\r\n  if (!(cell instanceof Cell)) {\r\n    console.warn('Not a valid cell! ', cell)\r\n  }\r\n\r\n  return cell.value\r\n}\r\n\r\ntype CellValue<T extends Cell<unknown>> = T extends Cell<infer U> ? U : never\r\n\r\nexport function setValue<T extends Cell<unknown>>(\r\n  storage: T,\r\n  value: CellValue<T>\r\n): void {\r\n  if (!(storage instanceof Cell)) {\r\n    throw new TypeError(\r\n      'setValue must be passed a tracked store created with `createStorage`.'\r\n    )\r\n  }\r\n\r\n  storage.value = storage._lastValue = value\r\n}\r\n\r\nexport function createCell<T = unknown>(\r\n  initialValue: T,\r\n  isEqual: EqualityFn = tripleEq\r\n): Cell<T> {\r\n  return new Cell(initialValue, isEqual)\r\n}\r\n\r\nexport function createCache<T = unknown>(fn: () => T): TrackingCache {\r\n  assertIsFunction(\r\n    fn,\r\n    'the first parameter to `createCache` must be a function'\r\n  )\r\n\r\n  return new TrackingCache(fn)\r\n}\r\n", "import type { Cell } from './autotracking'\r\nimport {\r\n  getValue as consumeTag,\r\n  createCell as createStorage,\r\n  setValue\r\n} from './autotracking'\r\n\r\nexport type Tag = Cell<unknown>\r\n\r\nconst neverEq = (a: any, b: any): boolean => false\r\n\r\nexport function createTag(): Tag {\r\n  return createStorage(null, neverEq)\r\n}\r\nexport { consumeTag }\r\nexport function dirtyTag(tag: Tag, value: any): void {\r\n  setValue(tag, value)\r\n}\r\n\r\nexport interface Node<\r\n  T extends Array<unknown> | Record<string, unknown> =\r\n    | Array<unknown>\r\n    | Record<string, unknown>\r\n> {\r\n  collectionTag: Tag | null\r\n  tag: Tag | null\r\n  tags: Record<string, Tag>\r\n  children: Record<string, Node>\r\n  proxy: T\r\n  value: T\r\n  id: number\r\n}\r\n\r\nexport const consumeCollection = (node: Node): void => {\r\n  let tag = node.collectionTag\r\n\r\n  if (tag === null) {\r\n    tag = node.collectionTag = createTag()\r\n  }\r\n\r\n  consumeTag(tag)\r\n}\r\n\r\nexport const dirtyCollection = (node: Node): void => {\r\n  const tag = node.collectionTag\r\n\r\n  if (tag !== null) {\r\n    dirtyTag(tag, null)\r\n  }\r\n}\r\n", "// Original source:\r\n// - https://github.com/simonihmig/tracked-redux/blob/master/packages/tracked-redux/src/-private/proxy.ts\r\n\r\nimport type { Node, Tag } from './tracking'\r\nimport {\r\n  consumeCollection,\r\n  consumeTag,\r\n  createTag,\r\n  dirtyCollection,\r\n  dirtyTag\r\n} from './tracking'\r\n\r\nexport const REDUX_PROXY_LABEL = Symbol()\r\n\r\nlet nextId = 0\r\n\r\nconst proto = Object.getPrototypeOf({})\r\n\r\nclass ObjectTreeNode<T extends Record<string, unknown>> implements Node<T> {\r\n  proxy: T = new Proxy(this, objectProxyHandler) as unknown as T\r\n  tag = createTag()\r\n  tags = {} as Record<string, Tag>\r\n  children = {} as Record<string, Node>\r\n  collectionTag = null\r\n  id = nextId++\r\n\r\n  constructor(public value: T) {\r\n    this.value = value\r\n    this.tag.value = value\r\n  }\r\n}\r\n\r\nconst objectProxyHandler = {\r\n  get(node: Node, key: string | symbol): unknown {\r\n    function calculateResult() {\r\n      const { value } = node\r\n\r\n      const childValue = Reflect.get(value, key)\r\n\r\n      if (typeof key === 'symbol') {\r\n        return childValue\r\n      }\r\n\r\n      if (key in proto) {\r\n        return childValue\r\n      }\r\n\r\n      if (typeof childValue === 'object' && childValue !== null) {\r\n        let childNode = node.children[key]\r\n\r\n        if (childNode === undefined) {\r\n          childNode = node.children[key] = createNode(childValue)\r\n        }\r\n\r\n        if (childNode.tag) {\r\n          consumeTag(childNode.tag)\r\n        }\r\n\r\n        return childNode.proxy\r\n      } else {\r\n        let tag = node.tags[key]\r\n\r\n        if (tag === undefined) {\r\n          tag = node.tags[key] = createTag()\r\n          tag.value = childValue\r\n        }\r\n\r\n        consumeTag(tag)\r\n\r\n        return childValue\r\n      }\r\n    }\r\n    const res = calculateResult()\r\n    return res\r\n  },\r\n\r\n  ownKeys(node: Node): ArrayLike<string | symbol> {\r\n    consumeCollection(node)\r\n    return Reflect.ownKeys(node.value)\r\n  },\r\n\r\n  getOwnPropertyDescriptor(\r\n    node: Node,\r\n    prop: string | symbol\r\n  ): PropertyDescriptor | undefined {\r\n    return Reflect.getOwnPropertyDescriptor(node.value, prop)\r\n  },\r\n\r\n  has(node: Node, prop: string | symbol): boolean {\r\n    return Reflect.has(node.value, prop)\r\n  }\r\n}\r\n\r\nclass ArrayTreeNode<T extends Array<unknown>> implements Node<T> {\r\n  proxy: T = new Proxy([this], arrayProxyHandler) as unknown as T\r\n  tag = createTag()\r\n  tags = {}\r\n  children = {}\r\n  collectionTag = null\r\n  id = nextId++\r\n\r\n  constructor(public value: T) {\r\n    this.value = value\r\n    this.tag.value = value\r\n  }\r\n}\r\n\r\nconst arrayProxyHandler = {\r\n  get([node]: [Node], key: string | symbol): unknown {\r\n    if (key === 'length') {\r\n      consumeCollection(node)\r\n    }\r\n\r\n    return objectProxyHandler.get(node, key)\r\n  },\r\n\r\n  ownKeys([node]: [Node]): ArrayLike<string | symbol> {\r\n    return objectProxyHandler.ownKeys(node)\r\n  },\r\n\r\n  getOwnPropertyDescriptor(\r\n    [node]: [Node],\r\n    prop: string | symbol\r\n  ): PropertyDescriptor | undefined {\r\n    return objectProxyHandler.getOwnPropertyDescriptor(node, prop)\r\n  },\r\n\r\n  has([node]: [Node], prop: string | symbol): boolean {\r\n    return objectProxyHandler.has(node, prop)\r\n  }\r\n}\r\n\r\nexport function createNode<T extends Array<unknown> | Record<string, unknown>>(\r\n  value: T\r\n): Node<T> {\r\n  if (Array.isArray(value)) {\r\n    return new ArrayTreeNode(value)\r\n  }\r\n\r\n  return new ObjectTreeNode(value) as Node<T>\r\n}\r\n\r\nconst keysMap = new WeakMap<\r\n  Array<unknown> | Record<string, unknown>,\r\n  Set<string>\r\n>()\r\n\r\nexport function updateNode<T extends Array<unknown> | Record<string, unknown>>(\r\n  node: Node<T>,\r\n  newValue: T\r\n): void {\r\n  const { value, tags, children } = node\r\n\r\n  node.value = newValue\r\n\r\n  if (\r\n    Array.isArray(value) &&\r\n    Array.isArray(newValue) &&\r\n    value.length !== newValue.length\r\n  ) {\r\n    dirtyCollection(node)\r\n  } else {\r\n    if (value !== newValue) {\r\n      let oldKeysSize = 0\r\n      let newKeysSize = 0\r\n      let anyKeysAdded = false\r\n\r\n      for (const _key in value) {\r\n        oldKeysSize++\r\n      }\r\n\r\n      for (const key in newValue) {\r\n        newKeysSize++\r\n        if (!(key in value)) {\r\n          anyKeysAdded = true\r\n          break\r\n        }\r\n      }\r\n\r\n      const isDifferent = anyKeysAdded || oldKeysSize !== newKeysSize\r\n\r\n      if (isDifferent) {\r\n        dirtyCollection(node)\r\n      }\r\n    }\r\n  }\r\n\r\n  for (const key in tags) {\r\n    const childValue = (value as Record<string, unknown>)[key]\r\n    const newChildValue = (newValue as Record<string, unknown>)[key]\r\n\r\n    if (childValue !== newChildValue) {\r\n      dirtyCollection(node)\r\n      dirtyTag(tags[key], newChildValue)\r\n    }\r\n\r\n    if (typeof newChildValue === 'object' && newChildValue !== null) {\r\n      delete tags[key]\r\n    }\r\n  }\r\n\r\n  for (const key in children) {\r\n    const childNode = children[key]\r\n    const newChildValue = (newValue as Record<string, unknown>)[key]\r\n\r\n    const childValue = childNode.value\r\n\r\n    if (childValue === newChildValue) {\r\n      continue\r\n    } else if (typeof newChildValue === 'object' && newChildValue !== null) {\r\n      updateNode(childNode, newChildValue as Record<string, unknown>)\r\n    } else {\r\n      deleteNode(childNode)\r\n      delete children[key]\r\n    }\r\n  }\r\n}\r\n\r\nfunction deleteNode(node: Node): void {\r\n  if (node.tag) {\r\n    dirtyTag(node.tag, null)\r\n  }\r\n  dirtyCollection(node)\r\n  for (const key in node.tags) {\r\n    dirtyTag(node.tags[key], null)\r\n  }\r\n  for (const key in node.children) {\r\n    deleteNode(node.children[key])\r\n  }\r\n}\r\n", "import type {\r\n  AnyFunction,\r\n  DefaultMemoizeFields,\r\n  EqualityFn,\r\n  Simplify\r\n} from './types'\r\n\r\nimport type { NOT_FOUND_TYPE } from './utils'\r\nimport { NOT_FOUND } from './utils'\r\n\r\n// Cache implementation based on Erik Rasmussen's `lru-memoize`:\r\n// https://github.com/erikras/lru-memoize\r\n\r\ninterface Entry {\r\n  key: unknown\r\n  value: unknown\r\n}\r\n\r\ninterface Cache {\r\n  get(key: unknown): unknown | NOT_FOUND_TYPE\r\n  put(key: unknown, value: unknown): void\r\n  getEntries(): Entry[]\r\n  clear(): void\r\n}\r\n\r\nfunction createSingletonCache(equals: EqualityFn): Cache {\r\n  let entry: Entry | undefined\r\n  return {\r\n    get(key: unknown) {\r\n      if (entry && equals(entry.key, key)) {\r\n        return entry.value\r\n      }\r\n\r\n      return NOT_FOUND\r\n    },\r\n\r\n    put(key: unknown, value: unknown) {\r\n      entry = { key, value }\r\n    },\r\n\r\n    getEntries() {\r\n      return entry ? [entry] : []\r\n    },\r\n\r\n    clear() {\r\n      entry = undefined\r\n    }\r\n  }\r\n}\r\n\r\nfunction createLruCache(maxSize: number, equals: EqualityFn): Cache {\r\n  let entries: Entry[] = []\r\n\r\n  function get(key: unknown) {\r\n    const cacheIndex = entries.findIndex(entry => equals(key, entry.key))\r\n\r\n    // We found a cached entry\r\n    if (cacheIndex > -1) {\r\n      const entry = entries[cacheIndex]\r\n\r\n      // Cached entry not at top of cache, move it to the top\r\n      if (cacheIndex > 0) {\r\n        entries.splice(cacheIndex, 1)\r\n        entries.unshift(entry)\r\n      }\r\n\r\n      return entry.value\r\n    }\r\n\r\n    // No entry found in cache, return sentinel\r\n    return NOT_FOUND\r\n  }\r\n\r\n  function put(key: unknown, value: unknown) {\r\n    if (get(key) === NOT_FOUND) {\r\n      // TODO Is unshift slow?\r\n      entries.unshift({ key, value })\r\n      if (entries.length > maxSize) {\r\n        entries.pop()\r\n      }\r\n    }\r\n  }\r\n\r\n  function getEntries() {\r\n    return entries\r\n  }\r\n\r\n  function clear() {\r\n    entries = []\r\n  }\r\n\r\n  return { get, put, getEntries, clear }\r\n}\r\n\r\n/**\r\n * Runs a simple reference equality check.\r\n * What {@linkcode lruMemoize lruMemoize} uses by default.\r\n *\r\n * **Note**: This function was previously known as `defaultEqualityCheck`.\r\n *\r\n * @public\r\n */\r\nexport const referenceEqualityCheck: EqualityFn = (a, b) => a === b\r\n\r\nexport function createCacheKeyComparator(equalityCheck: EqualityFn) {\r\n  return function areArgumentsShallowlyEqual(\r\n    prev: unknown[] | IArguments | null,\r\n    next: unknown[] | IArguments | null\r\n  ): boolean {\r\n    if (prev === null || next === null || prev.length !== next.length) {\r\n      return false\r\n    }\r\n\r\n    // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\r\n    const { length } = prev\r\n    for (let i = 0; i < length; i++) {\r\n      if (!equalityCheck(prev[i], next[i])) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n}\r\n\r\n/**\r\n * Options for configuring the behavior of a function memoized with\r\n * LRU (Least Recently Used) caching.\r\n *\r\n * @template Result - The type of the return value of the memoized function.\r\n *\r\n * @public\r\n */\r\nexport interface LruMemoizeOptions<Result = any> {\r\n  /**\r\n   * Function used to compare the individual arguments of the\r\n   * provided calculation function.\r\n   *\r\n   * @default referenceEqualityCheck\r\n   */\r\n  equalityCheck?: EqualityFn\r\n\r\n  /**\r\n   * If provided, used to compare a newly generated output value against\r\n   * previous values in the cache. If a match is found,\r\n   * the old value is returned. This addresses the common\r\n   * ```ts\r\n   * todos.map(todo => todo.id)\r\n   * ```\r\n   * use case, where an update to another field in the original data causes\r\n   * a recalculation due to changed references, but the output is still\r\n   * effectively the same.\r\n   *\r\n   * @since 4.1.0\r\n   */\r\n  resultEqualityCheck?: EqualityFn<Result>\r\n\r\n  /**\r\n   * The maximum size of the cache used by the selector.\r\n   * A size greater than 1 means the selector will use an\r\n   * LRU (Least Recently Used) cache, allowing for the caching of multiple\r\n   * results based on different sets of arguments.\r\n   *\r\n   * @default 1\r\n   */\r\n  maxSize?: number\r\n}\r\n\r\n/**\r\n * Creates a memoized version of a function with an optional\r\n * LRU (Least Recently Used) cache. The memoized function uses a cache to\r\n * store computed values. Depending on the `maxSize` option, it will use\r\n * either a singleton cache (for a single entry) or an\r\n * LRU cache (for multiple entries).\r\n *\r\n * **Note**: This function was previously known as `defaultMemoize`.\r\n *\r\n * @param func - The function to be memoized.\r\n * @param equalityCheckOrOptions - Either an equality check function or an options object.\r\n * @returns A memoized function with a `.clearCache()` method attached.\r\n *\r\n * @template Func - The type of the function that is memoized.\r\n *\r\n * @see {@link https://reselect.js.org/api/lruMemoize `lruMemoize`}\r\n *\r\n * @public\r\n */\r\nexport function lruMemoize<Func extends AnyFunction>(\r\n  func: Func,\r\n  equalityCheckOrOptions?: EqualityFn | LruMemoizeOptions<ReturnType<Func>>\r\n) {\r\n  const providedOptions =\r\n    typeof equalityCheckOrOptions === 'object'\r\n      ? equalityCheckOrOptions\r\n      : { equalityCheck: equalityCheckOrOptions }\r\n\r\n  const {\r\n    equalityCheck = referenceEqualityCheck,\r\n    maxSize = 1,\r\n    resultEqualityCheck\r\n  } = providedOptions\r\n\r\n  const comparator = createCacheKeyComparator(equalityCheck)\r\n\r\n  let resultsCount = 0\r\n\r\n  const cache =\r\n    maxSize <= 1\r\n      ? createSingletonCache(comparator)\r\n      : createLruCache(maxSize, comparator)\r\n\r\n  function memoized() {\r\n    let value = cache.get(arguments) as ReturnType<Func>\r\n    if (value === NOT_FOUND) {\r\n      // apply arguments instead of spreading for performance.\r\n      // @ts-ignore\r\n      value = func.apply(null, arguments) as ReturnType<Func>\r\n      resultsCount++\r\n\r\n      if (resultEqualityCheck) {\r\n        const entries = cache.getEntries()\r\n        const matchingEntry = entries.find(entry =>\r\n          resultEqualityCheck(entry.value as ReturnType<Func>, value)\r\n        )\r\n\r\n        if (matchingEntry) {\r\n          value = matchingEntry.value as ReturnType<Func>\r\n          resultsCount !== 0 && resultsCount--\r\n        }\r\n      }\r\n\r\n      cache.put(arguments, value)\r\n    }\r\n    return value\r\n  }\r\n\r\n  memoized.clearCache = () => {\r\n    cache.clear()\r\n    memoized.resetResultsCount()\r\n  }\r\n\r\n  memoized.resultsCount = () => resultsCount\r\n\r\n  memoized.resetResultsCount = () => {\r\n    resultsCount = 0\r\n  }\r\n\r\n  return memoized as Func & Simplify<DefaultMemoizeFields>\r\n}\r\n", "import { createNode, updateNode } from './proxy'\r\nimport type { Node } from './tracking'\r\n\r\nimport { createCacheKeyComparator, referenceEqualityCheck } from '../lruMemoize'\r\nimport type { AnyFunction, DefaultMemoizeFields, Simplify } from '../types'\r\nimport { createCache } from './autotracking'\r\n\r\n/**\r\n * Uses an \"auto-tracking\" approach inspired by the work of the Ember Glimmer team.\r\n * It uses a Proxy to wrap arguments and track accesses to nested fields\r\n * in your selector on first read. Later, when the selector is called with\r\n * new arguments, it identifies which accessed fields have changed and\r\n * only recalculates the result if one or more of those accessed fields have changed.\r\n * This allows it to be more precise than the shallow equality checks in `lruMemoize`.\r\n *\r\n * __Design Tradeoffs for `autotrackMemoize`:__\r\n * - Pros:\r\n *    - It is likely to avoid excess calculations and recalculate fewer times than `lruMemoize` will,\r\n *    which may also result in fewer component re-renders.\r\n * - Cons:\r\n *    - It only has a cache size of 1.\r\n *    - It is slower than `lruMemoize`, because it has to do more work. (How much slower is dependent on the number of accessed fields in a selector, number of calls, frequency of input changes, etc)\r\n *    - It can have some unexpected behavior. Because it tracks nested field accesses,\r\n *    cases where you don't access a field will not recalculate properly.\r\n *    For example, a badly-written selector like:\r\n *      ```ts\r\n *      createSelector([state => state.todos], todos => todos)\r\n *      ```\r\n *      that just immediately returns the extracted value will never update, because it doesn't see any field accesses to check.\r\n *\r\n * __Use Cases for `autotrackMemoize`:__\r\n * - It is likely best used for cases where you need to access specific nested fields\r\n * in data, and avoid recalculating if other fields in the same data objects are immutably updated.\r\n *\r\n * @param func - The function to be memoized.\r\n * @returns A memoized function with a `.clearCache()` method attached.\r\n *\r\n * @example\r\n * <caption>Using `createSelector`</caption>\r\n * ```ts\r\n * import { unstable_autotrackMemoize as autotrackMemoize, createSelector } from 'reselect'\r\n *\r\n * const selectTodoIds = createSelector(\r\n *   [(state: RootState) => state.todos],\r\n *   (todos) => todos.map(todo => todo.id),\r\n *   { memoize: autotrackMemoize }\r\n * )\r\n * ```\r\n *\r\n * @example\r\n * <caption>Using `createSelectorCreator`</caption>\r\n * ```ts\r\n * import { unstable_autotrackMemoize as autotrackMemoize, createSelectorCreator } from 'reselect'\r\n *\r\n * const createSelectorAutotrack = createSelectorCreator({ memoize: autotrackMemoize })\r\n *\r\n * const selectTodoIds = createSelectorAutotrack(\r\n *   [(state: RootState) => state.todos],\r\n *   (todos) => todos.map(todo => todo.id)\r\n * )\r\n * ```\r\n *\r\n * @template Func - The type of the function that is memoized.\r\n *\r\n * @see {@link https://reselect.js.org/api/unstable_autotrackMemoize autotrackMemoize}\r\n *\r\n * @since 5.0.0\r\n * @public\r\n * @experimental\r\n */\r\nexport function autotrackMemoize<Func extends AnyFunction>(func: Func) {\r\n  // we reference arguments instead of spreading them for performance reasons\r\n\r\n  const node: Node<Record<string, unknown>> = createNode(\r\n    [] as unknown as Record<string, unknown>\r\n  )\r\n\r\n  let lastArgs: IArguments | null = null\r\n\r\n  const shallowEqual = createCacheKeyComparator(referenceEqualityCheck)\r\n\r\n  const cache = createCache(() => {\r\n    const res = func.apply(null, node.proxy as unknown as any[])\r\n    return res\r\n  })\r\n\r\n  function memoized() {\r\n    if (!shallowEqual(lastArgs, arguments)) {\r\n      updateNode(node, arguments as unknown as Record<string, unknown>)\r\n      lastArgs = arguments\r\n    }\r\n    return cache.value\r\n  }\r\n\r\n  memoized.clearCache = () => {\r\n    return cache.clear()\r\n  }\r\n\r\n  return memoized as Func & Simplify<DefaultMemoizeFields>\r\n}\r\n", "// Original source:\r\n// - https://github.com/facebook/react/blob/0b974418c9a56f6c560298560265dcf4b65784bc/packages/react/src/ReactCache.js\r\n\r\nimport type {\r\n  AnyFunction,\r\n  DefaultMemoizeFields,\r\n  EqualityFn,\r\n  Simplify\r\n} from './types'\r\n\r\nclass StrongRef<T> {\r\n  constructor(private value: T) {}\r\n  deref() {\r\n    return this.value\r\n  }\r\n}\r\n\r\nconst Ref =\r\n  typeof WeakRef !== 'undefined'\r\n    ? WeakRef\r\n    : (StrongRef as unknown as typeof WeakRef)\r\n\r\nconst UNTERMINATED = 0\r\nconst TERMINATED = 1\r\n\r\ninterface UnterminatedCacheNode<T> {\r\n  /**\r\n   * Status, represents whether the cached computation returned a value or threw an error.\r\n   */\r\n  s: 0\r\n  /**\r\n   * Value, either the cached result or an error, depending on status.\r\n   */\r\n  v: void\r\n  /**\r\n   * Object cache, a `WeakMap` where non-primitive arguments are stored.\r\n   */\r\n  o: null | WeakMap<Function | Object, CacheNode<T>>\r\n  /**\r\n   * Primitive cache, a regular Map where primitive arguments are stored.\r\n   */\r\n  p: null | Map<string | number | null | void | symbol | boolean, CacheNode<T>>\r\n}\r\n\r\ninterface TerminatedCacheNode<T> {\r\n  /**\r\n   * Status, represents whether the cached computation returned a value or threw an error.\r\n   */\r\n  s: 1\r\n  /**\r\n   * Value, either the cached result or an error, depending on status.\r\n   */\r\n  v: T\r\n  /**\r\n   * Object cache, a `WeakMap` where non-primitive arguments are stored.\r\n   */\r\n  o: null | WeakMap<Function | Object, CacheNode<T>>\r\n  /**\r\n   * Primitive cache, a regular `Map` where primitive arguments are stored.\r\n   */\r\n  p: null | Map<string | number | null | void | symbol | boolean, CacheNode<T>>\r\n}\r\n\r\ntype CacheNode<T> = TerminatedCacheNode<T> | UnterminatedCacheNode<T>\r\n\r\nfunction createCacheNode<T>(): CacheNode<T> {\r\n  return {\r\n    s: UNTERMINATED,\r\n    v: undefined,\r\n    o: null,\r\n    p: null\r\n  }\r\n}\r\n\r\n/**\r\n * Configuration options for a memoization function utilizing `WeakMap` for\r\n * its caching mechanism.\r\n *\r\n * @template Result - The type of the return value of the memoized function.\r\n *\r\n * @since 5.0.0\r\n * @public\r\n */\r\nexport interface WeakMapMemoizeOptions<Result = any> {\r\n  /**\r\n   * If provided, used to compare a newly generated output value against previous values in the cache.\r\n   * If a match is found, the old value is returned. This addresses the common\r\n   * ```ts\r\n   * todos.map(todo => todo.id)\r\n   * ```\r\n   * use case, where an update to another field in the original data causes a recalculation\r\n   * due to changed references, but the output is still effectively the same.\r\n   *\r\n   * @since 5.0.0\r\n   */\r\n  resultEqualityCheck?: EqualityFn<Result>\r\n}\r\n\r\n/**\r\n * Creates a tree of `WeakMap`-based cache nodes based on the identity of the\r\n * arguments it's been called with (in this case, the extracted values from your input selectors).\r\n * This allows `weakMapMemoize` to have an effectively infinite cache size.\r\n * Cache results will be kept in memory as long as references to the arguments still exist,\r\n * and then cleared out as the arguments are garbage-collected.\r\n *\r\n * __Design Tradeoffs for `weakMapMemoize`:__\r\n * - Pros:\r\n *   - It has an effectively infinite cache size, but you have no control over\r\n *   how long values are kept in cache as it's based on garbage collection and `WeakMap`s.\r\n * - Cons:\r\n *   - There's currently no way to alter the argument comparisons.\r\n *   They're based on strict reference equality.\r\n *   - It's roughly the same speed as `lruMemoize`, although likely a fraction slower.\r\n *\r\n * __Use Cases for `weakMapMemoize`:__\r\n * - This memoizer is likely best used for cases where you need to call the\r\n * same selector instance with many different arguments, such as a single\r\n * selector instance that is used in a list item component and called with\r\n * item IDs like:\r\n *   ```ts\r\n *   useSelector(state => selectSomeData(state, props.category))\r\n *   ```\r\n * @param func - The function to be memoized.\r\n * @returns A memoized function with a `.clearCache()` method attached.\r\n *\r\n * @example\r\n * <caption>Using `createSelector`</caption>\r\n * ```ts\r\n * import { createSelector, weakMapMemoize } from 'reselect'\r\n *\r\n * interface RootState {\r\n *   items: { id: number; category: string; name: string }[]\r\n * }\r\n *\r\n * const selectItemsByCategory = createSelector(\r\n *   [\r\n *     (state: RootState) => state.items,\r\n *     (state: RootState, category: string) => category\r\n *   ],\r\n *   (items, category) => items.filter(item => item.category === category),\r\n *   {\r\n *     memoize: weakMapMemoize,\r\n *     argsMemoize: weakMapMemoize\r\n *   }\r\n * )\r\n * ```\r\n *\r\n * @example\r\n * <caption>Using `createSelectorCreator`</caption>\r\n * ```ts\r\n * import { createSelectorCreator, weakMapMemoize } from 'reselect'\r\n *\r\n * const createSelectorWeakMap = createSelectorCreator({ memoize: weakMapMemoize, argsMemoize: weakMapMemoize })\r\n *\r\n * const selectItemsByCategory = createSelectorWeakMap(\r\n *   [\r\n *     (state: RootState) => state.items,\r\n *     (state: RootState, category: string) => category\r\n *   ],\r\n *   (items, category) => items.filter(item => item.category === category)\r\n * )\r\n * ```\r\n *\r\n * @template Func - The type of the function that is memoized.\r\n *\r\n * @see {@link https://reselect.js.org/api/weakMapMemoize `weakMapMemoize`}\r\n *\r\n * @since 5.0.0\r\n * @public\r\n * @experimental\r\n */\r\nexport function weakMapMemoize<Func extends AnyFunction>(\r\n  func: Func,\r\n  options: WeakMapMemoizeOptions<ReturnType<Func>> = {}\r\n) {\r\n  let fnNode = createCacheNode()\r\n  const { resultEqualityCheck } = options\r\n\r\n  let lastResult: WeakRef<object> | undefined\r\n\r\n  let resultsCount = 0\r\n\r\n  function memoized() {\r\n    let cacheNode = fnNode\r\n    const { length } = arguments\r\n    for (let i = 0, l = length; i < l; i++) {\r\n      const arg = arguments[i]\r\n      if (\r\n        typeof arg === 'function' ||\r\n        (typeof arg === 'object' && arg !== null)\r\n      ) {\r\n        // Objects go into a WeakMap\r\n        let objectCache = cacheNode.o\r\n        if (objectCache === null) {\r\n          cacheNode.o = objectCache = new WeakMap()\r\n        }\r\n        const objectNode = objectCache.get(arg)\r\n        if (objectNode === undefined) {\r\n          cacheNode = createCacheNode()\r\n          objectCache.set(arg, cacheNode)\r\n        } else {\r\n          cacheNode = objectNode\r\n        }\r\n      } else {\r\n        // Primitives go into a regular Map\r\n        let primitiveCache = cacheNode.p\r\n        if (primitiveCache === null) {\r\n          cacheNode.p = primitiveCache = new Map()\r\n        }\r\n        const primitiveNode = primitiveCache.get(arg)\r\n        if (primitiveNode === undefined) {\r\n          cacheNode = createCacheNode()\r\n          primitiveCache.set(arg, cacheNode)\r\n        } else {\r\n          cacheNode = primitiveNode\r\n        }\r\n      }\r\n    }\r\n\r\n    const terminatedNode = cacheNode as unknown as TerminatedCacheNode<any>\r\n\r\n    let result\r\n\r\n    if (cacheNode.s === TERMINATED) {\r\n      result = cacheNode.v\r\n    } else {\r\n      // Allow errors to propagate\r\n      result = func.apply(null, arguments as unknown as any[])\r\n      resultsCount++\r\n\r\n      if (resultEqualityCheck) {\r\n        const lastResultValue = lastResult?.deref?.() ?? lastResult\r\n\r\n        if (\r\n          lastResultValue != null &&\r\n          resultEqualityCheck(lastResultValue as ReturnType<Func>, result)\r\n        ) {\r\n          result = lastResultValue\r\n\r\n          resultsCount !== 0 && resultsCount--\r\n        }\r\n\r\n        const needsWeakRef =\r\n          (typeof result === 'object' && result !== null) ||\r\n          typeof result === 'function'\r\n\r\n        lastResult = needsWeakRef ? new Ref(result) : result\r\n      }\r\n    }\r\n\r\n    terminatedNode.s = TERMINATED\r\n\r\n    terminatedNode.v = result\r\n    return result\r\n  }\r\n\r\n  memoized.clearCache = () => {\r\n    fnNode = createCacheNode()\r\n    memoized.resetResultsCount()\r\n  }\r\n\r\n  memoized.resultsCount = () => resultsCount\r\n\r\n  memoized.resetResultsCount = () => {\r\n    resultsCount = 0\r\n  }\r\n\r\n  return memoized as Func & Simplify<DefaultMemoizeFields>\r\n}\r\n", "import { weakMapMemoize } from './weakMapMemoize'\r\n\r\nimport type {\r\n  Combiner,\r\n  CreateSelectorOptions,\r\n  DropFirstParameter,\r\n  ExtractMemoizerFields,\r\n  GetParamsFromSelectors,\r\n  GetStateFromSelectors,\r\n  InterruptRecursion,\r\n  OutputSelector,\r\n  Selector,\r\n  SelectorArray,\r\n  SetRequired,\r\n  Simplify,\r\n  UnknownMemoizer\r\n} from './types'\r\n\r\nimport {\r\n  assertIsFunction,\r\n  collectInputSelectorResults,\r\n  ensureIsArray,\r\n  getDependencies,\r\n  getDevModeChecksExecutionInfo\r\n} from './utils'\r\n\r\n/**\r\n * An instance of `createSelector`, customized with a given memoize implementation.\r\n *\r\n * @template MemoizeFunction - The type of the memoize function that is used to memoize the `resultFunc` inside `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`).\r\n * @template ArgsMemoizeFunction - The type of the optional memoize function that is used to memoize the arguments passed into the output selector generated by `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`). If none is explicitly provided, `weakMapMemoize` will be used.\r\n * @template StateType - The type of state that the selectors created with this selector creator will operate on.\r\n *\r\n * @public\r\n */\r\nexport interface CreateSelectorFunction<\r\n  MemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize,\r\n  ArgsMemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize,\r\n  StateType = any\r\n> {\r\n  /**\r\n   * Creates a memoized selector function.\r\n   *\r\n   * @param createSelectorArgs - An arbitrary number of input selectors as separate inline arguments and a `combiner` function.\r\n   * @returns A memoized output selector.\r\n   *\r\n   * @template InputSelectors - The type of the input selectors as an array.\r\n   * @template Result - The return type of the `combiner` as well as the output selector.\r\n   * @template OverrideMemoizeFunction - The type of the optional `memoize` function that could be passed into the options object to override the original `memoize` function that was initially passed into `createSelectorCreator`.\r\n   * @template OverrideArgsMemoizeFunction - The type of the optional `argsMemoize` function that could be passed into the options object to override the original `argsMemoize` function that was initially passed into `createSelectorCreator`.\r\n   *\r\n   * @see {@link https://reselect.js.org/api/createselector `createSelector`}\r\n   */\r\n  <InputSelectors extends SelectorArray<StateType>, Result>(\r\n    ...createSelectorArgs: [\r\n      ...inputSelectors: InputSelectors,\r\n      combiner: Combiner<InputSelectors, Result>\r\n    ]\r\n  ): OutputSelector<\r\n    InputSelectors,\r\n    Result,\r\n    MemoizeFunction,\r\n    ArgsMemoizeFunction\r\n  > &\r\n    InterruptRecursion\r\n\r\n  /**\r\n   * Creates a memoized selector function.\r\n   *\r\n   * @param createSelectorArgs - An arbitrary number of input selectors as separate inline arguments, a `combiner` function and an `options` object.\r\n   * @returns A memoized output selector.\r\n   *\r\n   * @template InputSelectors - The type of the input selectors as an array.\r\n   * @template Result - The return type of the `combiner` as well as the output selector.\r\n   * @template OverrideMemoizeFunction - The type of the optional `memoize` function that could be passed into the options object to override the original `memoize` function that was initially passed into `createSelectorCreator`.\r\n   * @template OverrideArgsMemoizeFunction - The type of the optional `argsMemoize` function that could be passed into the options object to override the original `argsMemoize` function that was initially passed into `createSelectorCreator`.\r\n   *\r\n   * @see {@link https://reselect.js.org/api/createselector `createSelector`}\r\n   */\r\n  <\r\n    InputSelectors extends SelectorArray<StateType>,\r\n    Result,\r\n    OverrideMemoizeFunction extends UnknownMemoizer = MemoizeFunction,\r\n    OverrideArgsMemoizeFunction extends UnknownMemoizer = ArgsMemoizeFunction\r\n  >(\r\n    ...createSelectorArgs: [\r\n      ...inputSelectors: InputSelectors,\r\n      combiner: Combiner<InputSelectors, Result>,\r\n      createSelectorOptions: Simplify<\r\n        CreateSelectorOptions<\r\n          MemoizeFunction,\r\n          ArgsMemoizeFunction,\r\n          OverrideMemoizeFunction,\r\n          OverrideArgsMemoizeFunction\r\n        >\r\n      >\r\n    ]\r\n  ): OutputSelector<\r\n    InputSelectors,\r\n    Result,\r\n    OverrideMemoizeFunction,\r\n    OverrideArgsMemoizeFunction\r\n  > &\r\n    InterruptRecursion\r\n\r\n  /**\r\n   * Creates a memoized selector function.\r\n   *\r\n   * @param inputSelectors - An array of input selectors.\r\n   * @param combiner - A function that Combines the input selectors and returns an output selector. Otherwise known as the result function.\r\n   * @param createSelectorOptions - An optional options object that allows for further customization per selector.\r\n   * @returns A memoized output selector.\r\n   *\r\n   * @template InputSelectors - The type of the input selectors array.\r\n   * @template Result - The return type of the `combiner` as well as the output selector.\r\n   * @template OverrideMemoizeFunction - The type of the optional `memoize` function that could be passed into the options object to override the original `memoize` function that was initially passed into `createSelectorCreator`.\r\n   * @template OverrideArgsMemoizeFunction - The type of the optional `argsMemoize` function that could be passed into the options object to override the original `argsMemoize` function that was initially passed into `createSelectorCreator`.\r\n   *\r\n   * @see {@link https://reselect.js.org/api/createselector `createSelector`}\r\n   */\r\n  <\r\n    InputSelectors extends SelectorArray<StateType>,\r\n    Result,\r\n    OverrideMemoizeFunction extends UnknownMemoizer = MemoizeFunction,\r\n    OverrideArgsMemoizeFunction extends UnknownMemoizer = ArgsMemoizeFunction\r\n  >(\r\n    inputSelectors: [...InputSelectors],\r\n    combiner: Combiner<InputSelectors, Result>,\r\n    createSelectorOptions?: Simplify<\r\n      CreateSelectorOptions<\r\n        MemoizeFunction,\r\n        ArgsMemoizeFunction,\r\n        OverrideMemoizeFunction,\r\n        OverrideArgsMemoizeFunction\r\n      >\r\n    >\r\n  ): OutputSelector<\r\n    InputSelectors,\r\n    Result,\r\n    OverrideMemoizeFunction,\r\n    OverrideArgsMemoizeFunction\r\n  > &\r\n    InterruptRecursion\r\n\r\n  /**\r\n   * Creates a \"pre-typed\" version of {@linkcode createSelector createSelector}\r\n   * where the `state` type is predefined.\r\n   *\r\n   * This allows you to set the `state` type once, eliminating the need to\r\n   * specify it with every {@linkcode createSelector createSelector} call.\r\n   *\r\n   * @returns A pre-typed `createSelector` with the state type already defined.\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * import { createSelector } from 'reselect'\r\n   *\r\n   * export interface RootState {\r\n   *   todos: { id: number; completed: boolean }[]\r\n   *   alerts: { id: number; read: boolean }[]\r\n   * }\r\n   *\r\n   * export const createAppSelector = createSelector.withTypes<RootState>()\r\n   *\r\n   * const selectTodoIds = createAppSelector(\r\n   *   [\r\n   *     // Type of `state` is set to `RootState`, no need to manually set the type\r\n   *     state => state.todos\r\n   *   ],\r\n   *   todos => todos.map(({ id }) => id)\r\n   * )\r\n   * ```\r\n   * @template OverrideStateType - The specific type of state used by all selectors created with this selector creator.\r\n   *\r\n   * @see {@link https://reselect.js.org/api/createselector#defining-a-pre-typed-createselector `createSelector.withTypes`}\r\n   *\r\n   * @since 5.1.0\r\n   */\r\n  withTypes: <OverrideStateType extends StateType>() => CreateSelectorFunction<\r\n    MemoizeFunction,\r\n    ArgsMemoizeFunction,\r\n    OverrideStateType\r\n  >\r\n}\r\n\r\n/**\r\n * Creates a selector creator function with the specified memoization function\r\n * and options for customizing memoization behavior.\r\n *\r\n * @param options - An options object containing the `memoize` function responsible for memoizing the `resultFunc` inside `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`). It also provides additional options for customizing memoization. While the `memoize` property is mandatory, the rest are optional.\r\n * @returns A customized `createSelector` function.\r\n *\r\n * @example\r\n * ```ts\r\n * const customCreateSelector = createSelectorCreator({\r\n *   memoize: customMemoize, // Function to be used to memoize `resultFunc`\r\n *   memoizeOptions: [memoizeOption1, memoizeOption2], // Options passed to `customMemoize` as the second argument onwards\r\n *   argsMemoize: customArgsMemoize, // Function to be used to memoize the selector's arguments\r\n *   argsMemoizeOptions: [argsMemoizeOption1, argsMemoizeOption2] // Options passed to `customArgsMemoize` as the second argument onwards\r\n * })\r\n *\r\n * const customSelector = customCreateSelector(\r\n *   [inputSelector1, inputSelector2],\r\n *   resultFunc // `resultFunc` will be passed as the first argument to `customMemoize`\r\n * )\r\n *\r\n * customSelector(\r\n *   ...selectorArgs // Will be memoized by `customArgsMemoize`\r\n * )\r\n * ```\r\n *\r\n * @template MemoizeFunction - The type of the memoize function that is used to memoize the `resultFunc` inside `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`).\r\n * @template ArgsMemoizeFunction - The type of the optional memoize function that is used to memoize the arguments passed into the output selector generated by `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`). If none is explicitly provided, `weakMapMemoize` will be used.\r\n *\r\n * @see {@link https://reselect.js.org/api/createSelectorCreator#using-options-since-500 `createSelectorCreator`}\r\n *\r\n * @since 5.0.0\r\n * @public\r\n */\r\nexport function createSelectorCreator<\r\n  MemoizeFunction extends UnknownMemoizer,\r\n  ArgsMemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize\r\n>(\r\n  options: Simplify<\r\n    SetRequired<\r\n      CreateSelectorOptions<\r\n        typeof weakMapMemoize,\r\n        typeof weakMapMemoize,\r\n        MemoizeFunction,\r\n        ArgsMemoizeFunction\r\n      >,\r\n      'memoize'\r\n    >\r\n  >\r\n): CreateSelectorFunction<MemoizeFunction, ArgsMemoizeFunction>\r\n\r\n/**\r\n * Creates a selector creator function with the specified memoization function\r\n * and options for customizing memoization behavior.\r\n *\r\n * @param memoize - The `memoize` function responsible for memoizing the `resultFunc` inside `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`).\r\n * @param memoizeOptionsFromArgs - Optional configuration options for the memoization function. These options are then passed to the memoize function as the second argument onwards.\r\n * @returns A customized `createSelector` function.\r\n *\r\n * @example\r\n * ```ts\r\n * const customCreateSelector = createSelectorCreator(customMemoize, // Function to be used to memoize `resultFunc`\r\n *   option1, // Will be passed as second argument to `customMemoize`\r\n *   option2, // Will be passed as third argument to `customMemoize`\r\n *   option3 // Will be passed as fourth argument to `customMemoize`\r\n * )\r\n *\r\n * const customSelector = customCreateSelector(\r\n *   [inputSelector1, inputSelector2],\r\n *   resultFunc // `resultFunc` will be passed as the first argument to `customMemoize`\r\n * )\r\n * ```\r\n *\r\n * @template MemoizeFunction - The type of the memoize function that is used to memoize the `resultFunc` inside `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`).\r\n *\r\n * @see {@link https://reselect.js.org/api/createSelectorCreator#using-memoize-and-memoizeoptions `createSelectorCreator`}\r\n *\r\n * @public\r\n */\r\nexport function createSelectorCreator<MemoizeFunction extends UnknownMemoizer>(\r\n  memoize: MemoizeFunction,\r\n  ...memoizeOptionsFromArgs: DropFirstParameter<MemoizeFunction>\r\n): CreateSelectorFunction<MemoizeFunction>\r\n\r\n/**\r\n * Creates a selector creator function with the specified memoization\r\n * function and options for customizing memoization behavior.\r\n *\r\n * @param memoizeOrOptions - Either A `memoize` function or an `options` object containing the `memoize` function.\r\n * @param memoizeOptionsFromArgs - Optional configuration options for the memoization function. These options are then passed to the memoize function as the second argument onwards.\r\n * @returns A customized `createSelector` function.\r\n *\r\n * @template MemoizeFunction - The type of the memoize function that is used to memoize the `resultFunc` inside `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`).\r\n * @template ArgsMemoizeFunction - The type of the optional memoize function that is used to memoize the arguments passed into the output selector generated by `createSelector` (e.g., `lruMemoize` or `weakMapMemoize`). If none is explicitly provided, `weakMapMemoize` will be used.\r\n * @template MemoizeOrOptions - The type of the first argument. It can either be a `memoize` function or an `options` object containing the `memoize` function.\r\n */\r\nexport function createSelectorCreator<\r\n  MemoizeFunction extends UnknownMemoizer,\r\n  ArgsMemoizeFunction extends UnknownMemoizer,\r\n  MemoizeOrOptions extends\r\n    | MemoizeFunction\r\n    | SetRequired<\r\n        CreateSelectorOptions<MemoizeFunction, ArgsMemoizeFunction>,\r\n        'memoize'\r\n      >\r\n>(\r\n  memoizeOrOptions: MemoizeOrOptions,\r\n  ...memoizeOptionsFromArgs: MemoizeOrOptions extends SetRequired<\r\n    CreateSelectorOptions<MemoizeFunction, ArgsMemoizeFunction>,\r\n    'memoize'\r\n  >\r\n    ? never\r\n    : DropFirstParameter<MemoizeFunction>\r\n) {\r\n  /** options initially passed into `createSelectorCreator`. */\r\n  const createSelectorCreatorOptions: SetRequired<\r\n    CreateSelectorOptions<MemoizeFunction, ArgsMemoizeFunction>,\r\n    'memoize'\r\n  > = typeof memoizeOrOptions === 'function'\r\n    ? {\r\n        memoize: memoizeOrOptions as MemoizeFunction,\r\n        memoizeOptions: memoizeOptionsFromArgs\r\n      }\r\n    : memoizeOrOptions\r\n\r\n  const createSelector = <\r\n    InputSelectors extends SelectorArray,\r\n    Result,\r\n    OverrideMemoizeFunction extends UnknownMemoizer = MemoizeFunction,\r\n    OverrideArgsMemoizeFunction extends UnknownMemoizer = ArgsMemoizeFunction\r\n  >(\r\n    ...createSelectorArgs: [\r\n      ...inputSelectors: [...InputSelectors],\r\n      combiner: Combiner<InputSelectors, Result>,\r\n      createSelectorOptions?: CreateSelectorOptions<\r\n        MemoizeFunction,\r\n        ArgsMemoizeFunction,\r\n        OverrideMemoizeFunction,\r\n        OverrideArgsMemoizeFunction\r\n      >\r\n    ]\r\n  ) => {\r\n    let recomputations = 0\r\n    let dependencyRecomputations = 0\r\n    let lastResult: Result\r\n\r\n    // Due to the intricacies of rest params, we can't do an optional arg after `...createSelectorArgs`.\r\n    // So, start by declaring the default value here.\r\n    // (And yes, the words 'memoize' and 'options' appear too many times in this next sequence.)\r\n    let directlyPassedOptions: CreateSelectorOptions<\r\n      MemoizeFunction,\r\n      ArgsMemoizeFunction,\r\n      OverrideMemoizeFunction,\r\n      OverrideArgsMemoizeFunction\r\n    > = {}\r\n\r\n    // Normally, the result func or \"combiner\" is the last arg\r\n    let resultFunc = createSelectorArgs.pop() as\r\n      | Combiner<InputSelectors, Result>\r\n      | CreateSelectorOptions<\r\n          MemoizeFunction,\r\n          ArgsMemoizeFunction,\r\n          OverrideMemoizeFunction,\r\n          OverrideArgsMemoizeFunction\r\n        >\r\n\r\n    // If the result func is actually an _object_, assume it's our options object\r\n    if (typeof resultFunc === 'object') {\r\n      directlyPassedOptions = resultFunc\r\n      // and pop the real result func off\r\n      resultFunc = createSelectorArgs.pop() as Combiner<InputSelectors, Result>\r\n    }\r\n\r\n    assertIsFunction(\r\n      resultFunc,\r\n      `createSelector expects an output function after the inputs, but received: [${typeof resultFunc}]`\r\n    )\r\n\r\n    // Determine which set of options we're using. Prefer options passed directly,\r\n    // but fall back to options given to `createSelectorCreator`.\r\n    const combinedOptions = {\r\n      ...createSelectorCreatorOptions,\r\n      ...directlyPassedOptions\r\n    }\r\n\r\n    const {\r\n      memoize,\r\n      memoizeOptions = [],\r\n      argsMemoize = weakMapMemoize,\r\n      argsMemoizeOptions = [],\r\n      devModeChecks = {}\r\n    } = combinedOptions\r\n\r\n    // Simplifying assumption: it's unlikely that the first options arg of the provided memoizer\r\n    // is an array. In most libs I've looked at, it's an equality function or options object.\r\n    // Based on that, if `memoizeOptions` _is_ an array, we assume it's a full\r\n    // user-provided array of options. Otherwise, it must be just the _first_ arg, and so\r\n    // we wrap it in an array so we can apply it.\r\n    const finalMemoizeOptions = ensureIsArray(memoizeOptions)\r\n    const finalArgsMemoizeOptions = ensureIsArray(argsMemoizeOptions)\r\n    const dependencies = getDependencies(createSelectorArgs) as InputSelectors\r\n\r\n    const memoizedResultFunc = memoize(function recomputationWrapper() {\r\n      recomputations++\r\n      // apply arguments instead of spreading for performance.\r\n      // @ts-ignore\r\n      return (resultFunc as Combiner<InputSelectors, Result>).apply(\r\n        null,\r\n        arguments as unknown as Parameters<Combiner<InputSelectors, Result>>\r\n      )\r\n    }, ...finalMemoizeOptions) as Combiner<InputSelectors, Result> &\r\n      ExtractMemoizerFields<OverrideMemoizeFunction>\r\n\r\n    let firstRun = true\r\n\r\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\r\n    const selector = argsMemoize(function dependenciesChecker() {\r\n      dependencyRecomputations++\r\n      /** Return values of input selectors which the `resultFunc` takes as arguments. */\r\n      const inputSelectorResults = collectInputSelectorResults(\r\n        dependencies,\r\n        arguments\r\n      )\r\n\r\n      // apply arguments instead of spreading for performance.\r\n      // @ts-ignore\r\n      lastResult = memoizedResultFunc.apply(null, inputSelectorResults)\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        const { identityFunctionCheck, inputStabilityCheck } =\r\n          getDevModeChecksExecutionInfo(firstRun, devModeChecks)\r\n        if (identityFunctionCheck.shouldRun) {\r\n          identityFunctionCheck.run(\r\n            resultFunc as Combiner<InputSelectors, Result>,\r\n            inputSelectorResults,\r\n            lastResult\r\n          )\r\n        }\r\n\r\n        if (inputStabilityCheck.shouldRun) {\r\n          // make a second copy of the params, to check if we got the same results\r\n          const inputSelectorResultsCopy = collectInputSelectorResults(\r\n            dependencies,\r\n            arguments\r\n          )\r\n\r\n          inputStabilityCheck.run(\r\n            { inputSelectorResults, inputSelectorResultsCopy },\r\n            { memoize, memoizeOptions: finalMemoizeOptions },\r\n            arguments\r\n          )\r\n        }\r\n\r\n        if (firstRun) firstRun = false\r\n      }\r\n\r\n      return lastResult\r\n    }, ...finalArgsMemoizeOptions) as unknown as Selector<\r\n      GetStateFromSelectors<InputSelectors>,\r\n      Result,\r\n      GetParamsFromSelectors<InputSelectors>\r\n    > &\r\n      ExtractMemoizerFields<OverrideArgsMemoizeFunction>\r\n\r\n    return Object.assign(selector, {\r\n      resultFunc,\r\n      memoizedResultFunc,\r\n      dependencies,\r\n      dependencyRecomputations: () => dependencyRecomputations,\r\n      resetDependencyRecomputations: () => {\r\n        dependencyRecomputations = 0\r\n      },\r\n      lastResult: () => lastResult,\r\n      recomputations: () => recomputations,\r\n      resetRecomputations: () => {\r\n        recomputations = 0\r\n      },\r\n      memoize,\r\n      argsMemoize\r\n    }) as OutputSelector<\r\n      InputSelectors,\r\n      Result,\r\n      OverrideMemoizeFunction,\r\n      OverrideArgsMemoizeFunction\r\n    >\r\n  }\r\n\r\n  Object.assign(createSelector, {\r\n    withTypes: () => createSelector\r\n  })\r\n\r\n  return createSelector as CreateSelectorFunction<\r\n    MemoizeFunction,\r\n    ArgsMemoizeFunction\r\n  >\r\n}\r\n\r\n/**\r\n * Accepts one or more \"input selectors\" (either as separate arguments or a single array),\r\n * a single \"result function\" / \"combiner\", and an optional options object, and\r\n * generates a memoized selector function.\r\n *\r\n * @see {@link https://reselect.js.org/api/createSelector `createSelector`}\r\n *\r\n * @public\r\n */\r\nexport const createSelector =\r\n  /* #__PURE__ */ createSelectorCreator(weakMapMemoize)\r\n", "import { createSelector } from './createSelectorCreator'\r\n\r\nimport type { CreateSelectorFunction } from './createSelectorCreator'\r\nimport type {\r\n  InterruptRecursion,\r\n  ObjectValuesToTuple,\r\n  OutputSelector,\r\n  Selector,\r\n  Simplify,\r\n  UnknownMemoizer\r\n} from './types'\r\nimport { assertIsObject } from './utils'\r\nimport type { weakMapMemoize } from './weakMapMemoize'\r\n\r\n/**\r\n * Represents a mapping of selectors to their return types.\r\n *\r\n * @template TObject - An object type where each property is a selector function.\r\n *\r\n * @public\r\n */\r\nexport type SelectorResultsMap<TObject extends SelectorsObject> = {\r\n  [Key in keyof TObject]: ReturnType<TObject[Key]>\r\n}\r\n\r\n/**\r\n * Represents a mapping of selectors for each key in a given root state.\r\n *\r\n * This type is a utility that takes a root state object type and\r\n * generates a corresponding set of selectors. Each selector is associated\r\n * with a key in the root state, allowing for the selection\r\n * of specific parts of the state.\r\n *\r\n * @template RootState - The type of the root state object.\r\n *\r\n * @since 5.0.0\r\n * @public\r\n */\r\nexport type RootStateSelectors<RootState = any> = {\r\n  [Key in keyof RootState]: Selector<RootState, RootState[Key], []>\r\n}\r\n\r\n/**\r\n * @deprecated Please use {@linkcode StructuredSelectorCreator.withTypes createStructuredSelector.withTypes<RootState>()} instead. This type will be removed in the future.\r\n * @template RootState - The type of the root state object.\r\n *\r\n * @since 5.0.0\r\n * @public\r\n */\r\nexport type TypedStructuredSelectorCreator<RootState = any> =\r\n  /**\r\n   * A convenience function that simplifies returning an object\r\n   * made up of selector results.\r\n   *\r\n   * @param inputSelectorsObject - A key value pair consisting of input selectors.\r\n   * @param selectorCreator - A custom selector creator function. It defaults to `createSelector`.\r\n   * @returns A memoized structured selector.\r\n   *\r\n   * @example\r\n   * <caption>Modern Use Case</caption>\r\n   * ```ts\r\n   * import { createSelector, createStructuredSelector } from 'reselect'\r\n   *\r\n   * interface RootState {\r\n   *   todos: {\r\n   *     id: number\r\n   *     completed: boolean\r\n   *     title: string\r\n   *     description: string\r\n   *   }[]\r\n   *   alerts: { id: number; read: boolean }[]\r\n   * }\r\n   *\r\n   * // This:\r\n   * const structuredSelector = createStructuredSelector(\r\n   *   {\r\n   *     todos: (state: RootState) => state.todos,\r\n   *     alerts: (state: RootState) => state.alerts,\r\n   *     todoById: (state: RootState, id: number) => state.todos[id]\r\n   *   },\r\n   *   createSelector\r\n   * )\r\n   *\r\n   * // Is essentially the same as this:\r\n   * const selector = createSelector(\r\n   *   [\r\n   *     (state: RootState) => state.todos,\r\n   *     (state: RootState) => state.alerts,\r\n   *     (state: RootState, id: number) => state.todos[id]\r\n   *   ],\r\n   *   (todos, alerts, todoById) => {\r\n   *     return {\r\n   *       todos,\r\n   *       alerts,\r\n   *       todoById\r\n   *     }\r\n   *   }\r\n   * )\r\n   * ```\r\n   *\r\n   * @example\r\n   * <caption>In your component:</caption>\r\n   * ```tsx\r\n   * import type { RootState } from 'createStructuredSelector/modernUseCase'\r\n   * import { structuredSelector } from 'createStructuredSelector/modernUseCase'\r\n   * import type { FC } from 'react'\r\n   * import { useSelector } from 'react-redux'\r\n   *\r\n   * interface Props {\r\n   *   id: number\r\n   * }\r\n   *\r\n   * const MyComponent: FC<Props> = ({ id }) => {\r\n   *   const { todos, alerts, todoById } = useSelector((state: RootState) =>\r\n   *     structuredSelector(state, id)\r\n   *   )\r\n   *\r\n   *   return (\r\n   *     <div>\r\n   *       Next to do is:\r\n   *       <h2>{todoById.title}</h2>\r\n   *       <p>Description: {todoById.description}</p>\r\n   *       <ul>\r\n   *         <h3>All other to dos:</h3>\r\n   *         {todos.map(todo => (\r\n   *           <li key={todo.id}>{todo.title}</li>\r\n   *         ))}\r\n   *       </ul>\r\n   *     </div>\r\n   *   )\r\n   * }\r\n   * ```\r\n   *\r\n   * @example\r\n   * <caption>Simple Use Case</caption>\r\n   * ```ts\r\n   * const selectA = state => state.a\r\n   * const selectB = state => state.b\r\n   *\r\n   * // The result function in the following selector\r\n   * // is simply building an object from the input selectors\r\n   * const structuredSelector = createSelector(selectA, selectB, (a, b) => ({\r\n   *   a,\r\n   *   b\r\n   * }))\r\n   *\r\n   * const result = structuredSelector({ a: 1, b: 2 }) // will produce { x: 1, y: 2 }\r\n   * ```\r\n   *\r\n   * @template InputSelectorsObject - The shape of the input selectors object.\r\n   * @template MemoizeFunction - The type of the memoize function that is used to create the structured selector. It defaults to `weakMapMemoize`.\r\n   * @template ArgsMemoizeFunction - The type of the of the memoize function that is used to memoize the arguments passed into the generated structured selector. It defaults to `weakMapMemoize`.\r\n   *\r\n   * @see {@link https://reselect.js.org/api/createStructuredSelector `createStructuredSelector`}\r\n   */\r\n  <\r\n    InputSelectorsObject extends RootStateSelectors<RootState> = RootStateSelectors<RootState>,\r\n    MemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize,\r\n    ArgsMemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize\r\n  >(\r\n    inputSelectorsObject: InputSelectorsObject,\r\n    selectorCreator?: CreateSelectorFunction<\r\n      MemoizeFunction,\r\n      ArgsMemoizeFunction\r\n    >\r\n  ) => OutputSelector<\r\n    ObjectValuesToTuple<InputSelectorsObject>,\r\n    Simplify<SelectorResultsMap<InputSelectorsObject>>,\r\n    MemoizeFunction,\r\n    ArgsMemoizeFunction\r\n  > &\r\n    InterruptRecursion\r\n\r\n/**\r\n * Represents an object where each property is a selector function.\r\n *\r\n * @template StateType - The type of state that all the selectors operate on.\r\n *\r\n * @public\r\n */\r\nexport type SelectorsObject<StateType = any> = Record<\r\n  string,\r\n  Selector<StateType>\r\n>\r\n\r\n/**\r\n * It provides a way to create structured selectors.\r\n * The structured selector can take multiple input selectors\r\n * and map their output to an object with specific keys.\r\n *\r\n * @template StateType - The type of state that the structured selectors created with this structured selector creator will operate on.\r\n *\r\n * @see {@link https://reselect.js.org/api/createStructuredSelector `createStructuredSelector`}\r\n *\r\n * @public\r\n */\r\nexport interface StructuredSelectorCreator<StateType = any> {\r\n  /**\r\n   * A convenience function that simplifies returning an object\r\n   * made up of selector results.\r\n   *\r\n   * @param inputSelectorsObject - A key value pair consisting of input selectors.\r\n   * @param selectorCreator - A custom selector creator function. It defaults to `createSelector`.\r\n   * @returns A memoized structured selector.\r\n   *\r\n   * @example\r\n   * <caption>Modern Use Case</caption>\r\n   * ```ts\r\n   * import { createSelector, createStructuredSelector } from 'reselect'\r\n   *\r\n   * interface RootState {\r\n   *   todos: {\r\n   *     id: number\r\n   *     completed: boolean\r\n   *     title: string\r\n   *     description: string\r\n   *   }[]\r\n   *   alerts: { id: number; read: boolean }[]\r\n   * }\r\n   *\r\n   * // This:\r\n   * const structuredSelector = createStructuredSelector(\r\n   *   {\r\n   *     todos: (state: RootState) => state.todos,\r\n   *     alerts: (state: RootState) => state.alerts,\r\n   *     todoById: (state: RootState, id: number) => state.todos[id]\r\n   *   },\r\n   *   createSelector\r\n   * )\r\n   *\r\n   * // Is essentially the same as this:\r\n   * const selector = createSelector(\r\n   *   [\r\n   *     (state: RootState) => state.todos,\r\n   *     (state: RootState) => state.alerts,\r\n   *     (state: RootState, id: number) => state.todos[id]\r\n   *   ],\r\n   *   (todos, alerts, todoById) => {\r\n   *     return {\r\n   *       todos,\r\n   *       alerts,\r\n   *       todoById\r\n   *     }\r\n   *   }\r\n   * )\r\n   * ```\r\n   *\r\n   * @example\r\n   * <caption>In your component:</caption>\r\n   * ```tsx\r\n   * import type { RootState } from 'createStructuredSelector/modernUseCase'\r\n   * import { structuredSelector } from 'createStructuredSelector/modernUseCase'\r\n   * import type { FC } from 'react'\r\n   * import { useSelector } from 'react-redux'\r\n   *\r\n   * interface Props {\r\n   *   id: number\r\n   * }\r\n   *\r\n   * const MyComponent: FC<Props> = ({ id }) => {\r\n   *   const { todos, alerts, todoById } = useSelector((state: RootState) =>\r\n   *     structuredSelector(state, id)\r\n   *   )\r\n   *\r\n   *   return (\r\n   *     <div>\r\n   *       Next to do is:\r\n   *       <h2>{todoById.title}</h2>\r\n   *       <p>Description: {todoById.description}</p>\r\n   *       <ul>\r\n   *         <h3>All other to dos:</h3>\r\n   *         {todos.map(todo => (\r\n   *           <li key={todo.id}>{todo.title}</li>\r\n   *         ))}\r\n   *       </ul>\r\n   *     </div>\r\n   *   )\r\n   * }\r\n   * ```\r\n   *\r\n   * @example\r\n   * <caption>Simple Use Case</caption>\r\n   * ```ts\r\n   * const selectA = state => state.a\r\n   * const selectB = state => state.b\r\n   *\r\n   * // The result function in the following selector\r\n   * // is simply building an object from the input selectors\r\n   * const structuredSelector = createSelector(selectA, selectB, (a, b) => ({\r\n   *   a,\r\n   *   b\r\n   * }))\r\n   *\r\n   * const result = structuredSelector({ a: 1, b: 2 }) // will produce { x: 1, y: 2 }\r\n   * ```\r\n   *\r\n   * @template InputSelectorsObject - The shape of the input selectors object.\r\n   * @template MemoizeFunction - The type of the memoize function that is used to create the structured selector. It defaults to `weakMapMemoize`.\r\n   * @template ArgsMemoizeFunction - The type of the of the memoize function that is used to memoize the arguments passed into the generated structured selector. It defaults to `weakMapMemoize`.\r\n   *\r\n   * @see {@link https://reselect.js.org/api/createStructuredSelector `createStructuredSelector`}\r\n   */\r\n  <\r\n    InputSelectorsObject extends SelectorsObject<StateType>,\r\n    MemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize,\r\n    ArgsMemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize\r\n  >(\r\n    inputSelectorsObject: InputSelectorsObject,\r\n    selectorCreator?: CreateSelectorFunction<\r\n      MemoizeFunction,\r\n      ArgsMemoizeFunction\r\n    >\r\n  ): OutputSelector<\r\n    ObjectValuesToTuple<InputSelectorsObject>,\r\n    Simplify<SelectorResultsMap<InputSelectorsObject>>,\r\n    MemoizeFunction,\r\n    ArgsMemoizeFunction\r\n  > &\r\n    InterruptRecursion\r\n\r\n  /**\r\n   * Creates a \"pre-typed\" version of\r\n   * {@linkcode createStructuredSelector createStructuredSelector}\r\n   * where the `state` type is predefined.\r\n   *\r\n   * This allows you to set the `state` type once, eliminating the need to\r\n   * specify it with every\r\n   * {@linkcode createStructuredSelector createStructuredSelector} call.\r\n   *\r\n   * @returns A pre-typed `createStructuredSelector` with the state type already defined.\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * import { createStructuredSelector } from 'reselect'\r\n   *\r\n   * export interface RootState {\r\n   *   todos: { id: number; completed: boolean }[]\r\n   *   alerts: { id: number; read: boolean }[]\r\n   * }\r\n   *\r\n   * export const createStructuredAppSelector =\r\n   *   createStructuredSelector.withTypes<RootState>()\r\n   *\r\n   * const structuredAppSelector = createStructuredAppSelector({\r\n   *   // Type of `state` is set to `RootState`, no need to manually set the type\r\n   *   todos: state => state.todos,\r\n   *   alerts: state => state.alerts,\r\n   *   todoById: (state, id: number) => state.todos[id]\r\n   * })\r\n   *\r\n   * ```\r\n   * @template OverrideStateType - The specific type of state used by all structured selectors created with this structured selector creator.\r\n   *\r\n   * @see {@link https://reselect.js.org/api/createstructuredselector#defining-a-pre-typed-createstructuredselector `createSelector.withTypes`}\r\n   *\r\n   * @since 5.1.0\r\n   */\r\n  withTypes: <\r\n    OverrideStateType extends StateType\r\n  >() => StructuredSelectorCreator<OverrideStateType>\r\n}\r\n\r\n/**\r\n * A convenience function that simplifies returning an object\r\n * made up of selector results.\r\n *\r\n * @param inputSelectorsObject - A key value pair consisting of input selectors.\r\n * @param selectorCreator - A custom selector creator function. It defaults to `createSelector`.\r\n * @returns A memoized structured selector.\r\n *\r\n * @example\r\n * <caption>Modern Use Case</caption>\r\n * ```ts\r\n * import { createSelector, createStructuredSelector } from 'reselect'\r\n *\r\n * interface RootState {\r\n *   todos: {\r\n *     id: number\r\n *     completed: boolean\r\n *     title: string\r\n *     description: string\r\n *   }[]\r\n *   alerts: { id: number; read: boolean }[]\r\n * }\r\n *\r\n * // This:\r\n * const structuredSelector = createStructuredSelector(\r\n *   {\r\n *     todos: (state: RootState) => state.todos,\r\n *     alerts: (state: RootState) => state.alerts,\r\n *     todoById: (state: RootState, id: number) => state.todos[id]\r\n *   },\r\n *   createSelector\r\n * )\r\n *\r\n * // Is essentially the same as this:\r\n * const selector = createSelector(\r\n *   [\r\n *     (state: RootState) => state.todos,\r\n *     (state: RootState) => state.alerts,\r\n *     (state: RootState, id: number) => state.todos[id]\r\n *   ],\r\n *   (todos, alerts, todoById) => {\r\n *     return {\r\n *       todos,\r\n *       alerts,\r\n *       todoById\r\n *     }\r\n *   }\r\n * )\r\n * ```\r\n *\r\n * @see {@link https://reselect.js.org/api/createStructuredSelector `createStructuredSelector`}\r\n *\r\n * @public\r\n */\r\nexport const createStructuredSelector: StructuredSelectorCreator =\r\n  Object.assign(\r\n    <\r\n      InputSelectorsObject extends SelectorsObject,\r\n      MemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize,\r\n      ArgsMemoizeFunction extends UnknownMemoizer = typeof weakMapMemoize\r\n    >(\r\n      inputSelectorsObject: InputSelectorsObject,\r\n      selectorCreator: CreateSelectorFunction<\r\n        MemoizeFunction,\r\n        ArgsMemoizeFunction\r\n      > = createSelector as CreateSelectorFunction<\r\n        MemoizeFunction,\r\n        ArgsMemoizeFunction\r\n      >\r\n    ) => {\r\n      assertIsObject(\r\n        inputSelectorsObject,\r\n        'createStructuredSelector expects first argument to be an object ' +\r\n          `where each property is a selector, instead received a ${typeof inputSelectorsObject}`\r\n      )\r\n      const inputSelectorKeys = Object.keys(inputSelectorsObject)\r\n      const dependencies = inputSelectorKeys.map(\r\n        key => inputSelectorsObject[key]\r\n      )\r\n      const structuredSelector = selectorCreator(\r\n        dependencies,\r\n        (...inputSelectorResults: any[]) => {\r\n          return inputSelectorResults.reduce((composition, value, index) => {\r\n            composition[inputSelectorKeys[index]] = value\r\n            return composition\r\n          }, {})\r\n        }\r\n      )\r\n      return structuredSelector\r\n    },\r\n    { withTypes: () => createStructuredSelector }\r\n  ) as StructuredSelectorCreator\r\n", "import { createSelector } from 'reselect';\nimport { AppState, User } from './store';\n\n// Basic selectors\nconst getUsers = (state: AppState) => state.users;\nconst getCurrentUser = (state: AppState) => state.currentUser;\nconst getRelationships = (state: AppState) => state.relationships;\nconst getChatRooms = (state: AppState) => state.chatRooms;\nconst getPosts = (state: AppState) => state.posts;\nconst getLikabilityScores = (state: AppState) => state.likabilityScores;\nconst getUserRatings = (state: AppState) => state.userRatings;\nconst getSubjects = (state: AppState) => state.subjects;\n\n// Memoized selectors\nexport const selectUsers = createSelector(\n  [getUsers],\n  (users) => users\n);\n\nexport const selectCurrentUser = createSelector(\n  [getCurrentUser],\n  (currentUser) => currentUser\n);\n\nexport const selectRelationships = createSelector(\n  [getRelationships],\n  (relationships) => relationships\n);\n\nexport const selectChatRooms = createSelector(\n  [getChatRooms],\n  (chatRooms) => chatRooms\n);\n\nexport const selectPosts = createSelector(\n  [getPosts],\n  (posts) => posts\n);\n\nexport const selectLikabilityScores = createSelector(\n  [getLikabilityScores],\n  (likabilityScores) => likabilityScores\n);\n\nexport const selectUserRatings = createSelector(\n  [getUserRatings],\n  (userRatings) => userRatings\n);\n\nexport const selectSubjects = createSelector(\n  [getSubjects],\n  (subjects) => subjects\n);\n\n// Complex selectors\nexport const selectFriends = createSelector(\n  [getCurrentUser, getRelationships, getUsers],\n  (currentUser, relationships, users) => {\n    if (!currentUser) return [];\n    const friendUids = relationships\n      .filter(r => r.fromUid === currentUser.uid && r.type === 'follow')\n      .map(r => r.toUid);\n    return users.filter(user => friendUids.includes(user.uid));\n  }\n);\n\nexport const selectBlockedUsers = createSelector(\n  [getCurrentUser, getRelationships, getUsers],\n  (currentUser, relationships, users) => {\n    if (!currentUser) return [];\n    const blockedUids = relationships\n      .filter(r => r.fromUid === currentUser.uid && r.type === 'block')\n      .map(r => r.toUid);\n    return users.filter(user => blockedUids.includes(user.uid));\n  }\n);\n\n// Add more complex selectors as needed\n", "import React, { useState, useContext, useEffect } from 'react';\nimport { Modal, Button, Row } from 'react-bootstrap';\nimport { BackendContext } from './Backend.js';\nimport { LikabilitySection } from './LikabilitySection.js';\nimport { MetricSection } from './MetricSection.js';\nimport { AllScoresList } from './AllScoresList.js';\nimport { ActionButtons } from './ActionButtons.js';\n\nexport function LikabilityModal({ show, onHide, postId, userLikabilityScore, setUserLikabilityScore, averageLikability, setAverageLikability }) {\n    const backend = useContext(BackendContext);\n    const [score, setScore] = useState(userLikabilityScore || 0);\n    const [allScores, setAllScores] = useState([]);\n    const [currentUser, setCurrentUser] = useState(null);\n    \n    // New metrics states\n    const [factScore, setFactScore] = useState(50);\n    const [humanScore, setHumanScore] = useState(50);\n    const [truthScore, setTruthScore] = useState(50);\n    const [adultnessScore, setAdultnessScore] = useState(50);\n    const [userFactScore, setUserFactScore] = useState(50);\n    const [userHumanScore, setUserHumanScore] = useState(50);\n    const [userTruthScore, setUserTruthScore] = useState(50);\n    const [userAdultnessScore, setUserAdultnessScore] = useState(50);\n\n    useEffect(() => {\n        if (show) {\n            setScore(userLikabilityScore || 0);\n            fetchAllScores();\n            fetchCurrentUser();\n            // In a real app, you'd fetch these from the backend\n            setFactScore(Math.floor(Math.random() * 101));\n            setHumanScore(Math.floor(Math.random() * 101));\n            setTruthScore(Math.floor(Math.random() * 101));\n            setAdultnessScore(Math.floor(Math.random() * 101));\n        }\n    }, [show, userLikabilityScore, postId]);\n\n    const fetchCurrentUser = async () => {\n        try {\n            const user = await backend.getCurrentUser();\n            setCurrentUser(user);\n        } catch (error) {\n            console.error('Error fetching current user:', error);\n        }\n    };\n\n    const fetchAllScores = async () => {\n        try {\n            const scores = await backend.getLikabilityScores(postId);\n            setAllScores(scores);\n            // Update average\n            if (scores.length > 0) {\n                const avg = scores.reduce((sum, ls) => sum + ls.score, 0) / scores.length;\n                setAverageLikability(Math.round(avg));\n            } else {\n                setAverageLikability(0);\n            }\n        } catch (error) {\n            console.error('Error fetching likability scores:', error);\n        }\n    };\n\n    const handleSetScore = async () => {\n        try {\n            await backend.setLikabilityScore(postId, currentUser.uid, score);\n            setUserLikabilityScore(score);\n            await fetchAllScores();\n        } catch (error) {\n            console.error('Error setting likability score:', error);\n        }\n    };\n\n    const handleSetAllScores = async () => {\n        // In a real app, you'd save all user ratings to the backend\n        // For now, we'll just show an alert\n        alert('All ratings saved! (Fact: ' + userFactScore + ', Human: ' + userHumanScore + \n              ', Truth: ' + userTruthScore + ', Adultness: ' + userAdultnessScore + ')');\n    };\n\n    return (\n        <Modal show={show} onHide={onHide} centered size=\"lg\">\n            <Modal.Header closeButton>\n                <Modal.Title>Post Assessment</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Row>\n                    <LikabilitySection \n                        averageLikability={averageLikability}\n                        score={score}\n                        onScoreChange={(e) => setScore(parseInt(e.target.value))}\n                        scoreMessage={getLikabilityMessage(averageLikability)}\n                        color={getMetricColor(averageLikability)}\n                    />\n                    <MetricSection \n                        title=\"Fact vs Fiction\"\n                        score={factScore}\n                        userScore={userFactScore}\n                        onUserScoreChange={(e) => setUserFactScore(parseInt(e.target.value))}\n                        scoreMessage={factScore >= 50 ? 'Mostly Factual' : 'Mostly Fictional'}\n                        color={getMetricColor(factScore)}\n                    />\n                </Row>\n                <Row>\n                    <MetricSection \n                        title=\"Human vs AI\"\n                        score={humanScore}\n                        userScore={userHumanScore}\n                        onUserScoreChange={(e) => setUserHumanScore(parseInt(e.target.value))}\n                        scoreMessage={humanScore >= 50 ? 'Likely Human' : 'Likely AI'}\n                        color={getMetricColor(humanScore)}\n                    />\n                    <MetricSection \n                        title=\"Truthful vs Deceptive\"\n                        score={truthScore}\n                        userScore={userTruthScore}\n                        onUserScoreChange={(e) => setUserTruthScore(parseInt(e.target.value))}\n                        scoreMessage={truthScore >= 50 ? 'Mostly Truthful' : 'Mostly Deceptive'}\n                        color={getMetricColor(truthScore)}\n                    />\n                </Row>\n                <Row>\n                    <MetricSection \n                        title=\"Adultness\"\n                        score={adultnessScore}\n                        userScore={userAdultnessScore}\n                        onUserScoreChange={(e) => setUserAdultnessScore(parseInt(e.target.value))}\n                        scoreMessage={adultnessScore >= 50 ? 'Adult Content' : 'Child-Friendly'}\n                        color={getMetricColor(adultnessScore)}\n                    />\n                </Row>\n                \n                <ActionButtons \n                    onSaveAllRatings={handleSetAllScores}\n                    onSetLikability={handleSetScore}\n                    userLikabilityScore={userLikabilityScore}\n                />\n                \n                <AllScoresList allScores={allScores} />\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant=\"secondary\" onClick={onHide}>\n                    Close\n                </Button>\n            </Modal.Footer>\n        </Modal>\n    );\n}\n\nfunction getMetricColor(score) {\n    if (score >= 80) return '#28a745';\n    if (score >= 60) return '#17a2b8';\n    if (score >= 40) return '#ffc107';\n    if (score >= 20) return '#fd7e14';\n    return '#dc3545';\n}\n\nfunction getLikabilityMessage(score) {\n    if (score >= 80) return 'Very well-liked!';\n    if (score >= 60) return 'Quite popular.';\n    if (score >= 40) return 'Average engagement.';\n    if (score >= 20) return 'Could use more attention.';\n    return 'Needs more love.';\n}\n", "import React from 'react';\nimport { Form, Col } from 'react-bootstrap';\n\nexport function LikabilitySection({ \n    averageLikability, \n    score, \n    onScoreChange,\n    scoreMessage,\n    color\n}) {\n    return (\n        <Col md={6}>\n            <div style={{ textAlign: 'center', marginBottom: '30px' }}>\n                <h5>Likability</h5>\n                <div style={{ \n                    fontSize: '36px', \n                    fontWeight: 'bold',\n                    color: color,\n                    margin: '10px 0'\n                }}>\n                    {averageLikability}/100\n                </div>\n                <div style={{ \n                    height: '15px',\n                    backgroundColor: '#e9ecef',\n                    borderRadius: '10px',\n                    overflow: 'hidden',\n                    margin: '10px 0'\n                }}>\n                    <div \n                        style={{ \n                            height: '100%',\n                            backgroundColor: color,\n                            width: `${averageLikability}%`,\n                            transition: 'width 0.3s ease'\n                        }}\n                    />\n                </div>\n                <p style={{ color: '#666', fontSize: '14px' }}>\n                    {scoreMessage}\n                </p>\n                \n                <Form.Group>\n                    <Form.Label>Your Likability Rating</Form.Label>\n                    <Form.Range\n                        min=\"0\"\n                        max=\"100\"\n                        value={score}\n                        onChange={onScoreChange}\n                    />\n                    <div>{score}/100</div>\n                </Form.Group>\n            </div>\n        </Col>\n    );\n}\n", "import React from 'react';\nimport { Form, Col } from 'react-bootstrap';\n\nexport function MetricSection({ \n    title, \n    score, \n    userScore, \n    onUserScoreChange,\n    scoreMessage,\n    color\n}) {\n    return (\n        <Col md={6}>\n            <div style={{ textAlign: 'center', marginBottom: '30px' }}>\n                <h5>{title}</h5>\n                <div style={{ \n                    fontSize: '24px', \n                    fontWeight: 'bold',\n                    color: color,\n                    margin: '10px 0'\n                }}>\n                    {score}/100\n                </div>\n                <div style={{ \n                    height: '15px',\n                    backgroundColor: '#e9ecef',\n                    borderRadius: '10px',\n                    overflow: 'hidden',\n                    margin: '10px 0'\n                }}>\n                    <div \n                        style={{ \n                            height: '100%',\n                            backgroundColor: color,\n                            width: `${score}%`,\n                            transition: 'width 0.3s ease'\n                        }}\n                    />\n                </div>\n                <p style={{ color: '#666', fontSize: '14px' }}>\n                    {scoreMessage}\n                </p>\n                \n                <Form.Group>\n                    <Form.Label>Your Rating</Form.Label>\n                    <Form.Range\n                        min=\"0\"\n                        max=\"100\"\n                        value={userScore}\n                        onChange={onUserScoreChange}\n                    />\n                    <div>{userScore}/100</div>\n                </Form.Group>\n            </div>\n        </Col>\n    );\n}\n", "import React from 'react';\n\nexport function AllScoresList({ allScores }) {\n    if (allScores.length === 0) return null;\n    \n    return (\n        <>\n            <hr />\n            <h5>All Likability Ratings ({allScores.length})</h5>\n            {allScores.map((ls, index) => (\n                <div key={index} style={{ \n                    display: 'flex', \n                    justifyContent: 'space-between',\n                    margin: '5px 0'\n                }}>\n                    <span>User {ls.userId}</span>\n                    <span>{ls.score}/100</span>\n                </div>\n            ))}\n        </>\n    );\n}\n", "import React from 'react';\nimport { Button } from 'react-bootstrap';\n\nexport function ActionButtons({ \n    onSaveAllRatings, \n    onSetLikability, \n    userLikabilityScore \n}) {\n    return (\n        <div style={{ textAlign: 'center', marginTop: '20px' }}>\n            <Button \n                variant=\"primary\" \n                onClick={onSaveAllRatings}\n                style={{ marginRight: '10px' }}\n            >\n                Save All Ratings\n            </Button>\n            <Button \n                variant=\"primary\" \n                onClick={onSetLikability}\n                style={{ marginRight: '10px' }}\n            >\n                {userLikabilityScore !== null ? 'Update Likability' : 'Set Likability'}\n            </Button>\n            <Button \n                variant=\"danger\" \n                onClick={() => alert('Report submitted! Thank you for helping keep our community safe.')}\n            >\n                Report Post\n            </Button>\n        </div>\n    );\n}\n", "import React from 'react';\n\nexport function FocusedPostBanner({ focusedPost, onBack, onShowLikabilityModal }) {\n    return (\n        <div style={{\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            borderRadius: '12px',\n            padding: '20px',\n            marginBottom: '20px',\n            color: 'white',\n            position: 'relative'\n        }}>\n            <button \n                onClick={onBack}\n                style={{\n                    position: 'absolute',\n                    top: '10px',\n                    left: '10px',\n                    background: 'rgba(255, 255, 255, 0.2)',\n                    border: 'none',\n                    borderRadius: '50%',\n                    width: '30px',\n                    height: '30px',\n                    color: 'white',\n                    cursor: 'pointer'\n                }}\n            >\n                \u2190\n            </button>\n            <div style={{ marginLeft: '40px' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '10px' }}>\n                    <div style={{\n                        width: '40px',\n                        height: '40px',\n                        borderRadius: '50%',\n                        backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontSize: '16px',\n                        fontWeight: 'bold',\n                        border: '2px solid rgba(255, 255, 255, 0.3)'\n                    }}>\n                        {focusedPost.user?.charAt(0) || 'U'}\n                    </div>\n                    <div>\n                        <h4 style={{ margin: 0, fontWeight: 'bold' }}>{focusedPost.user}</h4>\n                        <div style={{ fontSize: '14px', opacity: 0.9 }}>{focusedPost.time}</div>\n                    </div>\n                </div>\n                <div style={{ fontSize: '16px', lineHeight: '1.4', marginBottom: '10px' }}>\n                    {focusedPost.content}\n                </div>\n                {/* Assessment button in the focused post banner */}\n                {focusedPost.hasLikability && (\n                    <button \n                        onClick={onShowLikabilityModal}\n                        style={{\n                            fontSize: '14px',\n                            padding: '8px 16px',\n                            backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                            border: '1px solid rgba(255, 255, 255, 0.3)',\n                            borderRadius: '20px',\n                            cursor: 'pointer',\n                            color: 'white',\n                            fontWeight: 'bold'\n                        }}\n                    >\n                        Assess Post: {focusedPost.likability || 0}%\n                    </button>\n                )}\n            </div>\n        </div>\n    );\n}\n", "import React from 'react';\nimport { Post } from './Post.js';\n\nexport function ChatWallContent({ \n    isLoading, \n    focusedPostId, \n    focusedPost, \n    displayPosts, \n    sortedPosts, \n    context, \n    onReply, \n    onUserClick \n}) {\n    console.log(\"ChatWallContent rendering with onUserClick:\", onUserClick);\n    if (isLoading) {\n        return <div style={{ textAlign: 'center', padding: '20px' }}>Loading...</div>;\n    }\n\n    if (focusedPostId) {\n        // Show focused post's children (replies)\n        return focusedPost.children && focusedPost.children.length > 0 ? (\n            focusedPost.children.map((post) => (\n                <Post \n                    key={post.id} \n                    post={post} \n                    context={context} \n                    onReply={onReply}\n                    onUserClick={onUserClick}\n                />\n            ))\n        ) : (\n            <div style={{ textAlign: 'center', padding: '20px', color: '#666' }}>\n                No replies yet. Be the first to reply!\n            </div>\n        );\n    }\n\n    if (sortedPosts.length > 0) {\n        return sortedPosts.map((post) => (\n            <Post \n                key={post.id} \n                post={post} \n                context={context} \n                onReply={onReply}\n                onUserClick={onUserClick}\n            />\n        ));\n    } else {\n        // Show appropriate message based on context\n        let message = \"No posts found\";\n        if (context === 'profile') {\n            message = \"This user hasn't posted anything yet.\";\n        }\n        return (\n            <div style={{ textAlign: 'center', padding: '20px', color: '#666' }}>\n                {message}\n            </div>\n        );\n    }\n}\n", "import React, { useState, useContext, useEffect } from 'react';\nimport { BackendContext } from './Backend.js';\n\nexport function Post({ post, context, onReply, onUserClick, depth = 0 }) {\n  const backend = useContext(BackendContext);\n  const [relationship, setRelationship] = useState('none');\n  const [currentUser, setCurrentUser] = useState(null);\n\n  useEffect(() => {\n    const fetchCurrentUserAndRelationship = async () => {\n      try {\n        const user = await backend.getCurrentUser();\n        setCurrentUser(user);\n        // Only fetch relationship if the post has a user uid and it's not the current user\n        // Handle recommendation users specially\n        let targetUid = post.uid;\n        if (post.type === 'user-recommendation') {\n          targetUid = post.user.uid;\n        }\n        \n        if (targetUid && targetUid !== user.uid) {\n          const rel = await backend.getRelationship(user.uid, targetUid);\n          setRelationship(rel);\n        }\n        \n      } catch (error) {\n        console.error('Error fetching relationship:', error);\n      }\n    };\n    \n    fetchCurrentUserAndRelationship();\n  }, [backend, post.uid, post.id, post.hasLikability]);\n\n  const handleRelationshipAction = async (action) => {\n    try {\n      // For recommendation users, use the post's user uid\n      const targetUid = post.type === 'user-recommendation' ? post.user.uid : post.uid;\n      await backend.updateRelationship(currentUser.uid, targetUid, action);\n      // Refresh relationship status\n      const newRel = await backend.getRelationship(currentUser.uid, targetUid);\n      setRelationship(newRel);\n      \n      // If it's a recommendation and we followed, we might want to remove it from recommendations\n      // For now, we'll just update the UI\n    } catch (error) {\n      console.error('Error updating relationship:', error);\n    }\n  };\n\n  const renderRelationshipActions = () => {\n    // Only show relationship actions for user posts in specific contexts\n    if (!currentUser || post.uid === currentUser.uid || \n        post.uid === 'system' ||\n        (context !== 'friends' && context !== 'blocked' && context !== 'following')) return null;\n    \n    switch (relationship) {\n      case 'none':\n        return (\n          <div style={{ marginTop: '10px' }}>\n            <button \n              onClick={() => handleRelationshipAction('follow')}\n              style={{ marginRight: '5px', fontSize: '12px', padding: '5px 10px' }}\n            >\n              Follow\n            </button>\n            <button \n              onClick={() => handleRelationshipAction('block')}\n              style={{ fontSize: '12px', padding: '5px 10px' }}\n            >\n              Block\n            </button>\n          </div>\n        );\n      case 'following':\n        return (\n          <div style={{ marginTop: '10px' }}>\n            <span style={{ fontSize: '12px', color: '#666', marginRight: '10px' }}>Following</span>\n            <button \n              onClick={() => handleRelationshipAction('unfollow')}\n              style={{ fontSize: '12px', padding: '5px 10px' }}\n            >\n              Unfollow\n            </button>\n          </div>\n        );\n      case 'followed-by':\n        return (\n          <div style={{ marginTop: '10px' }}>\n            <span style={{ fontSize: '12px', color: '#666', marginRight: '10px' }}>Follows you</span>\n            <button \n              onClick={() => handleRelationshipAction('follow')}\n              style={{ marginRight: '5px', fontSize: '12px', padding: '5px 10px' }}\n            >\n              Follow back\n            </button>\n            <button \n              onClick={() => handleRelationshipAction('block')}\n              style={{ fontSize: '12px', padding: '5px 10px' }}\n            >\n              Block\n            </button>\n          </div>\n        );\n      case 'friends':\n        return (\n          <div style={{ marginTop: '10px' }}>\n            <span style={{ fontSize: '12px', color: '#666', marginRight: '10px' }}>Friends</span>\n            <button \n              onClick={() => handleRelationshipAction('unfollow')}\n              style={{ fontSize: '12px', padding: '5px 10px' }}\n            >\n              Unfriend\n            </button>\n          </div>\n        );\n      case 'blocked':\n        return (\n          <div style={{ marginTop: '10px' }}>\n            <span style={{ fontSize: '12px', color: '#666', marginRight: '10px' }}>Blocked</span>\n            <button \n              onClick={() => handleRelationshipAction('unblock')}\n              style={{ fontSize: '12px', padding: '5px 10px' }}\n            >\n              Unblock\n            </button>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n  const getPostStyle = () => {\n    if (context === 'notifications') {\n      // Different background colors based on notification subtype\n      let backgroundColor = \"#f8f9fa\";\n      let borderColor = \"#e9ecef\";\n      \n      if (post.subtype === 'like') {\n        backgroundColor = \"#fff3cd\";\n        borderColor = \"#ffeaa7\";\n      } else if (post.subtype === 'follow') {\n        backgroundColor = \"#d1ecf1\";\n        borderColor = \"#bee5eb\";\n      } else if (post.subtype === 'comment') {\n        backgroundColor = \"#d4edda\";\n        borderColor = \"#c3e6cb\";\n      } else if (post.subtype === 'trending') {\n        backgroundColor = \"#f8d7da\";\n        borderColor = \"#f5c6cb\";\n      } else if (post.subtype === 'mention') {\n        backgroundColor = \"#e2e3e5\";\n        borderColor = \"#d6d8db\";\n      } else if (post.subtype === 'digest') {\n        backgroundColor = \"#cce7ff\";\n        borderColor = \"#b3d9ff\";\n      } else if (post.subtype === 'event') {\n        backgroundColor = \"#fff0f6\";\n        borderColor = \"#ffdeeb\";\n      } else if (post.subtype === 'friend_joined') {\n        backgroundColor = \"#f0f8ff\";\n        borderColor = \"#e1f5fe\";\n      }\n      \n      return {\n        margin: \"10px 0\",\n        padding: \"15px\",\n        borderRadius: \"8px\",\n        backgroundColor: backgroundColor,\n        maxWidth: \"100%\",\n        border: `1px solid ${borderColor}`,\n      };\n    } else if (context === 'friends' || context === 'blocked' || context === 'following') {\n      return {\n        margin: \"10px 0\",\n        padding: \"15px\",\n        borderRadius: \"8px\",\n        backgroundColor: \"#f8f9fa\",\n        maxWidth: \"100%\",\n        border: \"1px solid #e9ecef\",\n      };\n    } else if (context === 'profile' || context === 'search') {\n      return {\n        margin: \"10px 0\",\n        padding: \"10px\",\n        borderRadius: \"8px\",\n        backgroundColor: \"#f5f5f5\",\n        maxWidth: \"100%\",\n      };\n    } else if (context === 'feed') {\n      return {\n        margin: \"10px 0\",\n        padding: \"10px\",\n        borderRadius: \"8px\",\n        backgroundColor: post.user === \"You\" ? \"#e3f2fd\" : \"#f5f5f5\",\n        alignSelf: post.user === \"You\" ? \"flex-end\" : \"flex-start\",\n        maxWidth: \"70%\",\n        marginLeft: post.user === \"You\" ? \"auto\" : \"0\",\n        marginRight: post.user === \"You\" ? \"0\" : \"auto\",\n      };\n    } else if (context === 'recommendations') {\n      return {\n        margin: \"10px 0\",\n        padding: \"15px\",\n        borderRadius: \"8px\",\n        backgroundColor: \"#f0f8ff\",\n        maxWidth: \"100%\",\n        border: \"1px solid #d1ecf1\",\n      };\n    } else {\n      return {\n        margin: \"10px 0\",\n        padding: \"10px\",\n        borderRadius: \"8px\",\n        backgroundColor: post.user === \"You\" ? \"#e3f2fd\" : \"#f5f5f5\",\n        alignSelf: post.user === \"You\" ? \"flex-end\" : \"flex-start\",\n        maxWidth: \"70%\",\n        marginLeft: post.user === \"You\" ? \"auto\" : \"0\",\n        marginRight: post.user === \"You\" ? \"0\" : \"auto\",\n      };\n    }\n  };\n\n  // Add reply functionality\n  const handleReply = () => {\n    if (onReply) {\n      onReply(post.id);\n    }\n  };\n\n  // Handle user name click\n  const handleUserNameClick = () => {\n    if (onUserClick && post.uid) {\n      onUserClick({ name: post.user, uid: post.uid });\n    }\n  };\n\n  // Handle subject click\n  const handleSubjectClick = () => {\n    console.log(\"handleSubjectClick called with post:\", post);\n    if (onUserClick && post.subject) {\n      console.log(\"Calling onUserClick with subject:\", post.subject);\n      onUserClick({ \n        name: post.subject.name, \n        uid: post.subject.id, \n        type: 'subject',\n        subject: post.subject // Pass the full subject data\n      });\n    } else {\n      console.log(\"onUserClick not available or post.subject missing\");\n    }\n  };\n\n  // Handle reply to subject\n  const handleReplyToSubject = () => {\n    console.log(\"handleReplyToSubject called with post:\", post);\n    if (onUserClick && post.subject) {\n      console.log(\"Calling onUserClick with subject:\", post.subject);\n      onUserClick({ \n        name: post.subject.name, \n        uid: post.subject.id, \n        type: 'subject',\n        subject: post.subject // Pass the full subject data\n      });\n    } else {\n      console.log(\"onUserClick not available or post.subject missing\");\n    }\n  };\n\n  return (\n    <div style={getPostStyle()}>\n      {/* Reply button */}\n      {context !== 'notifications' && context !== 'friends' && context !== 'blocked' && context !== 'following' && (\n        <div style={{ display: 'flex', justifyContent: 'flex-end', marginBottom: '5px' }}>\n          <button \n            onClick={handleReply}\n            style={{\n              fontSize: '12px',\n              padding: '2px 8px',\n              backgroundColor: 'transparent',\n              border: '1px solid #ddd',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            }}\n          >\n            Reply\n          </button>\n        </div>\n      )}\n      {context === 'notifications' ? (\n        <>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"flex-start\",\n            }}\n          >\n            <div\n              style={{\n                width: \"32px\",\n                height: \"32px\",\n                borderRadius: \"50%\",\n                backgroundColor: \"#4A154B\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                color: \"white\",\n                marginRight: \"12px\",\n                fontSize: \"14px\",\n                fontWeight: \"bold\",\n                flexShrink: 0,\n                cursor: onUserClick && post.uid ? 'pointer' : 'default'\n              }}\n              onClick={handleUserNameClick}\n            >\n              {post.user.charAt(0)}\n            </div>\n            <div style={{ flex: 1 }}>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                <strong \n                  style={{ \n                    fontSize: \"14px\", \n                    cursor: onUserClick && post.uid ? 'pointer' : 'default',\n                    textDecoration: onUserClick && post.uid ? 'underline' : 'none'\n                  }}\n                  onClick={handleUserNameClick}\n                >\n                  {post.user}\n                </strong>\n                <div style={{ \n                  fontSize: \"12px\", \n                  color: \"#666\",\n                }}>\n                  {post.time}\n                </div>\n              </div>\n              <div style={{ fontSize: \"14px\", color: \"#495057\", lineHeight: \"1.4\", marginTop: \"4px\" }}>\n                {post.content}\n              </div>\n            </div>\n            {post.hasLikability && (\n              <div style={{ \n                display: 'flex', \n                justifyContent: 'flex-end',\n                marginTop: '10px'\n              }}>\n                <button \n                  onClick={() => setShowLikabilityModal(true)}\n                  style={{\n                    fontSize: '12px',\n                    padding: '5px 10px',\n                    backgroundColor: '#f8f9fa',\n                    border: '1px solid #dee2e6',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Likability: {averageLikability}%\n                </button>\n              </div>\n            )}\n          </div>\n        </>\n      ) : context === 'friends' ? (\n        <>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"flex-start\",\n              marginBottom: \"10px\",\n            }}\n          >\n            <div\n              style={{\n                width: \"48px\",\n                height: \"48px\",\n                borderRadius: \"50%\",\n                backgroundColor: \"#4A154B\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                color: \"white\",\n                marginRight: \"15px\",\n                fontSize: \"18px\",\n                fontWeight: \"bold\",\n                flexShrink: 0,\n                cursor: onUserClick && post.uid ? 'pointer' : 'default'\n              }}\n              onClick={handleUserNameClick}\n            >\n              {post.user.charAt(0)}\n            </div>\n            <div style={{ flex: 1 }}>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                <strong \n                  style={{ \n                    fontSize: \"16px\", \n                    cursor: onUserClick && post.uid ? 'pointer' : 'default',\n                    textDecoration: onUserClick && post.uid ? 'underline' : 'none'\n                  }}\n                  onClick={handleUserNameClick}\n                >\n                  {post.user}\n                </strong>\n                <div style={{ \n                  fontSize: \"12px\", \n                  color: post.time === \"Online\" ? \"#28a745\" : \"#666\",\n                  fontWeight: post.time === \"Online\" ? \"bold\" : \"normal\"\n                }}>\n                  {post.time}\n                </div>\n              </div>\n              {post.mutualFriends && (\n                <div style={{ fontSize: \"14px\", color: \"#6c757d\", marginBottom: \"5px\" }}>\n                  {post.mutualFriends} mutual friends\n                </div>\n              )}\n              <div style={{ fontSize: \"14px\", color: \"#495057\", lineHeight: \"1.4\" }}>\n                {post.content}\n              </div>\n            </div>\n          </div>\n        </>\n      ) : context === 'profile' || context === 'search' ? (\n        <>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              marginBottom: \"5px\",\n            }}\n          >\n            <div\n              style={{\n                width: \"32px\",\n                height: \"32px\",\n                borderRadius: \"50%\",\n                backgroundColor: \"#4A154B\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                color: \"white\",\n                marginRight: \"10px\",\n                fontSize: \"14px\",\n                fontWeight: \"bold\",\n                cursor: onUserClick && post.uid ? 'pointer' : 'default'\n              }}\n              onClick={handleUserNameClick}\n            >\n              {post.user.charAt(0)}\n            </div>\n            <div>\n              <strong \n                style={{ \n                  cursor: onUserClick && post.uid ? 'pointer' : 'default', \n                  textDecoration: onUserClick && post.uid ? 'underline' : 'none' \n                }}\n                onClick={handleUserNameClick}\n              >\n                {post.user}\n              </strong>\n              <div style={{ fontSize: \"12px\", color: \"#666\" }}>{post.time}</div>\n            </div>\n          </div>\n          <div style={{ marginLeft: \"42px\" }}>\n            {post.content}\n            <div style={{ \n              marginTop: '10px'\n            }}>\n              {renderRelationshipActions()}\n            </div>\n          </div>\n        </>\n      ) : context === 'search' ? (\n        // Special rendering for search results\n        <>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              marginBottom: \"5px\",\n            }}\n          >\n            <div\n              style={{\n                width: \"32px\",\n                height: \"32px\",\n                borderRadius: \"50%\",\n                backgroundColor: \"#4A154B\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                color: \"white\",\n                marginRight: \"10px\",\n                fontSize: \"14px\",\n                fontWeight: \"bold\",\n                cursor: (onUserClick && post.uid) || (onUserClick && post.type === 'search-subject') ? 'pointer' : 'default'\n              }}\n              onClick={post.type === 'search-subject' ? handleSubjectClick : handleUserNameClick}\n            >\n              {post.type === 'search-user' ? '\uD83D\uDC64' : \n               post.type === 'search-subject' ? '\uD83D\uDCDA' : '\uD83D\uDCDD'}\n            </div>\n            <div>\n              <strong \n                style={{ \n                  cursor: (onUserClick && post.uid) || (onUserClick && post.type === 'search-subject') ? 'pointer' : 'default',\n                  textDecoration: (onUserClick && post.uid) || (onUserClick && post.type === 'search-subject') ? 'underline' : 'none'\n                }}\n                onClick={post.type === 'search-subject' ? handleSubjectClick : handleUserNameClick}\n              >\n                {post.user}\n              </strong>\n              <div style={{ fontSize: \"12px\", color: \"#666\" }}>{post.time}</div>\n            </div>\n          </div>\n          <div style={{ marginLeft: \"42px\" }}>\n            {post.content}\n            <div style={{ \n              marginTop: '10px'\n            }}>\n              {post.type === 'search-user' && (\n                <button \n                  onClick={() => {\n                    if (onUserClick) {\n                      onUserClick({ name: post.user, uid: post.uid });\n                    }\n                  }}\n                  style={{ \n                    marginRight: '5px', \n                    fontSize: '12px', \n                    padding: '5px 10px',\n                    backgroundColor: '#4A154B',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  View Profile\n                </button>\n              )}\n              {post.type === 'search-subject' && (\n                <button \n                  onClick={handleSubjectClick}\n                  style={{ \n                    fontSize: '12px', \n                    padding: '5px 10px',\n                    backgroundColor: '#4A154B',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  View Subject\n                </button>\n              )}\n              {post.type === 'search-post' && (\n                <button \n                  onClick={handleReply}\n                  style={{ \n                    fontSize: '12px', \n                    padding: '5px 10px',\n                    backgroundColor: 'transparent',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Reply\n                </button>\n              )}\n            </div>\n          </div>\n        </>\n      ) : context === 'recommendations' ? (\n        // Special rendering for recommendations\n        <>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              marginBottom: \"5px\",\n            }}\n          >\n            <div\n              style={{\n                width: \"32px\",\n                height: \"32px\",\n                borderRadius: \"50%\",\n                backgroundColor: \"#4A154B\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                color: \"white\",\n                marginRight: \"10px\",\n                fontSize: \"14px\",\n                fontWeight: \"bold\",\n                cursor: onUserClick && post.uid ? 'pointer' : 'default'\n              }}\n              onClick={handleUserNameClick}\n            >\n              {post.type === 'user-recommendation' ? '\uD83D\uDC64' : \n               post.type === 'room-recommendation' ? '\uD83D\uDCAC' : '\uD83D\uDCDD'}\n            </div>\n            <div>\n              <strong \n                style={{ \n                  cursor: onUserClick && post.uid ? 'pointer' : 'default',\n                  textDecoration: onUserClick && post.uid ? 'underline' : 'none'\n                }}\n                onClick={handleUserNameClick}\n              >\n                {post.user || 'System'}\n              </strong>\n              <div style={{ fontSize: \"12px\", color: \"#666\" }}>{post.time}</div>\n            </div>\n          </div>\n          <div style={{ marginLeft: \"42px\" }}>\n            {post.content}\n            <div style={{ \n              marginTop: '10px'\n            }}>\n              {post.type === 'user-recommendation' && (\n                <button \n                  onClick={() => handleRelationshipAction('follow')}\n                  style={{ \n                    marginRight: '5px', \n                    fontSize: '12px', \n                    padding: '5px 10px',\n                    backgroundColor: '#4A154B',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Follow\n                </button>\n              )}\n              {post.type === 'room-recommendation' && (\n                <button \n                  onClick={() => {\n                    // In a real app, this would navigate to the chat room\n                    alert(`Joining ${post.room.name}`);\n                  }}\n                  style={{ \n                    fontSize: '12px', \n                    padding: '5px 10px',\n                    backgroundColor: '#4A154B',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Join Chat\n                </button>\n              )}\n              {post.type === 'post-recommendation' && (\n                <button \n                  onClick={handleReply}\n                  style={{ \n                    fontSize: '12px', \n                    padding: '5px 10px',\n                    backgroundColor: 'transparent',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Reply\n                </button>\n              )}\n            </div>\n          </div>\n        </>\n      ) : (\n        <>\n          <div \n            style={{ \n              fontWeight: \"bold\", \n              cursor: onUserClick && post.uid ? 'pointer' : 'default',\n              textDecoration: onUserClick && post.uid ? 'underline' : 'none'\n            }}\n            onClick={handleUserNameClick}\n          >\n            {post.user}\n          </div>\n          <div>{post.content}</div>\n          <div style={{ \n            display: 'flex', \n            justifyContent: 'space-between', \n            alignItems: 'center',\n            marginTop: '10px'\n          }}>\n            <div style={{ fontSize: \"12px\", color: \"#666\" }}>{post.time}</div>\n          </div>\n          {renderRelationshipActions()}\n        </>\n      )}\n      \n    </div>\n  );\n}\n", "import React, { useState, useContext, useEffect } from 'react';\nimport { Modal, Button } from 'react-bootstrap';\nimport { BackendContext } from './Backend.js';\n\nexport function SubjectModal({ show, onHide, subject, currentUser }) {\n    const backend = useContext(BackendContext);\n    const [userLoveHate, setUserLoveHate] = useState(null);\n    const [allLoveHates, setAllLoveHates] = useState([]);\n    const [users, setUsers] = useState([]);\n\n    // Create a default subject if none is provided\n    const displaySubject = subject || {\n        id: 'default-subject',\n        name: 'General Discussion',\n        description: 'Discuss various topics and subjects'\n    };\n\n    useEffect(() => {\n        const fetchData = async () => {\n            if (!currentUser) return;\n            \n            try {\n                // Get all users to display names\n                const userList = await backend.getUsers();\n                setUsers(userList);\n                \n                // Get current user's love/hate for this subject\n                const userItems = currentUser.loveHateItems || [];\n                const userItem = userItems.find(item => item.subjectId === displaySubject.id);\n                setUserLoveHate(userItem ? (userItem.isLove ? 'love' : 'hate') : null);\n                \n                // Get all love/hate items for this subject from all users\n                // For now, we'll use a placeholder implementation\n                // In a real app, you'd have a backend method to get this\n                const allItems = [];\n                for (const user of userList) {\n                    if (user.loveHateItems) {\n                        const item = user.loveHateItems.find(i => i.subjectId === displaySubject.id);\n                        if (item) {\n                            allItems.push({\n                                user,\n                                isLove: item.isLove\n                            });\n                        }\n                    }\n                }\n                setAllLoveHates(allItems);\n            } catch (error) {\n                console.error('Error fetching subject data:', error);\n            }\n        };\n\n        if (show) {\n            fetchData();\n        }\n    }, [show, displaySubject, currentUser, backend]);\n\n    const handleLoveHate = async (action) => {\n        if (!currentUser) return;\n        \n        try {\n            const newLoveHate = action === 'love';\n            const updatedItems = (currentUser.loveHateItems || []).filter(item => item.subjectId !== displaySubject.id);\n            updatedItems.push({\n                subjectId: displaySubject.id,\n                isLove: newLoveHate\n            });\n            \n            await backend.updateUser(currentUser.uid, {\n                loveHateItems: updatedItems\n            });\n            \n            setUserLoveHate(action);\n            \n            // Update allLoveHates\n            const userIndex = allLoveHates.findIndex(item => item.user.uid === currentUser.uid);\n            if (userIndex !== -1) {\n                const newAllLoveHates = [...allLoveHates];\n                newAllLoveHates[userIndex].isLove = newLoveHate;\n                setAllLoveHates(newAllLoveHates);\n            } else {\n                setAllLoveHates([...allLoveHates, {\n                    user: currentUser,\n                    isLove: newLoveHate\n                }]);\n            }\n        } catch (error) {\n            console.error('Error updating love/hate:', error);\n        }\n    };\n\n    const loves = allLoveHates.filter(item => item.isLove);\n    const hates = allLoveHates.filter(item => !item.isLove);\n\n    return (\n        <Modal show={show} onHide={onHide} centered size=\"lg\">\n            <Modal.Header closeButton>\n                <Modal.Title>Subject: {displaySubject.name}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <div style={{ textAlign: 'center', marginBottom: '30px' }}>\n                    <div style={{\n                        width: '100px',\n                        height: '100px',\n                        borderRadius: '50%',\n                        backgroundColor: '#4A154B',\n                        display: 'inline-flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: 'white',\n                        fontSize: '36px',\n                        fontWeight: 'bold',\n                        marginBottom: '20px'\n                    }}>\n                        \uD83D\uDCDA\n                    </div>\n                    <h4>{displaySubject.name}</h4>\n                    <p style={{ color: '#666' }}>{displaySubject.description}</p>\n                </div>\n                \n                <div style={{ marginBottom: '30px' }}>\n                    <h5 style={{ color: '#4A154B', marginBottom: '15px' }}>Your Reaction</h5>\n                    <div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>\n                        <Button \n                            variant={userLoveHate === 'love' ? 'success' : 'outline-success'}\n                            onClick={() => handleLoveHate('love')}\n                            style={{ padding: '10px 20px' }}\n                        >\n                            \u2764\uFE0F Love\n                        </Button>\n                        <Button \n                            variant={userLoveHate === 'hate' ? 'danger' : 'outline-danger'}\n                            onClick={() => handleLoveHate('hate')}\n                            style={{ padding: '10px 20px' }}\n                        >\n                            \uD83D\uDC94 Hate\n                        </Button>\n                        {userLoveHate && (\n                            <Button \n                                variant=\"outline-secondary\"\n                                onClick={() => handleLoveHate('remove')}\n                                style={{ padding: '10px 20px' }}\n                            >\n                                Remove\n                            </Button>\n                        )}\n                    </div>\n                </div>\n                \n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\n                    <div>\n                        <h5 style={{ color: '#4A154B', marginBottom: '15px' }}>Loved By ({loves.length})</h5>\n                        <div style={{ maxHeight: '200px', overflowY: 'auto' }}>\n                            {loves.map((item, index) => (\n                                <div key={index} style={{\n                                    padding: '8px',\n                                    backgroundColor: '#f8f9fa',\n                                    marginBottom: '5px',\n                                    borderRadius: '4px',\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: '10px'\n                                }}>\n                                    <div style={{\n                                        width: '30px',\n                                        height: '30px',\n                                        borderRadius: '50%',\n                                        backgroundColor: '#4A154B',\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                        color: 'white',\n                                        fontSize: '12px',\n                                        fontWeight: 'bold'\n                                    }}>\n                                        {item.user.name.charAt(0)}\n                                    </div>\n                                    {item.user.name}\n                                </div>\n                            ))}\n                            {loves.length === 0 && (\n                                <p style={{ color: '#666', textAlign: 'center' }}>No loves yet</p>\n                            )}\n                        </div>\n                    </div>\n                    \n                    <div>\n                        <h5 style={{ color: '#4A154B', marginBottom: '15px' }}>Hated By ({hates.length})</h5>\n                        <div style={{ maxHeight: '200px', overflowY: 'auto' }}>\n                            {hates.map((item, index) => (\n                                <div key={index} style={{\n                                    padding: '8px',\n                                    backgroundColor: '#f8f9fa',\n                                    marginBottom: '5px',\n                                    borderRadius: '4px',\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: '10px'\n                                }}>\n                                    <div style={{\n                                        width: '30px',\n                                        height: '30px',\n                                        borderRadius: '50%',\n                                        backgroundColor: '#4A154B',\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                        color: 'white',\n                                        fontSize: '12px',\n                                        fontWeight: 'bold'\n                                    }}>\n                                        {item.user.name.charAt(0)}\n                                    </div>\n                                    {item.user.name}\n                                </div>\n                            ))}\n                            {hates.length === 0 && (\n                                <p style={{ color: '#666', textAlign: 'center' }}>No hates yet</p>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </Modal.Body>\n        </Modal>\n    );\n}\n", "import React from 'react';\n\nexport function SubjectBanner({ subject, onShowSubjectModal }) {\n    console.log(\"SubjectBanner rendering with subject:\", subject);\n    console.log(\"onShowSubjectModal function:\", onShowSubjectModal);\n    \n    // Create a default subject if none is provided\n    const displaySubject = subject || {\n        name: 'General Discussion',\n        description: 'Discuss various topics and subjects'\n    };\n    \n    return (\n        <div style={{\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            borderRadius: '12px',\n            padding: '30px',\n            marginBottom: '20px',\n            color: 'white',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '20px',\n            position: 'relative'\n        }}>\n            <div style={{\n                width: '100px',\n                height: '100px',\n                borderRadius: '50%',\n                backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                fontSize: '36px',\n                fontWeight: 'bold',\n                border: '4px solid rgba(255, 255, 255, 0.3)',\n                cursor: 'pointer'\n            }}\n            onClick={onShowSubjectModal}>\n                \uD83D\uDCDA\n            </div>\n            <div style={{ flex: 1 }}>\n                <h2 style={{ margin: 0, fontWeight: 'bold' }}>{displaySubject.name}</h2>\n                <p style={{ margin: '5px 0 0 0', opacity: 0.9 }}>\n                    {displaySubject.description}\n                </p>\n            </div>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px', alignItems: 'flex-end' }}>\n                <button \n                    onClick={onShowSubjectModal}\n                    style={{\n                        padding: '10px 20px',\n                        backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                        border: '1px solid rgba(255, 255, 255, 0.3)',\n                        borderRadius: '20px',\n                        cursor: 'pointer',\n                        color: 'white',\n                        fontWeight: 'bold',\n                        fontSize: '14px',\n                        transition: 'background-color 0.2s ease'\n                    }}\n                    onMouseEnter={(e) => {\n                        e.target.style.backgroundColor = 'rgba(255, 255, 255, 0.3)';\n                    }}\n                    onMouseLeave={(e) => {\n                        e.target.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';\n                    }}\n                >\n                    View Subject Details\n                </button>\n            </div>\n        </div>\n    );\n}\n"],
  "mappings": "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",
  "names": ["React", "useSyncExternalStore", "useRef", "useEffect", "useMemo", "useDebugValue", "import_react", "import_react", "import_jsx_runtime", "import_react", "React", "useReduxContext", "useReduxContext", "useSelector", "createSelector", "allPosts", "posts", "import_react", "import_react", "import_jsx_runtime", "averageLikability", "import_react", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_jsx_runtime", "averageLikability", "import_react", "import_jsx_runtime", "import_react", "import_react", "import_jsx_runtime", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_jsx_runtime", "setShowLikabilityModal", "averageLikability", "posts", "React"]
}
