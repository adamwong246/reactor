{
  "version": 3,
  "sources": ["../../index.js"],
  "sourcesContent": ["import React, { useState, useEffect } from 'react';\nimport { createRoot } from 'react-dom/client';\n\nexport function initRakonto(config) {\n    const App = () => {\n        const [selectedStory, setSelectedStory] = useState(null);\n        const [storiesTree, setStoriesTree] = useState({});\n        const [iframeContent, setIframeContent] = useState('');\n        const [isLoading, setIsLoading] = useState(false);\n    \n    // Build the tree structure from the flat list of stories\n    useEffect(() => {\n        const tree = {};\n        \n        config.stories.forEach(storyPath => {\n            // Split the path to build the tree structure\n            const parts = storyPath.split('/');\n            let current = tree;\n            \n            // Build the directory structure\n            for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n                if (i === parts.length - 1) {\n                    // It's the story file - store the full path\n                    current[part] = { \n                        path: storyPath\n                    };\n                } else {\n                    // It's a directory\n                    if (!current[part]) {\n                        current[part] = {};\n                    }\n                    current = current[part];\n                }\n            }\n        });\n        \n        setStoriesTree(tree);\n        // Set the first story as selected\n        if (config.stories.length > 0 && !selectedStory) {\n            setSelectedStory(config.stories[0]);\n        }\n    }, []);\n    \n    // Load the selected story dynamically and prepare iframe content\n    useEffect(() => {\n        if (selectedStory) {\n            setIsLoading(true);\n            console.log('Setting selected story:', selectedStory);\n            // Create a unique URL for the iframe to load the story\n            // We'll use a query parameter to tell the iframe which story to load\n            const iframeUrl = `/story-iframe.html?story=${encodeURIComponent(selectedStory)}`;\n            console.log('Iframe URL:', iframeUrl);\n            setIframeContent(iframeUrl);\n            // Don't set isLoading to false here - wait for iframe to load\n        }\n    }, [selectedStory]);\n    \n    // Helper function to find a story in the tree by path\n    const findStoryInTree = (tree, path) => {\n        const parts = path.split('/');\n        let current = tree;\n        \n        for (const part of parts) {\n            current = current[part];\n            if (!current) return null;\n        }\n        \n        return current;\n    };\n\n    // Recursive function to render the tree\n    const renderTree = (node, path = '') => {\n        return Object.keys(node).map(key => {\n            const currentPath = path ? `${path}/${key}` : key;\n            \n            if (node[key].path) {\n                // It's a story\n                const storyPath = node[key].path;\n                const displayName = key.replace('.stories.js', '').replace('.js', '');\n                \n                return (\n                    <div\n                        key={storyPath}\n                        onClick={() => setSelectedStory(storyPath)}\n                        style={{\n                            padding: '8px 12px 8px 20px',\n                            margin: '2px 0',\n                            cursor: 'pointer',\n                            borderRadius: '4px',\n                            backgroundColor: selectedStory === storyPath ? 'grey' : 'transparent',\n                            color: selectedStory === storyPath ? 'white' : '#333',\n                            fontWeight: selectedStory === storyPath ? 'bold' : 'normal',\n                            fontSize: '14px',\n                            transition: 'all 0.2s ease'\n                        }}\n                    >\n                        {displayName}\n                    </div>\n                );\n            } else {\n                // It's a directory\n                return (\n                    <div key={currentPath} style={{ marginLeft: '0px' }}>\n                        <div style={{ \n                            fontWeight: 'bold', \n                            margin: '8px 0 4px 0',\n                            padding: '6px 12px',\n                            fontSize: '14px',\n                            color: '#666',\n                            textTransform: 'uppercase',\n                            letterSpacing: '0.5px'\n                        }}>\n                            {key}\n                        </div>\n                        <div style={{ marginLeft: '10px' }}>\n                            {renderTree(node[key], currentPath)}\n                        </div>\n                    </div>\n                );\n            }\n        });\n    };\n\n    const displayName = selectedStory ? selectedStory.split('/').pop().replace('.stories.js', '').replace('.js', '') : '';\n    \n    return (\n        <div style={{ display: 'flex', height: '100vh' }}>\n            {/* Left Column - Tree View */}\n            <div style={{ \n                width: '280px', \n                borderRight: '1px solid #ddd',\n                backgroundColor: '#f8f9fa',\n                padding: '20px',\n                overflow: 'auto'\n            }}>\n                <h3 style={{ marginTop: 0, marginBottom: '20px', color: '#333' }}>Stories</h3>\n                {renderTree(storiesTree)}\n            </div>\n            \n            {/* Right Column - Component Display */}\n            <div style={{ \n                flex: 1, \n                padding: '20px',\n                overflow: 'auto',\n                backgroundColor: '#fff'\n            }}>\n                {/* <h1 style={{ marginTop: 0, marginBottom: '20px', color: '#333' }}>\n                    {displayName || 'Select a Story'}\n                </h1> */}\n                {isLoading && !iframeContent && <div>Loading story...</div>}\n                {iframeContent && (\n                    <iframe\n                        key={iframeContent} // Force re-render when URL changes\n                        src={iframeContent}\n                        style={{\n                            width: '100%',\n                            height: '100%',\n                            border: 'none',\n                            borderRadius: '8px',\n                            display: isLoading ? 'none' : 'block'\n                        }}\n                        title=\"Story Preview\"\n                        onLoad={() => {\n                            console.log('Iframe loaded successfully:', iframeContent);\n                            setIsLoading(false);\n                        }}\n                        onError={(e) => {\n                            console.log('Iframe failed to load:', iframeContent, e);\n                            setIsLoading(false);\n                        }}\n                    />\n                )}\n                {!isLoading && selectedStory && !iframeContent && (\n                    <div>Error loading story: {selectedStory}</div>\n                )}\n            </div>\n        </div>\n        );\n    };\n\n    const container = document.getElementById('root');\n    const root = createRoot(container);\n    root.render(<App />);\n}\n"],
  "mappings": "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",
  "names": ["import_react", "import_client", "import_jsx_runtime", "initRakonto", "config", "App", "selectedStory", "setSelectedStory", "storiesTree", "setStoriesTree", "iframeContent", "setIframeContent", "isLoading", "setIsLoading", "tree", "storyPath", "parts", "current", "i", "part", "iframeUrl", "findStoryInTree", "path", "renderTree", "node", "key", "currentPath", "displayName", "container"]
}
